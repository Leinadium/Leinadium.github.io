(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function R(){}const Ge=n=>n;function xe(n,e){for(const t in e)n[t]=e[t];return n}function zt(n){return n()}function ht(){return Object.create(null)}function ie(n){n.forEach(zt)}function Se(n){return typeof n=="function"}function x(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Be;function ee(n,e){return Be||(Be=document.createElement("a")),Be.href=e,n===Be.href}function _n(n){return Object.keys(n).length===0}function yn(n,...e){if(n==null)return R;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function L(n,e,t){n.$$.on_destroy.push(yn(e,t))}function K(n,e,t){return n.set(t),e}function vt(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const Ht=typeof window<"u";let et=Ht?()=>window.performance.now():()=>Date.now(),at=Ht?n=>requestAnimationFrame(n):R;const Ae=new Set;function Vt(n){Ae.forEach(e=>{e.c(n)||(Ae.delete(e),e.f())}),Ae.size!==0&&at(Vt)}function tt(n){let e;return Ae.size===0&&at(Vt),{promise:new Promise(t=>{Ae.add(e={c:n,f:t})}),abort(){Ae.delete(e)}}}const hn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in hn;function h(n,e){n.appendChild(e)}function Wt(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function vn(n){const e=v("style");return bn(Wt(n),e),e.sheet}function bn(n,e){return h(n.head||n,e),e.sheet}function P(n,e,t){n.insertBefore(e,t||null)}function T(n){n.parentNode&&n.parentNode.removeChild(n)}function kn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function v(n){return document.createElement(n)}function G(n){return document.createTextNode(n)}function E(){return G(" ")}function ue(){return G("")}function B(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function $e(n){return function(e){return e.preventDefault(),n.call(this,e)}}function _(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function wn(n){return n===""?null:+n}function Sn(n){return Array.from(n.childNodes)}function H(n,e){e=""+e,n.data!==e&&(n.data=e)}function Me(n,e){n.value=e??""}function re(n,e,t,r){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function ye(n,e,t){n.classList[t?"add":"remove"](e)}function Kt(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(n,t,r,e),s}const Ve=new Map;let We=0;function Tn(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function Dn(n,e){const t={stylesheet:vn(e),rules:{}};return Ve.set(n,t),t}function Ke(n,e,t,r,s,l,o,a=0){const i=16.666/r;let m=`{
`;for(let y=0;y<=1;y+=i){const k=e+(t-e)*l(y);m+=y*100+`%{${o(k,1-k)}}
`}const f=m+`100% {${o(t,1-t)}}
}`,d=`__svelte_${Tn(f)}_${a}`,u=Wt(n),{stylesheet:c,rules:p}=Ve.get(u)||Dn(u,n);p[d]||(p[d]=!0,c.insertRule(`@keyframes ${d} ${f}`,c.cssRules.length));const g=n.style.animation||"";return n.style.animation=`${g?`${g}, `:""}${d} ${r}ms linear ${s}ms 1 both`,We+=1,d}function Je(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),s=t.length-r.length;s&&(n.style.animation=r.join(", "),We-=s,We||Pn())}function Pn(){at(()=>{We||(Ve.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&T(e)}),Ve.clear())})}let je;function Le(n){je=n}function ut(){if(!je)throw new Error("Function called outside component initialization");return je}function ae(n){ut().$$.on_mount.push(n)}function Ne(n){ut().$$.on_destroy.push(n)}function se(){const n=ut();return(e,t,{cancelable:r=!1}={})=>{const s=n.$$.callbacks[e];if(s){const l=Kt(e,t,{cancelable:r});return s.slice().forEach(o=>{o.call(n,l)}),!l.defaultPrevented}return!0}}function te(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const Ee=[],fe=[];let Ce=[];const lt=[],In=Promise.resolve();let ot=!1;function qn(){ot||(ot=!0,In.then(Jt))}function J(n){Ce.push(n)}function Te(n){lt.push(n)}const nt=new Set;let Ie=0;function Jt(){if(Ie!==0)return;const n=je;do{try{for(;Ie<Ee.length;){const e=Ee[Ie];Ie++,Le(e),En(e.$$)}}catch(e){throw Ee.length=0,Ie=0,e}for(Le(null),Ee.length=0,Ie=0;fe.length;)fe.pop()();for(let e=0;e<Ce.length;e+=1){const t=Ce[e];nt.has(t)||(nt.add(t),t())}Ce.length=0}while(Ee.length);for(;lt.length;)lt.pop()();ot=!1,nt.clear(),Le(n)}function En(n){if(n.fragment!==null){n.update(),ie(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(J)}}function An(n){const e=[],t=[];Ce.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Ce=e}let Ue;function ct(){return Ue||(Ue=Promise.resolve(),Ue.then(()=>{Ue=null})),Ue}function be(n,e,t){n.dispatchEvent(Kt(`${e?"intro":"outro"}${t}`))}const He=new Set;let de;function V(){de={r:0,c:[],p:de}}function W(){de.r||ie(de.c),de=de.p}function w(n,e){n&&n.i&&(He.delete(n),n.i(e))}function S(n,e,t,r){if(n&&n.o){if(He.has(n))return;He.add(n),de.c.push(()=>{He.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const ft={duration:0};function ne(n,e,t){const r={direction:"in"};let s=e(n,t,r),l=!1,o,a,i=0;function m(){o&&Je(n,o)}function f(){const{delay:u=0,duration:c=300,easing:p=Ge,tick:g=R,css:y}=s||ft;y&&(o=Ke(n,0,1,c,u,p,y,i++)),g(0,1);const k=et()+u,b=k+c;a&&a.abort(),l=!0,J(()=>be(n,!0,"start")),a=tt(A=>{if(l){if(A>=b)return g(1,0),be(n,!0,"end"),m(),l=!1;if(A>=k){const q=p((A-k)/c);g(q,1-q)}}return l})}let d=!1;return{start(){d||(d=!0,Je(n),Se(s)?(s=s(r),ct().then(f)):f())},invalidate(){d=!1},end(){l&&(m(),l=!1)}}}function he(n,e,t){const r={direction:"out"};let s=e(n,t,r),l=!0,o;const a=de;a.r+=1;function i(){const{delay:m=0,duration:f=300,easing:d=Ge,tick:u=R,css:c}=s||ft;c&&(o=Ke(n,1,0,f,m,d,c));const p=et()+m,g=p+f;J(()=>be(n,!1,"start")),tt(y=>{if(l){if(y>=g)return u(0,1),be(n,!1,"end"),--a.r||ie(a.c),!1;if(y>=p){const k=d((y-p)/f);u(1-k,k)}}return l})}return Se(s)?ct().then(()=>{s=s(r),i()}):i(),{end(m){m&&s.tick&&s.tick(1,0),l&&(o&&Je(n,o),l=!1)}}}function ve(n,e,t,r){const s={direction:"both"};let l=e(n,t,s),o=r?0:1,a=null,i=null,m=null;function f(){m&&Je(n,m)}function d(c,p){const g=c.b-o;return p*=Math.abs(g),{a:o,b:c.b,d:g,duration:p,start:c.start,end:c.start+p,group:c.group}}function u(c){const{delay:p=0,duration:g=300,easing:y=Ge,tick:k=R,css:b}=l||ft,A={start:et()+p,b:c};c||(A.group=de,de.r+=1),a||i?i=A:(b&&(f(),m=Ke(n,o,c,g,p,y,b)),c&&k(0,1),a=d(A,g),J(()=>be(n,c,"start")),tt(q=>{if(i&&q>i.start&&(a=d(i,g),i=null,be(n,a.b,"start"),b&&(f(),m=Ke(n,o,a.b,a.duration,0,y,l.css))),a){if(q>=a.end)k(o=a.b,1-o),be(n,a.b,"end"),i||(a.b?f():--a.group.r||ie(a.group.c)),a=null;else if(q>=a.start){const D=q-a.start;o=a.a+a.d*y(D/a.duration),k(o,1-o)}}return!!(a||i)}))}return{run(c){Se(l)?ct().then(()=>{l=l(s),u(c)}):u(c)},end(){f(),a=i=null}}}function Yt(n,e){S(n,1,1,()=>{e.delete(n.key)})}function Xt(n,e,t,r,s,l,o,a,i,m,f,d){let u=n.length,c=l.length,p=u;const g={};for(;p--;)g[n[p].key]=p;const y=[],k=new Map,b=new Map,A=[];for(p=c;p--;){const U=d(s,l,p),Z=t(U);let z=o.get(Z);z?r&&A.push(()=>z.p(U,e)):(z=m(Z,U),z.c()),k.set(Z,y[p]=z),Z in g&&b.set(Z,Math.abs(p-g[Z]))}const q=new Set,D=new Set;function I(U){w(U,1),U.m(a,f),o.set(U.key,U),f=U.first,c--}for(;u&&c;){const U=y[c-1],Z=n[u-1],z=U.key,Q=Z.key;U===Z?(f=U.first,u--,c--):k.has(Q)?!o.has(z)||q.has(z)?I(U):D.has(Q)?u--:b.get(z)>b.get(Q)?(D.add(z),I(U)):(q.add(Q),u--):(i(Z,o),u--)}for(;u--;){const U=n[u];k.has(U.key)||i(U,o)}for(;c;)I(y[c-1]);return ie(A),y}function mt(n,e){const t={},r={},s={$$scope:1};let l=n.length;for(;l--;){const o=n[l],a=e[l];if(a){for(const i in o)i in a||(r[i]=1);for(const i in a)s[i]||(t[i]=a[i],s[i]=1);n[l]=a}else for(const i in o)s[i]=1}for(const o in r)o in t||(t[o]=void 0);return t}function pt(n){return typeof n=="object"&&n!==null?n:{}}const Cn=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...Cn];function De(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function M(n){n&&n.c()}function C(n,e,t,r){const{fragment:s,after_update:l}=n.$$;s&&s.m(e,t),r||J(()=>{const o=n.$$.on_mount.map(zt).filter(Se);n.$$.on_destroy?n.$$.on_destroy.push(...o):ie(o),n.$$.on_mount=[]}),l.forEach(J)}function $(n,e){const t=n.$$;t.fragment!==null&&(An(t.after_update),ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function $n(n,e){n.$$.dirty[0]===-1&&(Ee.push(n),qn(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function j(n,e,t,r,s,l,o,a=[-1]){const i=je;Le(n);const m=n.$$={fragment:null,ctx:[],props:l,update:R,not_equal:s,bound:ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:ht(),dirty:a,skip_bound:!1,root:e.target||i.$$.root};o&&o(m.root);let f=!1;if(m.ctx=t?t(n,e.props||{},(d,u,...c)=>{const p=c.length?c[0]:u;return m.ctx&&s(m.ctx[d],m.ctx[d]=p)&&(!m.skip_bound&&m.bound[d]&&m.bound[d](p),f&&$n(n,d)),u}):[],m.update(),f=!0,ie(m.before_update),m.fragment=r?r(m.ctx):!1,e.target){if(e.hydrate){const d=Sn(e.target);m.fragment&&m.fragment.l(d),d.forEach(T)}else m.fragment&&m.fragment.c();e.intro&&w(n.$$.fragment),C(n,e.target,e.anchor,e.customElement),Jt()}Le(i)}class F{$destroy(){$(this,1),this.$destroy=R}$on(e,t){if(!Se(t))return R;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!_n(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qe=[];function me(n,e=R){let t;const r=new Set;function s(a){if(x(n,a)&&(n=a,t)){const i=!qe.length;for(const m of r)m[1](),qe.push(m,n);if(i){for(let m=0;m<qe.length;m+=2)qe[m][0](qe[m+1]);qe.length=0}}}function l(a){s(a(n))}function o(a,i=R){const m=[a,i];return r.add(m),r.size===1&&(t=e(s)||R),a(n),()=>{r.delete(m),r.size===0&&t&&(t(),t=null)}}return{set:s,update:l,subscribe:o}}const Mn={br:{authenticated:"Autenticado. Você pode fechar essa janela","landing-title":"Você conhece as suas músicas?","landing-description":"Conecte sua conta do Spotify, escolha uma playlist/album e tente adivinhar rapidamente a música!","landing-login":"Entre com","landing-continue":"Jogar como","landing-logout":"Sair","landing-not":"Não é","landing-about":"Sobre","landing-about-content":"xxxxx about xxxxx","landing-tutorial":"Tutorial","landing-tutorial-content":"xxxxx tutorial xxxxx","landing-goback":"Voltar","landing-requires":"Spotify Premium necessário","copyright-text1":"Guessify não possui associação com Spotify.","copyright-text2":"Guessify não usa cookies nem rastreia seus dados.","pregame-choose":"Escolha da sua biblioteca","pregame-load":"ou utilize uma URL","pregame-not-found":"Nenhuma album ou playlist encontrada","contentbox-track":"música","pregame-placeholder":'Clique em "Compartilhar - Copiar link" e cole aqui',"pregame-invalidurl":"URL inválida","pregame-urlnotfound":"Playlist ou album não encontrada","pregame-play":"Jogar","spotify-powered":"Fornecido por","spotify-open":"Abrir em","start-selected":"Playlist/Album selecionado:","start-tip":"Dica:","start-start":"Começar","game-now-playing":"Tocando de: ","game-double-click":"Clique duas vezes para escolher","game-click-again":"Clique de novo","game-click-again2":"para escolher","game-listening":"O que está ouvindo?","game-guess":"Escolher","game-points":"pontos","game-rounds":"rodadas","game-correct":"Correto","game-wrong":"Errado","game-you-got":"Você ganhou ","game-try-again":"Tente novamente!","game-correct-track":"A música correta era:","game-you-guessed":"Você escolheu:","game-prenext":"Faltam","game-next":"Próximo","game-round":"rodada","game-posnext":"","game-endresults":"Resultados","game-your-score":"Sua pontuação","game-seconds":"segundos","game-correct-guesses":"Escolhas corretas","game-average":"Média para escolhas corretas","game-total":"Tempo total","game-rounds-of":"rodadas de","game-share":"Copiar link","game-playagain":"Jogar novamente","game-newgame":"Novo jogo","game-copied":"Copiado!"},en:{authenticated:"Authenticated. You can close this window","landing-title":"Do you know your music?","landing-description":"Connect with your Spotify account, choose a playlist/album and try to guess quickly the music!","landing-login":"Login with","landing-continue":"Play as","landing-logout":"Logout","landing-not":"Not","landing-about":"About","landing-about-content":"xxxxx about xxxxx","landing-tutorial":"Tutorial","landing-tutorial-content":"xxxxx tutorial xxxxx","landing-goback":"Go back","landing-requires":"Requires Spotify Premium","copyright-text1":"Guessify has no association with Spotify.","copyright-text2":"Guessify has no cookies and no data tracking.","pregame-choose":"Choose from your library","pregame-load":"or load from an URL","pregame-not-found":"No albums or playlist found","contentbox-track":"track","pregame-placeholder":'Click on "Share - Copy Link" and paste here',"pregame-invalidurl":"Invalid URL","pregame-urlnotfound":"Could not find Playlist or Album","pregame-play":"Play","spotify-powered":"Powered by","spotify-open":"Open in","start-selected":"Playlist/Album selected:","start-tip":"Tip:","start-start":"Start","game-now-playing":"Now playing from: ","game-double-click":"Double click on a track to submit","game-click-again":"Click again","game-click-again2":"to submit","game-listening":"What are you listening?","game-guess":"Guess","game-points":"points","game-rounds":"rounds","game-correct":"Correct","game-wrong":"Wrong","game-you-got":"You got ","game-try-again":"Try again!","game-correct-track":"The correct track was:","game-you-guessed":"You guessed:","game-prenext":"","game-next":"Next","game-round":"round","game-posnext":" to go","game-endresults":"End results","game-your-score":"Your score","game-seconds":"seconds","game-correct-guesses":"Correct guesses","game-average":"Average for correct guesses","game-total":"Total time","game-rounds-of":"rounds of","game-share":"Share","game-playagain":"Play again","game-newgame":"New game","game-copied":"Copied!"}},dt="http://localhost:5000",Qt="http://localhost:5173",Rn=`${dt}/auth`,Un=Qt,Ln=`${dt}/get_refresh`,xn=`${dt}/get_access`,Zt="refresh",en="volume",tn="lang",nn=5,Fe=100,rt=7e3;function Ye(n){const e=n.length;return e>0?n[e-1].url:null}function Y(n,e){return Mn[n][e]}function jn(){let n=document.getElementsByTagName("iframe");n.length>0&&n[0].parentNode.removeChild(n[0])}function Fn(n,e,t){const r=Fe/t;if(n<rt)return r;const s=r*(1-(n-rt)/((e-rt)/3));return s>0?Math.floor(s):0}function Gn(n){const e=n.split(":");return e[1][0]+e[2]}function Nn(n,e){return`https://open.spotify.com/${n==="a"?"album":"playlist"}/${e}`}function On(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rn={exports:{}};(function(n){var e=function(){var t="https://api.spotify.com/v1",r=null,s=null,l=function(u,c){return u.abort=c,u},o=function(u,c){var p;if(s!==null){var g=s.defer();u(function(y){g.resolve(y)},function(y){g.reject(y)}),p=g.promise}else window.Promise&&(p=new window.Promise(u));return p?new l(p,c):null},a=function(){var u=Array.prototype.slice.call(arguments),c=u[0],p=u.slice(1);return c=c||{},p.forEach(function(g){for(var y in g)g.hasOwnProperty(y)&&(c[y]=g[y])}),c},i=function(u,c){var p="";for(var g in c)if(c.hasOwnProperty(g)){var y=c[g];p+=encodeURIComponent(g)+"="+encodeURIComponent(y)+"&"}return p.length>0&&(p=p.substring(0,p.length-1),u=u+"?"+p),u},m=function(u,c){var p=new XMLHttpRequest,g=function(y,k){function b(I){y&&y(I),c&&c(null,I)}function A(){k&&k(p),c&&c(p,null)}var q=u.type||"GET";if(p.open(q,i(u.url,u.params)),r&&p.setRequestHeader("Authorization","Bearer "+r),p.onreadystatechange=function(){if(p.readyState===4){var I=null;try{I=p.responseText?JSON.parse(p.responseText):""}catch(U){console.error(U)}p.status>=200&&p.status<300?b(I):A()}},q==="GET")p.send(null);else{var D=null;u.postData&&(u.contentType==="image/jpeg"?(D=u.postData,p.setRequestHeader("Content-Type",u.contentType)):(D=JSON.stringify(u.postData),p.setRequestHeader("Content-Type","application/json"))),p.send(D)}};return c?(g(),null):o(g,function(){p.abort()})},f=function(u,c,p,g){var y={},k=null;typeof c=="object"?(y=c,k=p):typeof c=="function"&&(k=c);var b=u.type||"GET";return b!=="GET"&&u.postData&&!g?u.postData=a(u.postData,y):u.params=a(u.params,y),m(u,k)},d=function(){};return d.prototype={constructor:e},d.prototype.getGeneric=function(u,c){var p={url:u};return f(p,c)},d.prototype.getMe=function(u,c){var p={url:t+"/me"};return f(p,u,c)},d.prototype.getMySavedTracks=function(u,c){var p={url:t+"/me/tracks"};return f(p,u,c)},d.prototype.addToMySavedTracks=function(u,c,p){var g={url:t+"/me/tracks",type:"PUT",postData:u};return f(g,c,p)},d.prototype.removeFromMySavedTracks=function(u,c,p){var g={url:t+"/me/tracks",type:"DELETE",postData:u};return f(g,c,p)},d.prototype.containsMySavedTracks=function(u,c,p){var g={url:t+"/me/tracks/contains",params:{ids:u.join(",")}};return f(g,c,p)},d.prototype.getMySavedAlbums=function(u,c){var p={url:t+"/me/albums"};return f(p,u,c)},d.prototype.addToMySavedAlbums=function(u,c,p){var g={url:t+"/me/albums",type:"PUT",postData:u};return f(g,c,p)},d.prototype.removeFromMySavedAlbums=function(u,c,p){var g={url:t+"/me/albums",type:"DELETE",postData:u};return f(g,c,p)},d.prototype.containsMySavedAlbums=function(u,c,p){var g={url:t+"/me/albums/contains",params:{ids:u.join(",")}};return f(g,c,p)},d.prototype.getMyTopArtists=function(u,c){var p={url:t+"/me/top/artists"};return f(p,u,c)},d.prototype.getMyTopTracks=function(u,c){var p={url:t+"/me/top/tracks"};return f(p,u,c)},d.prototype.getMyRecentlyPlayedTracks=function(u,c){var p={url:t+"/me/player/recently-played"};return f(p,u,c)},d.prototype.followUsers=function(u,c){var p={url:t+"/me/following/",type:"PUT",params:{ids:u.join(","),type:"user"}};return f(p,c)},d.prototype.followArtists=function(u,c){var p={url:t+"/me/following/",type:"PUT",params:{ids:u.join(","),type:"artist"}};return f(p,c)},d.prototype.followPlaylist=function(u,c,p){var g={url:t+"/playlists/"+u+"/followers",type:"PUT",postData:{}};return f(g,c,p)},d.prototype.unfollowUsers=function(u,c){var p={url:t+"/me/following/",type:"DELETE",params:{ids:u.join(","),type:"user"}};return f(p,c)},d.prototype.unfollowArtists=function(u,c){var p={url:t+"/me/following/",type:"DELETE",params:{ids:u.join(","),type:"artist"}};return f(p,c)},d.prototype.unfollowPlaylist=function(u,c){var p={url:t+"/playlists/"+u+"/followers",type:"DELETE"};return f(p,c)},d.prototype.isFollowingUsers=function(u,c){var p={url:t+"/me/following/contains",type:"GET",params:{ids:u.join(","),type:"user"}};return f(p,c)},d.prototype.isFollowingArtists=function(u,c){var p={url:t+"/me/following/contains",type:"GET",params:{ids:u.join(","),type:"artist"}};return f(p,c)},d.prototype.areFollowingPlaylist=function(u,c,p){var g={url:t+"/playlists/"+u+"/followers/contains",type:"GET",params:{ids:c.join(",")}};return f(g,p)},d.prototype.getFollowedArtists=function(u,c){var p={url:t+"/me/following",type:"GET",params:{type:"artist"}};return f(p,u,c)},d.prototype.getUser=function(u,c,p){var g={url:t+"/users/"+encodeURIComponent(u)};return f(g,c,p)},d.prototype.getUserPlaylists=function(u,c,p){var g;return typeof u=="string"?g={url:t+"/users/"+encodeURIComponent(u)+"/playlists"}:(g={url:t+"/me/playlists"},p=c,c=u),f(g,c,p)},d.prototype.getPlaylist=function(u,c,p){var g={url:t+"/playlists/"+u};return f(g,c,p)},d.prototype.getPlaylistTracks=function(u,c,p){var g={url:t+"/playlists/"+u+"/tracks"};return f(g,c,p)},d.prototype.getPlaylistCoverImage=function(u,c){var p={url:t+"/playlists/"+u+"/images"};return f(p,c)},d.prototype.createPlaylist=function(u,c,p){var g={url:t+"/users/"+encodeURIComponent(u)+"/playlists",type:"POST",postData:c};return f(g,c,p)},d.prototype.changePlaylistDetails=function(u,c,p){var g={url:t+"/playlists/"+u,type:"PUT",postData:c};return f(g,c,p)},d.prototype.addTracksToPlaylist=function(u,c,p,g){var y={url:t+"/playlists/"+u+"/tracks",type:"POST",postData:{uris:c}};return f(y,p,g,!0)},d.prototype.replaceTracksInPlaylist=function(u,c,p){var g={url:t+"/playlists/"+u+"/tracks",type:"PUT",postData:{uris:c}};return f(g,{},p)},d.prototype.reorderTracksInPlaylist=function(u,c,p,g,y){var k={url:t+"/playlists/"+u+"/tracks",type:"PUT",postData:{range_start:c,insert_before:p}};return f(k,g,y)},d.prototype.removeTracksFromPlaylist=function(u,c,p){var g=c.map(function(k){return typeof k=="string"?{uri:k}:k}),y={url:t+"/playlists/"+u+"/tracks",type:"DELETE",postData:{tracks:g}};return f(y,{},p)},d.prototype.removeTracksFromPlaylistWithSnapshotId=function(u,c,p,g){var y=c.map(function(b){return typeof b=="string"?{uri:b}:b}),k={url:t+"/playlists/"+u+"/tracks",type:"DELETE",postData:{tracks:y,snapshot_id:p}};return f(k,{},g)},d.prototype.removeTracksFromPlaylistInPositions=function(u,c,p,g){var y={url:t+"/playlists/"+u+"/tracks",type:"DELETE",postData:{positions:c,snapshot_id:p}};return f(y,{},g)},d.prototype.uploadCustomPlaylistCoverImage=function(u,c,p){var g={url:t+"/playlists/"+u+"/images",type:"PUT",postData:c.replace(/^data:image\/jpeg;base64,/,""),contentType:"image/jpeg"};return f(g,{},p)},d.prototype.getAlbum=function(u,c,p){var g={url:t+"/albums/"+u};return f(g,c,p)},d.prototype.getAlbumTracks=function(u,c,p){var g={url:t+"/albums/"+u+"/tracks"};return f(g,c,p)},d.prototype.getAlbums=function(u,c,p){var g={url:t+"/albums/",params:{ids:u.join(",")}};return f(g,c,p)},d.prototype.getTrack=function(u,c,p){var g={};return g.url=t+"/tracks/"+u,f(g,c,p)},d.prototype.getTracks=function(u,c,p){var g={url:t+"/tracks/",params:{ids:u.join(",")}};return f(g,c,p)},d.prototype.getArtist=function(u,c,p){var g={url:t+"/artists/"+u};return f(g,c,p)},d.prototype.getArtists=function(u,c,p){var g={url:t+"/artists/",params:{ids:u.join(",")}};return f(g,c,p)},d.prototype.getArtistAlbums=function(u,c,p){var g={url:t+"/artists/"+u+"/albums"};return f(g,c,p)},d.prototype.getArtistTopTracks=function(u,c,p,g){var y={url:t+"/artists/"+u+"/top-tracks",params:{country:c}};return f(y,p,g)},d.prototype.getArtistRelatedArtists=function(u,c,p){var g={url:t+"/artists/"+u+"/related-artists"};return f(g,c,p)},d.prototype.getFeaturedPlaylists=function(u,c){var p={url:t+"/browse/featured-playlists"};return f(p,u,c)},d.prototype.getNewReleases=function(u,c){var p={url:t+"/browse/new-releases"};return f(p,u,c)},d.prototype.getCategories=function(u,c){var p={url:t+"/browse/categories"};return f(p,u,c)},d.prototype.getCategory=function(u,c,p){var g={url:t+"/browse/categories/"+u};return f(g,c,p)},d.prototype.getCategoryPlaylists=function(u,c,p){var g={url:t+"/browse/categories/"+u+"/playlists"};return f(g,c,p)},d.prototype.search=function(u,c,p,g){var y={url:t+"/search/",params:{q:u,type:c.join(",")}};return f(y,p,g)},d.prototype.searchAlbums=function(u,c,p){return this.search(u,["album"],c,p)},d.prototype.searchArtists=function(u,c,p){return this.search(u,["artist"],c,p)},d.prototype.searchTracks=function(u,c,p){return this.search(u,["track"],c,p)},d.prototype.searchPlaylists=function(u,c,p){return this.search(u,["playlist"],c,p)},d.prototype.searchShows=function(u,c,p){return this.search(u,["show"],c,p)},d.prototype.searchEpisodes=function(u,c,p){return this.search(u,["episode"],c,p)},d.prototype.getAudioFeaturesForTrack=function(u,c){var p={};return p.url=t+"/audio-features/"+u,f(p,{},c)},d.prototype.getAudioFeaturesForTracks=function(u,c){var p={url:t+"/audio-features",params:{ids:u}};return f(p,{},c)},d.prototype.getAudioAnalysisForTrack=function(u,c){var p={};return p.url=t+"/audio-analysis/"+u,f(p,{},c)},d.prototype.getRecommendations=function(u,c){var p={url:t+"/recommendations"};return f(p,u,c)},d.prototype.getAvailableGenreSeeds=function(u){var c={url:t+"/recommendations/available-genre-seeds"};return f(c,{},u)},d.prototype.getMyDevices=function(u){var c={url:t+"/me/player/devices"};return f(c,{},u)},d.prototype.getMyCurrentPlaybackState=function(u,c){var p={url:t+"/me/player"};return f(p,u,c)},d.prototype.getMyCurrentPlayingTrack=function(u,c){var p={url:t+"/me/player/currently-playing"};return f(p,u,c)},d.prototype.transferMyPlayback=function(u,c,p){var g=c||{};g.device_ids=u;var y={type:"PUT",url:t+"/me/player",postData:g};return f(y,c,p)},d.prototype.play=function(u,c){u=u||{};var p="device_id"in u?{device_id:u.device_id}:null,g={};["context_uri","uris","offset","position_ms"].forEach(function(b){b in u&&(g[b]=u[b])});var y={type:"PUT",url:t+"/me/player/play",params:p,postData:g},k=typeof u=="function"?u:{};return f(y,k,c)},d.prototype.queue=function(u,c,p){c=c||{};var g="device_id"in c?{uri:u,device_id:c.device_id}:{uri:u},y={type:"POST",url:t+"/me/player/queue",params:g};return f(y,c,p)},d.prototype.pause=function(u,c){u=u||{};var p="device_id"in u?{device_id:u.device_id}:null,g={type:"PUT",url:t+"/me/player/pause",params:p};return f(g,u,c)},d.prototype.skipToNext=function(u,c){u=u||{};var p="device_id"in u?{device_id:u.device_id}:null,g={type:"POST",url:t+"/me/player/next",params:p};return f(g,u,c)},d.prototype.skipToPrevious=function(u,c){u=u||{};var p="device_id"in u?{device_id:u.device_id}:null,g={type:"POST",url:t+"/me/player/previous",params:p};return f(g,u,c)},d.prototype.seek=function(u,c,p){c=c||{};var g={position_ms:u};"device_id"in c&&(g.device_id=c.device_id);var y={type:"PUT",url:t+"/me/player/seek",params:g};return f(y,c,p)},d.prototype.setRepeat=function(u,c,p){c=c||{};var g={state:u};"device_id"in c&&(g.device_id=c.device_id);var y={type:"PUT",url:t+"/me/player/repeat",params:g};return f(y,c,p)},d.prototype.setVolume=function(u,c,p){c=c||{};var g={volume_percent:u};"device_id"in c&&(g.device_id=c.device_id);var y={type:"PUT",url:t+"/me/player/volume",params:g};return f(y,c,p)},d.prototype.setShuffle=function(u,c,p){c=c||{};var g={state:u};"device_id"in c&&(g.device_id=c.device_id);var y={type:"PUT",url:t+"/me/player/shuffle",params:g};return f(y,c,p)},d.prototype.getShow=function(u,c,p){var g={};return g.url=t+"/shows/"+u,f(g,c,p)},d.prototype.getShows=function(u,c,p){var g={url:t+"/shows/",params:{ids:u.join(",")}};return f(g,c,p)},d.prototype.getMySavedShows=function(u,c){var p={url:t+"/me/shows"};return f(p,u,c)},d.prototype.addToMySavedShows=function(u,c,p){var g={url:t+"/me/shows",type:"PUT",postData:u};return f(g,c,p)},d.prototype.removeFromMySavedShows=function(u,c,p){var g={url:t+"/me/shows",type:"DELETE",postData:u};return f(g,c,p)},d.prototype.containsMySavedShows=function(u,c,p){var g={url:t+"/me/shows/contains",params:{ids:u.join(",")}};return f(g,c,p)},d.prototype.getShowEpisodes=function(u,c,p){var g={url:t+"/shows/"+u+"/episodes"};return f(g,c,p)},d.prototype.getEpisode=function(u,c,p){var g={};return g.url=t+"/episodes/"+u,f(g,c,p)},d.prototype.getEpisodes=function(u,c,p){var g={url:t+"/episodes/",params:{ids:u.join(",")}};return f(g,c,p)},d.prototype.getAccessToken=function(){return r},d.prototype.setAccessToken=function(u){r=u},d.prototype.setPromiseImplementation=function(u){var c=!1;try{var p=new u(function(g){g()});typeof p.then=="function"&&typeof p.catch=="function"&&(c=!0)}catch(g){console.error(g)}if(c)s=u;else throw new Error("Unsupported implementation of Promises/A+")},d}();n.exports=e})(rn);var Bn=rn.exports;const zn=On(Bn),Xe=me(!1),ce=me(!1),Pe=me(!1),Re=me(new zn),Hn=localStorage.getItem(Zt),pe=me(Hn);pe.subscribe(n=>localStorage.setItem(Zt,n));const ke=me(null),ge=me(null),we=me(0),Vn=parseFloat(localStorage.getItem(en))||.7,Qe=me(Vn);Qe.subscribe(n=>localStorage.setItem(en,n.toString()));const Wn=localStorage.getItem(tn)||"en",oe=me(Wn);oe.subscribe(n=>localStorage.setItem(tn,n));function Kn(n){let e;return{c(){e=v("div"),_(e,"class","load-auth")},m(t,r){P(t,e,r)},p:R,i:R,o:R,d(t){t&&T(e)}}}function Jn(n,e,t){let r,s,l,o,a,i;L(n,ce,d=>t(0,r=d)),L(n,ge,d=>t(1,s=d)),L(n,Pe,d=>t(2,l=d)),L(n,pe,d=>t(3,o=d)),L(n,ke,d=>t(4,a=d)),L(n,Re,d=>t(5,i=d));async function m(d){return i.setAccessToken(d),await i.getMe().then(c=>(K(ge,s=c.display_name||c.id,s),!0)).catch(()=>!1)}async function f(){K(ce,r=!0,r),a&&o&&(await m(a)||(K(ke,a=null,a),K(ge,s=null,s))),!a&&o&&await fetch(xn+`/${o}`).then(d=>d.json()).then(d=>{d.access_token?(K(ke,a=d.access_token,a),K(pe,o=d.refresh_token||o,o)):K(pe,o=null,o)}).catch(()=>{K(pe,o=null,o)}),a&&!s&&(await m(a)||(K(pe,o=null,o),K(ge,s=null,s))),K(Pe,l=!!s,l),K(ce,r=!1,r)}return ae(f),[]}class Yn extends F{constructor(e){super(),j(this,e,Jn,Kn,x,{})}}function Xn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function gt(n){const e=n-1;return e*e*e+1}function Qn(n){return-n*(n-2)}function X(n,{delay:e=0,duration:t=400,easing:r=Ge}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:l=>`opacity: ${l*s}`}}function _e(n,{delay:e=0,duration:t=400,easing:r=gt,x:s=0,y:l=0,opacity:o=0}={}){const a=getComputedStyle(n),i=+a.opacity,m=a.transform==="none"?"":a.transform,f=i*(1-o),[d,u]=vt(s),[c,p]=vt(l);return{delay:e,duration:t,easing:r,css:(g,y)=>`
			transform: ${m} translate(${(1-g)*d}${u}, ${(1-g)*c}${p});
			opacity: ${i-f*y}`}}function Zn(n){let e,t;return{c(){e=v("script"),ee(e.src,t=er)||_(e,"src",t)},m(r,s){h(document.head,e),n[3](e)},p:R,i:R,o:R,d(r){T(e),n[3](null)}}}const er="https://sdk.scdn.co/spotify-player.js";function tr(n,e,t){let r;L(n,ke,m=>t(4,r=m));let{spotifyPlayer:s=void 0}=e,{deviceId:l=void 0}=e;const o=se();let a;window.onSpotifyWebPlaybackSDKReady=()=>{s===void 0&&(t(1,s=new window.Spotify.Player({name:"Guessify Player #"+Math.floor(Math.random()*1e6),getOAuthToken:m=>{m(r)},volume:.7})),s.addListener("ready",m=>{t(2,l=m.device_id),console.log("Ready with device id: ",l),o("ready",{})}),s.addListener("not_ready",m=>{console.log("Device id is not ready: ",m.device_id),o("notReady",{})}),s.addListener("player_state_changed",m=>{console.log("Player state has changed"),o("state",m)}),s.on("initialization_error",({message:m})=>{console.error("Initialization error"),o("error",{text:`Error at Spotify Player SDK. Does your browser support EME protection?
: `+m})}),s.on("authentication_error",({message:m})=>{console.error("Authentication error"),o("error",{text:"Failed to authenticate with Spotify: "+m})}),s.on("account_error",({message:m})=>{console.error("Account error"),o("error",{text:`Failed to validate Spotify account. Guessify only supports Spotify Premium accounts
`+m})}),s.on("playback_error",({message:m})=>{console.error("playback error"),o("error",{text:"Failed to perform playback: "+m})}),s.connect())},ae(()=>{if(window&&typeof window.onSpotifyWebPlaybackSDKReady<"u")return o("loaded",{});a.addEventListener("load",()=>{console.log("load event from script"),o("loaded",{})}),a.addEventListener("error",m=>{console.error("something went wrong",m),o("error",{text:"Error loading Spotify Player SDK"})})}),Ne(()=>{s!=null&&(console.log("Disconnecting"),s.removeListener("ready"),s.disconnect(),t(1,s=void 0))});function i(m){fe[m?"unshift":"push"](()=>{a=m,t(0,a)})}return n.$$set=m=>{"spotifyPlayer"in m&&t(1,s=m.spotifyPlayer),"deviceId"in m&&t(2,l=m.deviceId)},[a,s,l,i]}class nr extends F{constructor(e){super(),j(this,e,tr,Zn,x,{spotifyPlayer:1,deviceId:2})}}function rr(n){let e,t,r,s,l,o,a;return{c(){e=v("div"),t=v("img"),s=E(),l=v("input"),ee(t.src,r="/assets/volume.svg")||_(t,"src",r),_(t,"alt","Volume"),_(t,"class","svelte-1isfk1m"),_(l,"id","volume-slider"),_(l,"type","range"),_(l,"min","0"),_(l,"max","100"),re(l,"background-size",n[0]+"% 100%"),_(l,"class","svelte-1isfk1m"),_(e,"class","volume svelte-1isfk1m")},m(i,m){P(i,e,m),h(e,t),h(e,s),h(e,l),Me(l,n[0]),o||(a=[B(l,"change",n[1]),B(l,"input",n[1])],o=!0)},p(i,[m]){m&1&&re(l,"background-size",i[0]+"% 100%"),m&1&&Me(l,i[0])},i:R,o:R,d(i){i&&T(e),o=!1,ie(a)}}}function sr(n,e,t){let r;L(n,Qe,o=>t(2,r=o));let s=r*100;function l(){s=wn(this.value),t(0,s)}return n.$$.update=()=>{n.$$.dirty&1&&K(Qe,r=s/100,r)},[s,l]}class lr extends F{constructor(e){super(),j(this,e,sr,rr,x,{})}}function or(n){let e,t,r,s,l,o;return{c(){e=v("a"),t=v("span"),r=G(n[1]),s=E(),l=v("img"),_(t,"class","svelte-1np255t"),_(l,"class","open-in-logo svelte-1np255t"),ee(l.src,o="/assets/spotify-logo-green.png")||_(l,"src",o),_(l,"alt","Spotify logo"),_(e,"href",n[0]),_(e,"class","extern svelte-1np255t")},m(a,i){P(a,e,i),h(e,t),h(t,r),h(e,s),h(e,l)},p(a,[i]){i&2&&H(r,a[1]),i&1&&_(e,"href",a[0])},i:R,o:R,d(a){a&&T(e)}}}function ir(n,e,t){let{externUrl:r="https://open.spotify.com"}=e,{text:s="Open in"}=e;return n.$$set=l=>{"externUrl"in l&&t(0,r=l.externUrl),"text"in l&&t(1,s=l.text)},[r,s]}class sn extends F{constructor(e){super(),j(this,e,ir,or,x,{externUrl:0,text:1})}}function ar(n){let e;return{c(){e=G(n[0])},m(t,r){P(t,e,r)},p(t,[r]){r&1&&H(e,t[0])},i:R,o:R,d(t){t&&T(e)}}}function ur(n,e,t){let r;L(n,oe,o=>t(2,r=o));let{key:s}=e,l;return n.$$set=o=>{"key"in o&&t(1,s=o.key)},n.$$.update=()=>{n.$$.dirty&6&&t(0,l=Y(r,s))},[l,s,r]}class N extends F{constructor(e){super(),j(this,e,ur,ar,x,{key:1})}}function cr(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p,g;return t=new N({props:{key:"game-now-playing"}}),p=new sn({props:{externUrl:"https://open.spotify.com/",text:Y(n[4],"spotify-powered")}}),{c(){e=v("span"),M(t.$$.fragment),r=v("span"),s=G(n[0]),l=E(),o=v("div"),a=v("span"),i=G(n[2]),m=E(),f=v("div"),d=v("div"),u=E(),c=v("div"),M(p.$$.fragment),_(r,"class","content-name svelte-hnh20i"),_(e,"class","now-playing svelte-hnh20i"),_(a,"class","current-time svelte-hnh20i"),_(d,"class","progress-bar svelte-hnh20i"),re(d,"width",n[1]/n[3]*100+"%"),_(f,"class","progress-player svelte-hnh20i"),_(o,"class","progress svelte-hnh20i"),_(c,"class","powered-by svelte-hnh20i")},m(y,k){P(y,e,k),C(t,e,null),h(e,r),h(r,s),P(y,l,k),P(y,o,k),h(o,a),h(a,i),h(o,m),h(o,f),h(f,d),P(y,u,k),P(y,c,k),C(p,c,null),g=!0},p(y,[k]){(!g||k&1)&&H(s,y[0]),(!g||k&4)&&H(i,y[2]),(!g||k&10)&&re(d,"width",y[1]/y[3]*100+"%");const b={};k&16&&(b.text=Y(y[4],"spotify-powered")),p.$set(b)},i(y){g||(w(t.$$.fragment,y),w(p.$$.fragment,y),g=!0)},o(y){S(t.$$.fragment,y),S(p.$$.fragment,y),g=!1},d(y){y&&T(e),$(t),y&&T(l),y&&T(o),y&&T(u),y&&T(c),$(p)}}}function fr(n,e,t){let r,s,l,o;L(n,oe,f=>t(4,o=f));let{currentMillis:a=0}=e,{maxMillis:i=1e3}=e,{contentName:m="Daily Mix #1"}=e;return n.$$set=f=>{"currentMillis"in f&&t(5,a=f.currentMillis),"maxMillis"in f&&t(6,i=f.maxMillis),"contentName"in f&&t(0,m=f.contentName)},n.$$.update=()=>{n.$$.dirty&32&&t(1,r=a>0?a:0),n.$$.dirty&64&&t(3,s=i>0?i:1e3),n.$$.dirty&2&&t(2,l=new Date(r).toISOString().substring(14,19))},[m,r,l,s,o,a,i]}class mr extends F{constructor(e){super(),j(this,e,fr,cr,x,{currentMillis:5,maxMillis:6,contentName:0})}}function pr(n){let e,t;return{c(){e=v("img"),ee(e.src,t="/assets/play.svg")||_(e,"src",t),_(e,"alt","Play"),_(e,"class","svelte-amm3k5")},m(r,s){P(r,e,s)},d(r){r&&T(e)}}}function dr(n){let e,t;return{c(){e=v("img"),ee(e.src,t="/assets/pause.svg")||_(e,"src",t),_(e,"alt","Pause"),_(e,"class","svelte-amm3k5")},m(r,s){P(r,e,s)},d(r){r&&T(e)}}}function gr(n){let e,t,r,s,l,o;function a(f,d){return f[0]?dr:pr}let i=a(n),m=i(n);return{c(){e=v("div"),t=v("button"),t.innerHTML='<img src="/assets/skip.svg" alt="Skip" class="svelte-amm3k5"/>',r=E(),s=v("button"),m.c(),_(t,"class","svelte-amm3k5"),_(s,"class","svelte-amm3k5"),_(e,"class","buttons svelte-amm3k5")},m(f,d){P(f,e,d),h(e,t),h(e,r),h(e,s),m.m(s,null),l||(o=[B(t,"click",n[2]),B(s,"click",n[1])],l=!0)},p(f,[d]){i!==(i=a(f))&&(m.d(1),m=i(f),m&&(m.c(),m.m(s,null)))},i:R,o:R,d(f){f&&T(e),m.d(),l=!1,ie(o)}}}function _r(n,e,t){let r;L(n,Xe,a=>t(0,r=a));let s=se();function l(){s("toggle")}function o(){s("skip")}return[r,l,o]}class yr extends F{constructor(e){super(),j(this,e,_r,gr,x,{})}}function hr(n){let e,t,r,s,l,o,a;return t=new yr({}),t.$on("toggle",n[3]),t.$on("skip",n[4]),s=new mr({props:{currentMillis:n[1],maxMillis:n[0],contentName:n[2]}}),o=new lr({}),{c(){e=v("div"),M(t.$$.fragment),r=E(),M(s.$$.fragment),l=E(),M(o.$$.fragment),_(e,"class","audio-interface svelte-1hpnpev")},m(i,m){P(i,e,m),C(t,e,null),h(e,r),C(s,e,null),h(e,l),C(o,e,null),a=!0},p(i,[m]){const f={};m&2&&(f.currentMillis=i[1]),m&1&&(f.maxMillis=i[0]),m&4&&(f.contentName=i[2]),s.$set(f)},i(i){a||(w(t.$$.fragment,i),w(s.$$.fragment,i),w(o.$$.fragment,i),a=!0)},o(i){S(t.$$.fragment,i),S(s.$$.fragment,i),S(o.$$.fragment,i),a=!1},d(i){i&&T(e),$(t),$(s),$(o)}}}function vr(n,e,t){let{maxMillis:r}=e,{currentMillis:s}=e,{contentName:l}=e;function o(i){te.call(this,n,i)}function a(i){te.call(this,n,i)}return n.$$set=i=>{"maxMillis"in i&&t(0,r=i.maxMillis),"currentMillis"in i&&t(1,s=i.currentMillis),"contentName"in i&&t(2,l=i.contentName)},[r,s,l,o,a]}class br extends F{constructor(e){super(),j(this,e,vr,hr,x,{maxMillis:0,currentMillis:1,contentName:2})}}function kr(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p;return f=new N({props:{key:"game-guess"}}),{c(){e=v("div"),t=v("div"),r=v("img"),l=E(),o=v("input"),i=E(),m=v("button"),M(f.$$.fragment),ee(r.src,s="/assets/search.svg")||_(r,"src",s),_(r,"alt","Search"),_(r,"class","svelte-1ggu2sj"),_(o,"type","text"),_(o,"placeholder",a=Y(n[3],"game-listening")),_(o,"class","svelte-1ggu2sj"),_(t,"class","search svelte-1ggu2sj"),m.disabled=d=!n[1],_(m,"class","svelte-1ggu2sj"),_(e,"class","search-bar svelte-1ggu2sj")},m(g,y){P(g,e,y),h(e,t),h(t,r),h(t,l),h(t,o),Me(o,n[0]),n[6](o),h(e,i),h(e,m),C(f,m,null),u=!0,c||(p=[B(o,"input",n[5]),B(m,"click",n[4])],c=!0)},p(g,[y]){(!u||y&8&&a!==(a=Y(g[3],"game-listening")))&&_(o,"placeholder",a),y&1&&o.value!==g[0]&&Me(o,g[0]),(!u||y&2&&d!==(d=!g[1]))&&(m.disabled=d)},i(g){u||(w(f.$$.fragment,g),u=!0)},o(g){S(f.$$.fragment,g),u=!1},d(g){g&&T(e),n[6](null),$(f),c=!1,ie(p)}}}function wr(n,e,t){let r;L(n,oe,f=>t(3,r=f));let{searchedText:s=""}=e,{enableSubmit:l=!1}=e,o;ae(()=>{o.focus(),o.addEventListener("keydown",f=>{(f.key=="ArrowDown"||f.key=="ArrowUp")&&f.preventDefault()})});function a(f){te.call(this,n,f)}function i(){s=this.value,t(0,s)}function m(f){fe[f?"unshift":"push"](()=>{o=f,t(2,o)})}return n.$$set=f=>{"searchedText"in f&&t(0,s=f.searchedText),"enableSubmit"in f&&t(1,l=f.enableSubmit)},[s,l,o,r,a,i,m]}class Sr extends F{constructor(e){super(),j(this,e,wr,kr,x,{searchedText:0,enableSubmit:1})}}function Tr(n){let e;return{c(){e=v("div"),_(e,"class","fade-left svelte-1i6l6cz")},m(t,r){P(t,e,r)},i:R,o:R,d(t){t&&T(e)}}}function Dr(n){let e,t,r,s,l,o,a,i;return t=new N({props:{key:"game-click-again"}}),o=new N({props:{key:"game-click-again2"}}),{c(){e=v("div"),M(t.$$.fragment),r=E(),s=v("br"),l=E(),M(o.$$.fragment),_(e,"class","click-again svelte-1i6l6cz")},m(m,f){P(m,e,f),C(t,e,null),h(e,r),h(e,s),h(e,l),C(o,e,null),i=!0},i(m){i||(w(t.$$.fragment,m),w(o.$$.fragment,m),a||J(()=>{a=ne(e,X,{duration:200}),a.start()}),i=!0)},o(m){S(t.$$.fragment,m),S(o.$$.fragment,m),i=!1},d(m){m&&T(e),$(t),$(o)}}}function Pr(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p,g,y;const k=[Dr,Tr],b=[];function A(q,D){return q[0]?0:1}return f=A(n),d=b[f]=k[f](n),{c(){e=v("div"),t=v("img"),s=E(),l=v("div"),o=v("div"),o.textContent=`${n[1]}`,a=E(),i=v("div"),i.textContent=`${n[2]}`,m=E(),d.c(),_(t,"class","track-image svelte-1i6l6cz"),ee(t.src,r=n[4])||_(t,"src",r),_(t,"alt",n[3]),_(o,"class","track-name svelte-1i6l6cz"),_(i,"class","track-artists svelte-1i6l6cz"),_(l,"class","track-text svelte-1i6l6cz"),_(e,"class","result svelte-1i6l6cz"),ye(e,"selected",n[0])},m(q,D){P(q,e,D),h(e,t),h(e,s),h(e,l),h(l,o),h(l,a),h(l,i),h(e,m),b[f].m(e,null),p=!0,g||(y=B(e,"click",n[6]),g=!0)},p(q,[D]){let I=f;f=A(q),f!==I&&(V(),S(b[I],1,1,()=>{b[I]=null}),W(),d=b[f],d||(d=b[f]=k[f](q),d.c()),w(d,1),d.m(e,null)),(!p||D&1)&&ye(e,"selected",q[0])},i(q){p||(w(d),q&&J(()=>{p&&(c&&c.end(1),u=ne(e,_e,{y:30,duration:300}),u.start())}),p=!0)},o(q){S(d),u&&u.invalidate(),q&&(c=he(e,X,{duration:100})),p=!1},d(q){q&&T(e),b[f].d(),q&&c&&c.end(),g=!1,y()}}}function Ir(n,e,t){let{content:r}=e,{selected:s}=e;const l=r.name,o=r.artists.map(f=>f.name).join(", "),a=r.album.name,i=r.album.images[0].url;function m(f){te.call(this,n,f)}return n.$$set=f=>{"content"in f&&t(5,r=f.content),"selected"in f&&t(0,s=f.selected)},[s,l,o,a,i,r,m]}class qr extends F{constructor(e){super(),j(this,e,Ir,Pr,x,{content:5,selected:0})}}function bt(n,e,t){const r=n.slice();return r[14]=e[t],r[16]=t,r}function kt(n){let e,t,r,s,l;function o(){return n[6](n[16])}return t=new qr({props:{content:n[14],selected:n[16]===n[0]}}),t.$on("click",o),{c(){e=v("div"),M(t.$$.fragment),r=E(),_(e,"class","wrapper-result svelte-xxk6h4"),_(e,"id",s="result-"+n[16])},m(a,i){P(a,e,i),C(t,e,null),h(e,r),l=!0},p(a,i){n=a;const m={};i&2&&(m.content=n[14]),i&3&&(m.selected=n[16]===n[0]),t.$set(m),(!l||i&2&&s!==(s="result-"+n[16]))&&_(e,"id",s)},i(a){l||(w(t.$$.fragment,a),l=!0)},o(a){S(t.$$.fragment,a),l=!1},d(a){a&&T(e),$(t)}}}function wt(n,e){let t,r,s,l=e[2][e[16]]&&kt(e);return{key:n,first:null,c(){t=ue(),l&&l.c(),r=ue(),this.first=t},m(o,a){P(o,t,a),l&&l.m(o,a),P(o,r,a),s=!0},p(o,a){e=o,e[2][e[16]]?l?(l.p(e,a),a&6&&w(l,1)):(l=kt(e),l.c(),w(l,1),l.m(r.parentNode,r)):l&&(V(),S(l,1,1,()=>{l=null}),W())},i(o){s||(w(l),s=!0)},o(o){S(l),s=!1},d(o){o&&T(t),l&&l.d(o),o&&T(r)}}}function Er(n){let e,t,r,s,l,o=[],a=new Map,i,m,f;r=new N({props:{key:"game-double-click"}});let d=n[1];const u=c=>c[14].uri;for(let c=0;c<d.length;c+=1){let p=bt(n,d,c),g=u(p);a.set(g,o[c]=wt(g,p))}return{c(){e=v("div"),t=v("span"),M(r.$$.fragment),s=E(),l=v("div");for(let c=0;c<o.length;c+=1)o[c].c();_(t,"class","help svelte-xxk6h4"),_(l,"class","results svelte-xxk6h4"),_(e,"class","wrapper svelte-xxk6h4")},m(c,p){P(c,e,p),h(e,t),C(r,t,null),h(e,s),h(e,l);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(l,null);i=!0,m||(f=B(window,"keydown",n[4]),m=!0)},p(c,[p]){p&15&&(d=c[1],V(),o=Xt(o,p,u,1,c,d,a,l,Yt,wt,null,bt),W())},i(c){if(!i){w(r.$$.fragment,c);for(let p=0;p<d.length;p+=1)w(o[p]);i=!0}},o(c){S(r.$$.fragment,c);for(let p=0;p<o.length;p+=1)S(o[p]);i=!1},d(c){c&&T(e),$(r);for(let p=0;p<o.length;p+=1)o[p].d();m=!1,f()}}}function Ar(n,e,t){let{searchedText:r}=e,{fullContent:s=[]}=e,{selectedIndex:l=0}=e,o=0,a=se();const i=s.map(k=>k.name.toLowerCase()+" "+k.artists.map(b=>b.name.toLowerCase()).join(" ")+" "+k.album.name.toLowerCase());let m=[],f=[];function d(){t(2,m=i.map(k=>k.includes(r.toLowerCase()))),f=m.reduce((k,b,A)=>b?[...k,A]:k,[]),f.length===0?(t(0,l=-1),o=-1):(o=0,t(0,l=f[0]))}function u(){l===-1&&f.length>0?(o=0,t(0,l=0)):o<f.length-1&&(o=o+1,t(0,l=f[o]))}function c(){o>0&&(o=o-1,t(0,l=f[o]))}function p(k){l===k&&a("submit",{}),t(0,l=k),o=f.indexOf(k)}function g(k){k.key==="ArrowDown"?(k.preventDefault(),u()):k.key==="ArrowUp"&&(k.preventDefault(),c()),k.key==="Enter"&&l!=-1&&a("submit",{})}const y=k=>{p(k)};return n.$$set=k=>{"searchedText"in k&&t(5,r=k.searchedText),"fullContent"in k&&t(1,s=k.fullContent),"selectedIndex"in k&&t(0,l=k.selectedIndex)},n.$$.update=()=>{if(n.$$.dirty&32&&d(),n.$$.dirty&1&&l>-1){console.log(l);let k=document.getElementById("result-"+l);k&&k.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},[l,s,m,p,g,r,y]}class Cr extends F{constructor(e){super(),j(this,e,Ar,Er,x,{searchedText:5,fullContent:1,selectedIndex:0})}}function $r(n){let e,t,r,s,l,o,a,i,m,f;t=new br({props:{contentName:n[1].content.name,currentMillis:n[0].playedMs,maxMillis:n[0].musicInfo.duration_ms}}),t.$on("toggle",n[7]),t.$on("skip",n[8]);function d(g){n[9](g)}let u={enableSubmit:n[5]};n[2]!==void 0&&(u.searchedText=n[2]),s=new Sr({props:u}),fe.push(()=>De(s,"searchedText",d)),s.$on("click",function(){Se(n[4])&&n[4].apply(this,arguments)});function c(g){n[10](g)}let p={fullContent:n[1].content.tracks,searchedText:n[2]};return n[3]!==void 0&&(p.selectedIndex=n[3]),a=new Cr({props:p}),fe.push(()=>De(a,"selectedIndex",c)),a.$on("submit",function(){Se(n[4])&&n[4].apply(this,arguments)}),a.$on("giveUp",n[6]),{c(){e=v("div"),M(t.$$.fragment),r=E(),M(s.$$.fragment),o=E(),M(a.$$.fragment),_(e,"class","play-screen svelte-1w1hvkz")},m(g,y){P(g,e,y),C(t,e,null),h(e,r),C(s,e,null),h(e,o),C(a,e,null),f=!0},p(g,[y]){n=g;const k={};y&2&&(k.contentName=n[1].content.name),y&1&&(k.currentMillis=n[0].playedMs),y&1&&(k.maxMillis=n[0].musicInfo.duration_ms),t.$set(k);const b={};y&32&&(b.enableSubmit=n[5]),!l&&y&4&&(l=!0,b.searchedText=n[2],Te(()=>l=!1)),s.$set(b);const A={};y&2&&(A.fullContent=n[1].content.tracks),y&4&&(A.searchedText=n[2]),!i&&y&8&&(i=!0,A.selectedIndex=n[3],Te(()=>i=!1)),a.$set(A)},i(g){f||(w(t.$$.fragment,g),w(s.$$.fragment,g),w(a.$$.fragment,g),m||J(()=>{m=ne(e,X,{duration:200}),m.start()}),f=!0)},o(g){S(t.$$.fragment,g),S(s.$$.fragment,g),S(a.$$.fragment,g),f=!1},d(g){g&&T(e),$(t),$(s),$(a)}}}function Mr(n,e,t){let r,s,l=se(),{currentInfo:o}=e,{gameInfo:a}=e,i="",m=-1;ae(()=>{t(2,i=""),t(3,m=-1)});const f=()=>{l("giveup",{})};function d(g){te.call(this,n,g)}function u(g){te.call(this,n,g)}function c(g){i=g,t(2,i)}function p(g){m=g,t(3,m)}return n.$$set=g=>{"currentInfo"in g&&t(0,o=g.currentInfo),"gameInfo"in g&&t(1,a=g.gameInfo)},n.$$.update=()=>{n.$$.dirty&3&&o.roundMs>0&&o.musicInfo.duration_ms>0&&t(0,o.roundScore=Fn(o.roundMs,o.musicInfo.duration_ms,a.maxRounds),o),n.$$.dirty&8&&t(5,r=m!=-1),n.$$.dirty&12&&t(4,s=()=>{l("submit",{text:i,index:m})})},[o,a,i,m,s,r,f,d,u,c,p]}class Rr extends F{constructor(e){super(),j(this,e,Mr,$r,x,{currentInfo:0,gameInfo:1})}}function St(n){let e,t,r,s,l,o,a;const i=[Lr,Ur],m=[];function f(d,u){return d[2]?1:0}return t=f(n),r=m[t]=i[t](n),{c(){e=v("button"),r.c(),_(e,"class","svelte-cf5vyx")},m(d,u){P(d,e,u),m[t].m(e,null),l=!0,o||(a=B(e,"click",n[4]),o=!0)},p(d,u){r.p(d,u)},i(d){l||(w(r),s||J(()=>{s=ne(e,X,{duration:500}),s.start()}),l=!0)},o(d){S(r),l=!1},d(d){d&&T(e),m[t].d(),o=!1,a()}}}function Ur(n){let e,t,r;return t=new N({props:{key:"game-endresults"}}),{c(){e=v("span"),M(t.$$.fragment),_(e,"class","big svelte-cf5vyx")},m(s,l){P(s,e,l),C(t,e,null),r=!0},p:R,i(s){r||(w(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&T(e),$(t)}}}function Lr(n){let e,t,r,s,l,o,a,i,m,f=n[0]>1?"s":"",d,u,c,p;return t=new N({props:{key:"game-next"}}),l=new N({props:{key:"game-prenext"}}),m=new N({props:{key:"game-round"}}),c=new N({props:{key:"game-posnext"}}),{c(){e=v("span"),M(t.$$.fragment),r=E(),s=v("span"),M(l.$$.fragment),o=E(),a=G(n[0]),i=E(),M(m.$$.fragment),d=G(f),u=E(),M(c.$$.fragment),_(e,"class","big svelte-cf5vyx"),_(s,"class","small svelte-cf5vyx")},m(g,y){P(g,e,y),C(t,e,null),P(g,r,y),P(g,s,y),C(l,s,null),h(s,o),h(s,a),h(s,i),C(m,s,null),h(s,d),h(s,u),C(c,s,null),p=!0},p(g,y){(!p||y&1)&&H(a,g[0]),(!p||y&1)&&f!==(f=g[0]>1?"s":"")&&H(d,f)},i(g){p||(w(t.$$.fragment,g),w(l.$$.fragment,g),w(m.$$.fragment,g),w(c.$$.fragment,g),p=!0)},o(g){S(t.$$.fragment,g),S(l.$$.fragment,g),S(m.$$.fragment,g),S(c.$$.fragment,g),p=!1},d(g){g&&T(e),$(t),g&&T(r),g&&T(s),$(l),$(m),$(c)}}}function xr(n){let e,t,r,s,l=n[1]&&St(n);return{c(){l&&l.c(),e=ue()},m(o,a){l&&l.m(o,a),P(o,e,a),t=!0,r||(s=B(window,"keydown",n[3]),r=!0)},p(o,[a]){o[1]?l?(l.p(o,a),a&2&&w(l,1)):(l=St(o),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(V(),S(l,1,1,()=>{l=null}),W())},i(o){t||(w(l),t=!0)},o(o){S(l),t=!1},d(o){l&&l.d(o),o&&T(e),r=!1,s()}}}function jr(n,e,t){let{roundsToGo:r=5}=e;const s=r===0;let l=se(),o=!1;function a(m){m.key=="Enter"&&o&&l("click")}ae(()=>{t(1,o=!1),setTimeout(()=>{t(1,o=!0)},1e3)});function i(m){te.call(this,n,m)}return n.$$set=m=>{"roundsToGo"in m&&t(0,r=m.roundsToGo)},[r,o,s,a,i]}class Fr extends F{constructor(e){super(),j(this,e,jr,xr,x,{roundsToGo:0})}}function Gr(n){let e,t,r;return t=new N({props:{key:"game-you-guessed"}}),{c(){e=v("span"),M(t.$$.fragment),_(e,"class","pretext svelte-xlsf24")},m(s,l){P(s,e,l),C(t,e,null),r=!0},i(s){r||(w(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&T(e),$(t)}}}function Nr(n){let e,t,r;return t=new N({props:{key:"game-correct-track"}}),{c(){e=v("span"),M(t.$$.fragment),_(e,"class","pretext svelte-xlsf24")},m(s,l){P(s,e,l),C(t,e,null),r=!0},i(s){r||(w(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&T(e),$(t)}}}function Or(n){let e,t,r,s,l,o,a,i,m,f,d,u,c;const p=[Nr,Gr],g=[];function y(k,b){return k[0]?1:0}return t=y(n),r=g[t]=p[t](n),{c(){e=v("div"),r.c(),s=E(),l=v("div"),o=v("img"),i=E(),m=v("div"),f=v("span"),f.textContent=`${n[1]}`,d=E(),u=v("span"),u.textContent=`${n[2]}`,ee(o.src,a=n[3])||_(o,"src",a),_(o,"alt","Cover"),_(o,"class","svelte-xlsf24"),_(f,"class","name svelte-xlsf24"),_(u,"class","artists svelte-xlsf24"),_(m,"class","texts svelte-xlsf24"),_(l,"class","wrapper svelte-xlsf24"),_(e,"class","music-info svelte-xlsf24")},m(k,b){P(k,e,b),g[t].m(e,null),h(e,s),h(e,l),h(l,o),h(l,i),h(l,m),h(m,f),h(m,d),h(m,u),c=!0},p(k,[b]){let A=t;t=y(k),t!==A&&(V(),S(g[A],1,1,()=>{g[A]=null}),W(),r=g[t],r||(r=g[t]=p[t](k),r.c()),w(r,1),r.m(e,s))},i(k){c||(w(r),c=!0)},o(k){S(r),c=!1},d(k){k&&T(e),g[t].d()}}}function Br(n,e,t){let{info:r}=e,{success:s=!1}=e;const l=r.name,o=r.artists.map(i=>i.name).join(", "),a=r.album.images[0].url;return n.$$set=i=>{"info"in i&&t(4,r=i.info),"success"in i&&t(0,s=i.success)},[s,l,o,a,r]}class zr extends F{constructor(e){super(),j(this,e,Br,Or,x,{info:4,success:0})}}function Hr(n){let e;return{c(){e=v("span"),e.innerHTML='<img src="/assets/spin.svg" alt="" class="svelte-1ngs25l"/>',_(e,"class","loading-icon svelte-1ngs25l")},m(t,r){P(t,e,r)},p:R,i:R,o:R,d(t){t&&T(e)}}}function Vr(n){let e,t,r,s,l,o,a,i,m,f,d,u;const c=[Kr,Wr],p=[];function g(y,k){return y[2].success?0:1}return r=g(n),s=p[r]=c[r](n),o=new zr({props:{info:n[1].musicInfo,success:n[2].success}}),i=new Fr({props:{roundsToGo:n[0].maxRounds-n[1].round}}),i.$on("click",n[5]),{c(){e=v("div"),t=v("div"),s.c(),l=E(),M(o.$$.fragment),a=E(),M(i.$$.fragment),_(t,"class","main-text svelte-1ngs25l"),_(e,"class","ready-screen svelte-1ngs25l")},m(y,k){P(y,e,k),h(e,t),p[r].m(t,null),h(e,l),C(o,e,null),h(e,a),C(i,e,null),f=!0,d||(u=B(e,"outroend",n[6]),d=!0)},p(y,k){let b=r;r=g(y),r===b?p[r].p(y,k):(V(),S(p[b],1,1,()=>{p[b]=null}),W(),s=p[r],s?s.p(y,k):(s=p[r]=c[r](y),s.c()),w(s,1),s.m(t,null));const A={};k&2&&(A.info=y[1].musicInfo),k&4&&(A.success=y[2].success),o.$set(A);const q={};k&3&&(q.roundsToGo=y[0].maxRounds-y[1].round),i.$set(q)},i(y){f||(w(s),w(o.$$.fragment,y),w(i.$$.fragment,y),J(()=>{f&&(m||(m=ve(e,X,{duration:500},!0)),m.run(1))}),f=!0)},o(y){S(s),S(o.$$.fragment,y),S(i.$$.fragment,y),m||(m=ve(e,X,{duration:500},!1)),m.run(0),f=!1},d(y){y&&T(e),p[r].d(),$(o),$(i),y&&m&&m.end(),d=!1,u()}}}function Wr(n){let e,t,r,s,l,o,a,i,m,f;return o=new N({props:{key:"game-wrong"}}),m=new N({props:{key:"game-try-again"}}),{c(){e=v("img"),r=E(),s=v("div"),l=v("span"),M(o.$$.fragment),a=E(),i=v("span"),M(m.$$.fragment),_(e,"class","text-icon svelte-1ngs25l"),ee(e.src,t="/assets/wrong.svg")||_(e,"src",t),_(e,"alt","Incorrect"),_(l,"class","title svelte-1ngs25l"),_(i,"class","description svelte-1ngs25l"),_(s,"class","texts wrong svelte-1ngs25l")},m(d,u){P(d,e,u),P(d,r,u),P(d,s,u),h(s,l),C(o,l,null),h(s,a),h(s,i),C(m,i,null),f=!0},p:R,i(d){f||(w(o.$$.fragment,d),w(m.$$.fragment,d),f=!0)},o(d){S(o.$$.fragment,d),S(m.$$.fragment,d),f=!1},d(d){d&&T(e),d&&T(r),d&&T(s),$(o),$(m)}}}function Kr(n){let e,t,r,s,l,o,a,i,m,f,d=n[1].roundScore.toFixed(0)+"",u,c,p,g,y;return o=new N({props:{key:"game-correct"}}),m=new N({props:{key:"game-you-got"}}),p=new N({props:{key:"game-points"}}),{c(){e=v("img"),r=E(),s=v("div"),l=v("span"),M(o.$$.fragment),a=E(),i=v("span"),M(m.$$.fragment),f=E(),u=G(d),c=E(),M(p.$$.fragment),g=G("!"),_(e,"class","text-icon svelte-1ngs25l"),ee(e.src,t="/assets/correct.svg")||_(e,"src",t),_(e,"alt","Correct"),_(l,"class","title svelte-1ngs25l"),_(i,"class","description svelte-1ngs25l"),_(s,"class","texts correct svelte-1ngs25l")},m(k,b){P(k,e,b),P(k,r,b),P(k,s,b),h(s,l),C(o,l,null),h(s,a),h(s,i),C(m,i,null),h(i,f),h(i,u),h(i,c),C(p,i,null),h(i,g),y=!0},p(k,b){(!y||b&2)&&d!==(d=k[1].roundScore.toFixed(0)+"")&&H(u,d)},i(k){y||(w(o.$$.fragment,k),w(m.$$.fragment,k),w(p.$$.fragment,k),y=!0)},o(k){S(o.$$.fragment,k),S(m.$$.fragment,k),S(p.$$.fragment,k),y=!1},d(k){k&&T(e),k&&T(r),k&&T(s),$(o),$(m),$(p)}}}function Jr(n){let e,t,r,s;const l=[Vr,Hr],o=[];function a(i,m){return i[3]?0:i[4]?1:-1}return~(e=a(n))&&(t=o[e]=l[e](n)),{c(){t&&t.c(),r=ue()},m(i,m){~e&&o[e].m(i,m),P(i,r,m),s=!0},p(i,[m]){let f=e;e=a(i),e===f?~e&&o[e].p(i,m):(t&&(V(),S(o[f],1,1,()=>{o[f]=null}),W()),~e?(t=o[e],t?t.p(i,m):(t=o[e]=l[e](i),t.c()),w(t,1),t.m(r.parentNode,r)):t=null)},i(i){s||(w(t),s=!0)},o(i){S(t),s=!1},d(i){~e&&o[e].d(i),i&&T(r)}}}function Yr(n,e,t){let{gameInfo:r}=e,{currentInfo:s}=e,{endInfo:l}=e,o=se(),a=!0,i=!1,m;function f(){t(3,a=!1)}function d(){o("click",{}),m=setInterval(()=>{t(4,i=!0)},1500)}return ae(()=>{t(3,a=!0),t(4,i=!1)}),Ne(()=>{t(4,i=!1),clearInterval(m)}),n.$$set=u=>{"gameInfo"in u&&t(0,r=u.gameInfo),"currentInfo"in u&&t(1,s=u.currentInfo),"endInfo"in u&&t(2,l=u.endInfo)},[r,s,l,a,i,f,d]}class Xr extends F{constructor(e){super(),j(this,e,Yr,Jr,x,{gameInfo:0,currentInfo:1,endInfo:2})}}function Qr(n){let e;return{c(){e=v("div"),_(e,"class","image image-not-found svelte-1k5mfbi")},m(t,r){P(t,e,r)},p:R,d(t){t&&T(e)}}}function Zr(n){let e,t;return{c(){e=v("img"),_(e,"class","image svelte-1k5mfbi"),ee(e.src,t=n[0])||_(e,"src",t),_(e,"alt",n[1])},m(r,s){P(r,e,s)},p(r,s){s&1&&!ee(e.src,t=r[0])&&_(e,"src",t),s&2&&_(e,"alt",r[1])},d(r){r&&T(e)}}}function Tt(n){let e;return{c(){e=G("s")},m(t,r){P(t,e,r)},d(t){t&&T(e)}}}function es(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p,g,y;function k(D,I){return D[0]!==null?Zr:Qr}let b=k(n),A=b(n);f=new N({props:{key:"contentbox-track"}});let q=n[2]!=1&&Tt();return c=new sn({props:{externUrl:n[3],text:Y(n[6],"spotify-powered")}}),{c(){e=v("div"),A.c(),t=E(),r=v("div"),s=v("span"),l=G(n[1]),o=E(),a=v("span"),i=G(n[2]),m=E(),M(f.$$.fragment),q&&q.c(),d=E(),u=v("div"),M(c.$$.fragment),_(s,"class","name svelte-1k5mfbi"),_(a,"class","total svelte-1k5mfbi"),_(r,"class","texts svelte-1k5mfbi"),_(u,"class","powered-by svelte-1k5mfbi"),_(e,"class","content-box svelte-1k5mfbi"),ye(e,"selected",n[4]),ye(e,"expand",n[5])},m(D,I){P(D,e,I),A.m(e,null),h(e,t),h(e,r),h(r,s),h(s,l),h(r,o),h(r,a),h(a,i),h(a,m),C(f,a,null),q&&q.m(a,null),h(e,d),h(e,u),C(c,u,null),p=!0,g||(y=B(e,"click",n[8]),g=!0)},p(D,[I]){b===(b=k(D))&&A?A.p(D,I):(A.d(1),A=b(D),A&&(A.c(),A.m(e,t))),(!p||I&2)&&H(l,D[1]),(!p||I&4)&&H(i,D[2]),D[2]!=1?q||(q=Tt(),q.c(),q.m(a,null)):q&&(q.d(1),q=null);const U={};I&8&&(U.externUrl=D[3]),I&64&&(U.text=Y(D[6],"spotify-powered")),c.$set(U),(!p||I&16)&&ye(e,"selected",D[4]),(!p||I&32)&&ye(e,"expand",D[5])},i(D){p||(w(f.$$.fragment,D),w(c.$$.fragment,D),p=!0)},o(D){S(f.$$.fragment,D),S(c.$$.fragment,D),p=!1},d(D){D&&T(e),A.d(),$(f),q&&q.d(),$(c),g=!1,y()}}}function ts(n,e,t){let r;L(n,oe,u=>t(6,r=u));let{image:s}=e,{name:l}=e,{total:o}=e,{externUrl:a}=e,{isSelected:i=!1}=e;const m=!1;let{expand:f=!1}=e;function d(u){te.call(this,n,u)}return n.$$set=u=>{"image"in u&&t(0,s=u.image),"name"in u&&t(1,l=u.name),"total"in u&&t(2,o=u.total),"externUrl"in u&&t(3,a=u.externUrl),"isSelected"in u&&t(4,i=u.isSelected),"expand"in u&&t(5,f=u.expand)},[s,l,o,a,i,f,r,m,d]}class _t extends F{constructor(e){super(),j(this,e,ts,es,x,{image:0,name:1,total:2,externUrl:3,isSelected:4,isUnique:7,expand:5})}get isUnique(){return this.$$.ctx[7]}}function Dt(n){return Object.prototype.toString.call(n)==="[object Date]"}function it(n,e){if(n===e||n!==n)return()=>n;const t=typeof n;if(t!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const r=e.map((s,l)=>it(n[l],s));return s=>r.map(l=>l(s))}if(t==="object"){if(!n||!e)throw new Error("Object cannot be null");if(Dt(n)&&Dt(e)){n=n.getTime(),e=e.getTime();const l=e-n;return o=>new Date(n+o*l)}const r=Object.keys(e),s={};return r.forEach(l=>{s[l]=it(n[l],e[l])}),l=>{const o={};return r.forEach(a=>{o[a]=s[a](l)}),o}}if(t==="number"){const r=e-n;return s=>n+s*r}throw new Error(`Cannot interpolate ${t} values`)}function Ze(n,e={}){const t=me(n);let r,s=n;function l(o,a){if(n==null)return t.set(n=o),Promise.resolve();s=o;let i=r,m=!1,{delay:f=0,duration:d=400,easing:u=Ge,interpolate:c=it}=xe(xe({},e),a);if(d===0)return i&&(i.abort(),i=null),t.set(n=s),Promise.resolve();const p=et()+f;let g;return r=tt(y=>{if(y<p)return!0;m||(g=c(n,o),typeof d=="function"&&(d=d(n,o)),m=!0),i&&(i.abort(),i=null);const k=y-p;return k>d?(t.set(n=o),!1):(t.set(n=g(u(k/d))),!0)}),r.promise}return{set:l,update:(o,a)=>l(o(s,n),a),subscribe:t.subscribe}}function ns(n){let e,t,r;return{c(){e=v("img"),ee(e.src,t="/assets/spin.svg")||_(e,"src",t),_(e,"alt","Starting"),_(e,"class","after-start svelte-1g2syvn")},m(s,l){P(s,e,l)},p:R,i(s){r||J(()=>{r=ne(e,X,{duration:100}),r.start()})},o:R,d(s){s&&T(e)}}}function rs(n){let e,t,r,s,l,o,a,i,m;const f=[ls,ss],d=[];function u(p,g){return p[0].done?1:0}t=u(n),r=d[t]=f[t](n);let c=!n[0].done&&It(n);return{c(){e=v("button"),r.c(),l=E(),c&&c.c(),o=ue(),_(e,"class","btn-start svelte-1g2syvn"),e.disabled=s=!n[0].done},m(p,g){P(p,e,g),d[t].m(e,null),P(p,l,g),c&&c.m(p,g),P(p,o,g),a=!0,i||(m=B(e,"click",n[7]),i=!0)},p(p,g){let y=t;t=u(p),t===y?d[t].p(p,g):(V(),S(d[y],1,1,()=>{d[y]=null}),W(),r=d[t],r?r.p(p,g):(r=d[t]=f[t](p),r.c()),w(r,1),r.m(e,null)),(!a||g&1&&s!==(s=!p[0].done))&&(e.disabled=s),p[0].done?c&&(c.d(1),c=null):c?c.p(p,g):(c=It(p),c.c(),c.m(o.parentNode,o))},i(p){a||(w(r),a=!0)},o(p){S(r),a=!1},d(p){p&&T(e),d[t].d(),p&&T(l),c&&c.d(p),p&&T(o),i=!1,m()}}}function ss(n){let e,t,r=n[1]&&Pt();return{c(){e=v("div"),r&&r.c(),_(e,"class","ready svelte-1g2syvn"),re(e,"height","calc("+n[4]+" * var(--max-height))")},m(s,l){P(s,e,l),r&&r.m(e,null),t=!0},p(s,l){s[1]?r?l&2&&w(r,1):(r=Pt(),r.c(),w(r,1),r.m(e,null)):r&&(V(),S(r,1,1,()=>{r=null}),W()),(!t||l&16)&&re(e,"height","calc("+s[4]+" * var(--max-height))")},i(s){t||(w(r),t=!0)},o(s){S(r),t=!1},d(s){s&&T(e),r&&r.d()}}}function ls(n){let e,t,r;return{c(){e=v("div"),t=v("div"),_(t,"class","loading-progress svelte-1g2syvn"),re(t,"width",n[3]*100+"%"),_(e,"class","loading-wrapper svelte-1g2syvn")},m(s,l){P(s,e,l),h(e,t)},p(s,l){l&8&&re(t,"width",s[3]*100+"%")},i(s){r||J(()=>{r=ne(t,X,{}),r.start()})},o:R,d(s){s&&T(e)}}}function Pt(n){let e,t,r,s;return t=new N({props:{key:"start-start"}}),{c(){e=v("div"),M(t.$$.fragment),_(e,"class","text")},m(l,o){P(l,e,o),C(t,e,null),s=!0},i(l){s||(w(t.$$.fragment,l),r||J(()=>{r=ne(e,X,{}),r.start()}),s=!0)},o(l){S(t.$$.fragment,l),s=!1},d(l){l&&T(e),$(t)}}}function It(n){let e,t,r=n[0].text+"",s,l,o,a=Math.floor(n[0].progress*100)+"",i,m;return{c(){e=v("div"),t=v("span"),s=G(r),l=E(),o=v("span"),i=G(a),m=G("%"),_(t,"class","loading-text"),_(o,"class","loading-text"),_(e,"class","loading-texts svelte-1g2syvn")},m(f,d){P(f,e,d),h(e,t),h(t,s),h(e,l),h(e,o),h(o,i),h(o,m)},p(f,d){d&1&&r!==(r=f[0].text+"")&&H(s,r),d&1&&a!==(a=Math.floor(f[0].progress*100)+"")&&H(i,a)},d(f){f&&T(e)}}}function os(n){let e,t,r,s;const l=[rs,ns],o=[];function a(i,m){return i[2]?1:0}return t=a(n),r=o[t]=l[t](n),{c(){e=v("div"),r.c(),_(e,"class","wrapper-btn svelte-1g2syvn")},m(i,m){P(i,e,m),o[t].m(e,null),s=!0},p(i,[m]){let f=t;t=a(i),t===f?o[t].p(i,m):(V(),S(o[f],1,1,()=>{o[f]=null}),W(),r=o[t],r?r.p(i,m):(r=o[t]=l[t](i),r.c()),w(r,1),r.m(e,null))},i(i){s||(w(r),s=!0)},o(i){S(r),s=!1},d(i){i&&T(e),o[t].d()}}}function is(n,e,t){let r,s,l=se(),{loading:o={text:"",progress:0,done:!1}}=e;const a=Ze(0,{duration:500,easing:gt});L(n,a,u=>t(3,r=u));const i=Ze(.25,{duration:750,easing:Xn});L(n,i,u=>t(4,s=u));let m=!1,f=!1;function d(){o.done&&(l("start"),t(2,f=!0))}return ae(()=>{t(2,f=!1),a.set(o.progress)}),n.$$set=u=>{"loading"in u&&t(0,o=u.loading)},n.$$.update=()=>{n.$$.dirty&1&&a.set(o.progress),n.$$.dirty&1&&o.done&&(i.set(1),setTimeout(()=>{t(1,m=!0)},600))},[o,m,f,r,s,a,i,d]}class as extends F{constructor(e){super(),j(this,e,is,os,x,{loading:0})}}function qt(n){let e,t,r,s,l,o,a;return r=new N({props:{key:"start-tip"}}),{c(){e=v("div"),t=v("span"),M(r.$$.fragment),s=E(),l=v("span"),o=G(n[2]),_(t,"class","tip-title svelte-1fkwpdm"),_(l,"class","tip-text"),_(e,"class","tip svelte-1fkwpdm")},m(i,m){P(i,e,m),h(e,t),C(r,t,null),h(e,s),h(e,l),h(l,o),a=!0},p(i,m){(!a||m&4)&&H(o,i[2])},i(i){a||(w(r.$$.fragment,i),a=!0)},o(i){S(r.$$.fragment,i),a=!1},d(i){i&&T(e),$(r)}}}function us(n){let e,t,r,s,l,o,a,i,m,f;s=new N({props:{key:"start-selected"}}),o=new _t({props:{name:n[1].name,image:Ye(n[1].images),total:n[1].tracks.length,externUrl:n[1].link,isSelected:!1,isUnique:!0}});let d=n[2]&&qt(n);return m=new as({props:{loading:n[0]}}),m.$on("start",n[6]),{c(){e=v("div"),t=v("div"),r=v("span"),M(s.$$.fragment),l=E(),M(o.$$.fragment),a=E(),d&&d.c(),i=E(),M(m.$$.fragment),_(r,"class","content-header svelte-1fkwpdm"),_(t,"class","wrapper-box svelte-1fkwpdm"),_(e,"class","start-screen svelte-1fkwpdm")},m(u,c){P(u,e,c),h(e,t),h(t,r),C(s,r,null),h(t,l),C(o,t,null),h(e,a),d&&d.m(e,null),h(e,i),C(m,e,null),f=!0},p(u,[c]){const p={};c&2&&(p.name=u[1].name),c&2&&(p.image=Ye(u[1].images)),c&2&&(p.total=u[1].tracks.length),c&2&&(p.externUrl=u[1].link),o.$set(p),u[2]?d?(d.p(u,c),c&4&&w(d,1)):(d=qt(u),d.c(),w(d,1),d.m(e,i)):d&&(V(),S(d,1,1,()=>{d=null}),W());const g={};c&1&&(g.loading=u[0]),m.$set(g)},i(u){f||(w(s.$$.fragment,u),w(o.$$.fragment,u),w(d),w(m.$$.fragment,u),f=!0)},o(u){S(s.$$.fragment,u),S(o.$$.fragment,u),S(d),S(m.$$.fragment,u),f=!1},d(u){u&&T(e),$(s),$(o),d&&d.d(),$(m)}}}function cs(n,e,t){let r,s;L(n,oe,u=>t(5,s=u));let{loading:l={text:"",progress:.3,done:!1}}=e,{content:o={}}=e;const a=["Press ENTER to submit the selected track","Click on a track to select, click again to submit","You can search using the name of the track, album or artist(s)","Use the arrow keys to navigate between tracks","You gain more points by guessing the track faster","A track can be played only once per game","You can skip a track, but you won't gain any points","Don't open the Spotify app while playing, this is cheating!"],i=["Pressione ENTER para submeter a música selecionada","Clique numa música para selecionar, clique novamente para submeter","Pesquise usando o nome da música, álbum ou artista(s)","Utilize as setas para navegar entre as músicas","Ganhe mais pontos ao adivinhar a música mais rápido","Uma música só pode ser tocada uma vez por jogo","Pode pular uma música, mas não ganhará pontos na rodada","Não abra o Spotify durante o jogo, isso é roubar!"];let m="",f=0;ae(()=>{t(3,f=Math.floor(Math.random()*r.length))});function d(u){te.call(this,n,u)}return n.$$set=u=>{"loading"in u&&t(0,l=u.loading),"content"in u&&t(1,o=u.content)},n.$$.update=()=>{n.$$.dirty&32&&t(4,r=s=="br"?i:a),n.$$.dirty&24&&t(2,m=r[f])},[l,o,m,f,r,s,d]}class fs extends F{constructor(e){super(),j(this,e,cs,us,x,{loading:0,content:1})}}function ms(n){let e,t,r,s,l,o,a,i,m,f,d,u,c;return{c(){e=v("div"),t=v("div"),r=v("div"),s=G(n[0]),l=E(),o=v("div"),a=G(n[1]),i=E(),m=v("div"),f=G(n[2]),_(r,"class","info number svelte-scuvob"),_(o,"class","info text svelte-scuvob"),_(t,"class","upper svelte-scuvob"),re(t,"color",n[3]),_(m,"class","description svelte-scuvob"),_(e,"class","big-info svelte-scuvob")},m(p,g){P(p,e,g),h(e,t),h(t,r),h(r,s),h(t,l),h(t,o),h(o,a),h(e,i),h(e,m),h(m,f),u||(c=B(e,"introend",n[5]),u=!0)},p(p,[g]){g&1&&H(s,p[0]),g&2&&H(a,p[1]),g&8&&re(t,"color",p[3]),g&4&&H(f,p[2])},i(p){d||J(()=>{d=ne(e,X,{duration:500}),d.start()})},o:R,d(p){p&&T(e),u=!1,c()}}}function ps(n,e,t){let{number:r="0"}=e,{text:s="points"}=e,{description:l="Overall score"}=e,{color:o="red"}=e,a="red";o==="red"?a="#BA110B":o==="yellow"?a="#BA9A14":o==="green"&&(a="#0BBA48");function i(m){te.call(this,n,m)}return n.$$set=m=>{"number"in m&&t(0,r=m.number),"text"in m&&t(1,s=m.text),"description"in m&&t(2,l=m.description),"color"in m&&t(4,o=m.color)},[r,s,l,a,o,i]}class ds extends F{constructor(e){super(),j(this,e,ps,ms,x,{number:0,text:1,description:2,color:4})}}function gs(n){let e,t,r,s,l,o,a,i,m,f,d,u,c;return{c(){e=v("div"),t=v("div"),r=v("div"),s=G(n[0]),l=E(),o=v("div"),a=G(n[1]),i=E(),m=v("div"),f=G(n[2]),_(r,"class","number svelte-17c0veg"),_(o,"class","text svelte-17c0veg"),_(t,"class","upper svelte-17c0veg"),_(m,"class","description svelte-17c0veg"),_(e,"class","small-info svelte-17c0veg")},m(p,g){P(p,e,g),h(e,t),h(t,r),h(r,s),h(t,l),h(t,o),h(o,a),h(e,i),h(e,m),h(m,f),u||(c=B(e,"introend",n[3]),u=!0)},p(p,[g]){g&1&&H(s,p[0]),g&2&&H(a,p[1]),g&4&&H(f,p[2])},i(p){d||J(()=>{d=ne(e,X,{duration:200}),d.start()})},o:R,d(p){p&&T(e),u=!1,c()}}}function _s(n,e,t){let{number:r="0"}=e,{text:s="xxx"}=e,{description:l="xxx"}=e;function o(a){te.call(this,n,a)}return n.$$set=a=>{"number"in a&&t(0,r=a.number),"text"in a&&t(1,s=a.text),"description"in a&&t(2,l=a.description)},[r,s,l,o]}class st extends F{constructor(e){super(),j(this,e,_s,gs,x,{number:0,text:1,description:2})}}function ys(n){let e,t,r,s,l,o,a,i,m,f,d,u=(n[0]/1e3).toFixed(1)+"",c,p,g,y,k;return{c(){e=v("div"),t=v("img"),s=E(),l=v("div"),o=v("span"),o.textContent=`${n[1]}`,a=E(),i=v("span"),i.textContent=`${n[2]}`,m=E(),f=v("div"),d=v("span"),c=G(u),p=G("s"),g=E(),y=v("img"),_(t,"class","cover svelte-cvosc8"),ee(t.src,r=n[3])||_(t,"src",r),_(t,"alt","Cover"),_(o,"class","text-name svelte-cvosc8"),_(i,"class","text-artists svelte-cvosc8"),_(l,"class","text svelte-cvosc8"),_(d,"class","info-time svelte-cvosc8"),_(y,"class","info-icon svelte-cvosc8"),ee(y.src,k=n[4][0])||_(y,"src",k),_(y,"alt",n[4][1]),_(f,"class","info svelte-cvosc8"),_(e,"class","history-box svelte-cvosc8")},m(b,A){P(b,e,A),h(e,t),h(e,s),h(e,l),h(l,o),h(l,a),h(l,i),h(e,m),h(e,f),h(f,d),h(d,c),h(d,p),h(f,g),h(f,y)},p(b,[A]){A&1&&u!==(u=(b[0]/1e3).toFixed(1)+"")&&H(c,u)},i:R,o:R,d(b){b&&T(e)}}}function hs(n,e,t){let{track:r}=e,{score:s}=e,{playedMs:l}=e;const o=r.name,a=r.artists.map(f=>f.name).join(", "),i=r.album.images[0].url,m=s>0?["/assets/correct.svg","Correct"]:["/assets/wrong.svg","Wrong"];return r.external_urls.spotify,n.$$set=f=>{"track"in f&&t(5,r=f.track),"score"in f&&t(6,s=f.score),"playedMs"in f&&t(0,l=f.playedMs)},[l,o,a,i,m,r,s]}class vs extends F{constructor(e){super(),j(this,e,hs,ys,x,{track:5,score:6,playedMs:0})}}function bs(n){let e,t,r,s;return{c(){e=v("button"),t=G(n[0]),_(e,"class","svelte-1qrwpxy")},m(l,o){P(l,e,o),h(e,t),r||(s=B(e,"click",n[1]),r=!0)},p(l,[o]){o&1&&H(t,l[0])},i:R,o:R,d(l){l&&T(e),r=!1,s()}}}function ks(n,e,t){let{text:r}=e;function s(l){te.call(this,n,l)}return n.$$set=l=>{"text"in l&&t(0,r=l.text)},[r,s]}class Et extends F{constructor(e){super(),j(this,e,ks,bs,x,{text:0})}}function ws(n){let e,t;return{c(){e=v("img"),ee(e.src,t="/assets/copied.svg")||_(e,"src",t),_(e,"alt","Copied"),_(e,"class","svelte-1gq1181")},m(r,s){P(r,e,s)},d(r){r&&T(e)}}}function Ss(n){let e,t;return{c(){e=v("img"),ee(e.src,t="/assets/copy.svg")||_(e,"src",t),_(e,"alt","Copy"),_(e,"class","svelte-1gq1181")},m(r,s){P(r,e,s)},d(r){r&&T(e)}}}function Ts(n){let e,t,r;function s(a,i){return a[0]?ws:Ss}let l=s(n),o=l(n);return{c(){e=v("a"),o.c(),_(e,"href","/#"),_(e,"class","copy svelte-1gq1181")},m(a,i){P(a,e,i),o.m(e,null),t||(r=B(e,"click",$e(n[1])),t=!0)},p(a,[i]){l!==(l=s(a))&&(o.d(1),o=l(a),o&&(o.c(),o.m(e,null)))},i:R,o:R,d(a){a&&T(e),o.d(),t=!1,r()}}}function Ds(n,e,t){let r;L(n,oe,a=>t(3,r=a));let{text:s}=e,l=!1;function o(){let a={title:"Guessify",text:s,url:window.location.href};try{navigator.share(a)}catch{navigator.clipboard.writeText(s),t(0,l=!0)}}return Y(r,"game-copied"),n.$$set=a=>{"text"in a&&t(2,s=a.text)},n.$$.update=()=>{n.$$.dirty&1&&l&&setTimeout(()=>{t(0,l=!1)},2e3)},[l,o,s]}class Ps extends F{constructor(e){super(),j(this,e,Ds,Ts,x,{text:2})}}function Is(n){let e,t,r;return{c(){e=v("a"),t=v("img"),ee(t.src,r="/assets/twitter-icon.svg")||_(t,"src",r),_(t,"alt","Tweet"),_(t,"class","svelte-1r54v74"),_(e,"class","twitter svelte-1r54v74"),_(e,"href",n[0]),_(e,"target","_blank"),_(e,"rel","noopener noreferrer")},m(s,l){P(s,e,l),h(e,t)},p:R,i:R,o:R,d(s){s&&T(e)}}}function qs(n,e,t){let{text:r}=e;const s={original_referer:window.location.href,text:r},l="https://twitter.com/intent/tweet?"+new URLSearchParams(s).toString();return n.$$set=o=>{"text"in o&&t(1,r=o.text)},[l,r]}class Es extends F{constructor(e){super(),j(this,e,qs,Is,x,{text:1})}}function As(n){let e,t,r;return{c(){e=v("a"),t=v("img"),ee(t.src,r="/assets/whatsapp-icon.svg")||_(t,"src",r),_(t,"alt","WhatsApp"),_(t,"class","svelte-5ezduu"),_(e,"class","whatsapp svelte-5ezduu"),_(e,"href",n[0]),_(e,"target","_blank"),_(e,"rel","noopener noreferrer")},m(s,l){P(s,e,l),h(e,t)},p:R,i:R,o:R,d(s){s&&T(e)}}}function Cs(n,e,t){let{text:r}=e;const s={text:r},l="https://api.whatsapp.com/send?"+new URLSearchParams(s).toString();return n.$$set=o=>{"text"in o&&t(1,r=o.text)},[l,r]}class $s extends F{constructor(e){super(),j(this,e,Cs,As,x,{text:1})}}function Ms(n){let e,t,r,s,l,o,a;return t=new Es({props:{text:n[0]}}),s=new $s({props:{text:n[0]}}),o=new Ps({props:{text:n[0]}}),{c(){e=v("div"),M(t.$$.fragment),r=E(),M(s.$$.fragment),l=E(),M(o.$$.fragment),_(e,"class","share-buttons svelte-t67192")},m(i,m){P(i,e,m),C(t,e,null),h(e,r),C(s,e,null),h(e,l),C(o,e,null),a=!0},p(i,[m]){const f={};m&1&&(f.text=i[0]),t.$set(f);const d={};m&1&&(d.text=i[0]),s.$set(d);const u={};m&1&&(u.text=i[0]),o.$set(u)},i(i){a||(w(t.$$.fragment,i),w(s.$$.fragment,i),w(o.$$.fragment,i),a=!0)},o(i){S(t.$$.fragment,i),S(s.$$.fragment,i),S(o.$$.fragment,i),a=!1},d(i){i&&T(e),$(t),$(s),$(o)}}}function Rs(n,e,t){let r;L(n,oe,m=>t(4,r=m));let{score:s=0}=e,{name:l="a playlist"}=e,{uri:o=""}=e,a=Qt+(o?"?play="+Gn(o):""),i;return r==="br"?i=`Eu fiz ${s.toFixed(0)}/${Fe} pontos em "${l}" no Guessify! Jogue em ${a}`:i=`I got ${s.toFixed(0)}/${Fe} points at "${l}" on Guessify! Play at ${a}`,n.$$set=m=>{"score"in m&&t(1,s=m.score),"name"in m&&t(2,l=m.name),"uri"in m&&t(3,o=m.uri)},[i,s,l,o]}class Us extends F{constructor(e){super(),j(this,e,Rs,Ms,x,{score:1,name:2,uri:3})}}function Ls(n){let e,t,r,s,l,o,a,i,m,f,d;return t=new Us({props:{score:n[1],name:n[0],uri:n[2]}}),l=new Et({props:{text:Y(n[3],"game-playagain")}}),l.$on("click",n[4]),a=new Et({props:{text:Y(n[3],"game-newgame")}}),a.$on("click",n[5]),{c(){e=v("div"),M(t.$$.fragment),r=E(),s=v("div"),M(l.$$.fragment),o=E(),M(a.$$.fragment),_(s,"class","buttons-lower svelte-1b8o3t8"),_(e,"class","buttons svelte-1b8o3t8")},m(u,c){P(u,e,c),C(t,e,null),h(e,r),h(e,s),C(l,s,null),h(s,o),C(a,s,null),m=!0,f||(d=B(e,"introend",n[6]),f=!0)},p(u,[c]){const p={};c&2&&(p.score=u[1]),c&1&&(p.name=u[0]),c&4&&(p.uri=u[2]),t.$set(p);const g={};c&8&&(g.text=Y(u[3],"game-playagain")),l.$set(g);const y={};c&8&&(y.text=Y(u[3],"game-newgame")),a.$set(y)},i(u){m||(w(t.$$.fragment,u),w(l.$$.fragment,u),w(a.$$.fragment,u),i||J(()=>{i=ne(e,X,{duration:1e3}),i.start()}),m=!0)},o(u){S(t.$$.fragment,u),S(l.$$.fragment,u),S(a.$$.fragment,u),m=!1},d(u){u&&T(e),$(t),$(l),$(a),f=!1,d()}}}function xs(n,e,t){let r;L(n,oe,d=>t(3,r=d));let{name:s}=e,{score:l}=e,{uri:o}=e,a=se();function i(){console.log("play again"),a("playAgain")}function m(){console.log("new game"),a("newGame")}function f(d){te.call(this,n,d)}return n.$$set=d=>{"name"in d&&t(0,s=d.name),"score"in d&&t(1,l=d.score),"uri"in d&&t(2,o=d.uri)},[s,l,o,r,i,m,f]}class js extends F{constructor(e){super(),j(this,e,xs,Ls,x,{name:0,score:1,uri:2})}}function At(n,e,t){const r=n.slice();return r[11]=e[t],r}function Ct(n){let e,t;return e=new ds({props:{number:n[4].toFixed(0),text:`/${Fe}`,description:Y(n[5],"game-your-score"),color:n[2]}}),e.$on("introend",n[8]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p(r,s){const l={};s&16&&(l.number=r[4].toFixed(0)),s&32&&(l.description=Y(r[5],"game-your-score")),s&4&&(l.color=r[2]),e.$set(l)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function $t(n){let e,t,r,s,l,o;return e=new st({props:{number:n[1].totalCorrect.toFixed(0),text:`/ ${n[0].maxRounds} ${Y(n[5],"game-rounds")}`,description:"Correct guesses"}}),e.$on("introend",n[8]),r=new st({props:{number:(n[6]()/1e3||0).toFixed(1),text:Y(n[5],"game-seconds"),description:Y(n[5],"game-average")}}),r.$on("introend",n[8]),l=new st({props:{number:(n[1].totalMs/1e3).toFixed(1),text:Y(n[5],"game-seconds"),description:Y(n[5],"game-total")}}),l.$on("introend",n[8]),{c(){M(e.$$.fragment),t=E(),M(r.$$.fragment),s=E(),M(l.$$.fragment)},m(a,i){C(e,a,i),P(a,t,i),C(r,a,i),P(a,s,i),C(l,a,i),o=!0},p(a,i){const m={};i&2&&(m.number=a[1].totalCorrect.toFixed(0)),i&33&&(m.text=`/ ${a[0].maxRounds} ${Y(a[5],"game-rounds")}`),e.$set(m);const f={};i&32&&(f.text=Y(a[5],"game-seconds")),i&32&&(f.description=Y(a[5],"game-average")),r.$set(f);const d={};i&2&&(d.number=(a[1].totalMs/1e3).toFixed(1)),i&32&&(d.text=Y(a[5],"game-seconds")),i&32&&(d.description=Y(a[5],"game-total")),l.$set(d)},i(a){o||(w(e.$$.fragment,a),w(r.$$.fragment,a),w(l.$$.fragment,a),o=!0)},o(a){S(e.$$.fragment,a),S(r.$$.fragment,a),S(l.$$.fragment,a),o=!1},d(a){$(e,a),a&&T(t),$(r,a),a&&T(s),$(l,a)}}}function Mt(n){let e,t,r=n[0].maxRounds+"",s,l,o=Y(n[5],"game-rounds-of")+"",a,i,m=n[0].content.name+"",f,d,u,c,p,g,y,k=n[1].history,b=[];for(let q=0;q<k.length;q+=1)b[q]=Rt(At(n,k,q));const A=q=>S(b[q],1,1,()=>{b[q]=null});return{c(){e=v("div"),t=v("div"),s=G(r),l=E(),a=G(o),i=E(),f=G(m),d=E(),u=v("div");for(let q=0;q<b.length;q+=1)b[q].c();_(t,"class","history-title svelte-dr0dep"),_(u,"class","history svelte-dr0dep"),_(e,"class","history-wrapper svelte-dr0dep")},m(q,D){P(q,e,D),h(e,t),h(t,s),h(t,l),h(t,a),h(t,i),h(t,f),h(e,d),h(e,u);for(let I=0;I<b.length;I+=1)b[I]&&b[I].m(u,null);p=!0,g||(y=B(e,"introend",n[8]),g=!0)},p(q,D){if((!p||D&1)&&r!==(r=q[0].maxRounds+"")&&H(s,r),(!p||D&32)&&o!==(o=Y(q[5],"game-rounds-of")+"")&&H(a,o),(!p||D&1)&&m!==(m=q[0].content.name+"")&&H(f,m),D&2){k=q[1].history;let I;for(I=0;I<k.length;I+=1){const U=At(q,k,I);b[I]?(b[I].p(U,D),w(b[I],1)):(b[I]=Rt(U),b[I].c(),w(b[I],1),b[I].m(u,null))}for(V(),I=k.length;I<b.length;I+=1)A(I);W()}},i(q){if(!p){for(let D=0;D<k.length;D+=1)w(b[D]);c||J(()=>{c=ne(e,X,{duration:500}),c.start()}),p=!0}},o(q){b=b.filter(Boolean);for(let D=0;D<b.length;D+=1)S(b[D]);p=!1},d(q){q&&T(e),kn(b,q),g=!1,y()}}}function Rt(n){let e,t;const r=[n[11]];let s={};for(let l=0;l<r.length;l+=1)s=xe(s,r[l]);return e=new vs({props:s}),{c(){M(e.$$.fragment)},m(l,o){C(e,l,o),t=!0},p(l,o){const a=o&2?mt(r,[pt(l[11])]):{};e.$set(a)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){$(e,l)}}}function Ut(n){let e,t;return e=new js({props:{name:n[0].content.name,score:n[4],uri:n[0].content.uri}}),e.$on("playAgain",n[7]),e.$on("newGame",n[9]),e.$on("introend",n[8]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p(r,s){const l={};s&1&&(l.name=r[0].content.name),s&16&&(l.score=r[4]),s&1&&(l.uri=r[0].content.uri),e.$set(l)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function Fs(n){let e,t,r,s,l,o,a,i,m,f,d=n[3]>=0&&Ct(n),u=n[3]>=1&&$t(n),c=n[3]>=2&&Mt(n),p=n[3]>=3&&Ut(n);return{c(){e=v("div"),t=v("div"),d&&d.c(),r=E(),s=v("div"),u&&u.c(),l=E(),c&&c.c(),o=E(),p&&p.c(),_(s,"class","status-lower svelte-dr0dep"),_(t,"class","status svelte-dr0dep"),_(e,"class","end-screen svelte-dr0dep")},m(g,y){P(g,e,y),h(e,t),d&&d.m(t,null),h(t,r),h(t,s),u&&u.m(s,null),h(e,l),c&&c.m(e,null),h(e,o),p&&p.m(e,null),i=!0,m||(f=B(e,"introend",n[8]),m=!0)},p(g,[y]){g[3]>=0?d?(d.p(g,y),y&8&&w(d,1)):(d=Ct(g),d.c(),w(d,1),d.m(t,r)):d&&(V(),S(d,1,1,()=>{d=null}),W()),g[3]>=1?u?(u.p(g,y),y&8&&w(u,1)):(u=$t(g),u.c(),w(u,1),u.m(s,null)):u&&(V(),S(u,1,1,()=>{u=null}),W()),g[3]>=2?c?(c.p(g,y),y&8&&w(c,1)):(c=Mt(g),c.c(),w(c,1),c.m(e,o)):c&&(V(),S(c,1,1,()=>{c=null}),W()),g[3]>=3?p?(p.p(g,y),y&8&&w(p,1)):(p=Ut(g),p.c(),w(p,1),p.m(e,null)):p&&(V(),S(p,1,1,()=>{p=null}),W())},i(g){i||(w(d),w(u),w(c),w(p),a||J(()=>{a=ne(e,X,{}),a.start()}),i=!0)},o(g){S(d),S(u),S(c),S(p),i=!1},d(g){g&&T(e),d&&d.d(),u&&u.d(),c&&c.d(),p&&p.d(),m=!1,f()}}}function Gs(n,e,t){let r,s;L(n,we,p=>t(4,r=p)),L(n,oe,p=>t(5,s=p));let{gameInfo:l={maxRounds:0,content:{},played:[]}}=e,{endGameInfo:o={totalCorrect:0,percentScore:0,totalMs:0,history:[]}}=e;const a=()=>{let p=0,g=0;for(let y=0;y<o.history.length;y++)o.history[y].score>0&&(p+=o.history[y].playedMs,g++);return p/g};var i;o.percentScore>=80?i="green":o.percentScore>=50?i="yellow":i="red";let m=se();function f(){m("playAgain",{content:l.content})}let d=0;function u(){t(3,d+=1)}function c(p){te.call(this,n,p)}return n.$$set=p=>{"gameInfo"in p&&t(0,l=p.gameInfo),"endGameInfo"in p&&t(1,o=p.endGameInfo)},[l,o,i,d,r,s,a,f,u,c]}class Ns extends F{constructor(e){super(),j(this,e,Gs,Fs,x,{gameInfo:0,endGameInfo:1})}}function Os(n){let e;return{c(){e=v("div"),_(e,"class","game-tick")},m(t,r){P(t,e,r)},p:R,i:R,o:R,d(t){t&&T(e)}}}function Bs(n,e,t){let r,s;L(n,Xe,m=>t(3,s=m));let{ms:l=100}=e,{currentInfo:o}=e;function a(){s&&t(0,o.playedMs+=l,o),t(0,o.roundMs+=l,o),o.playedMs>=r&&(t(0,o.playedMs=r,o),t(0,o.roundMs=r,o)),t(0,o)}const i=setInterval(a,l);return Ne(()=>{clearInterval(i)}),n.$$set=m=>{"ms"in m&&t(1,l=m.ms),"currentInfo"in m&&t(0,o=m.currentInfo)},n.$$.update=()=>{n.$$.dirty&1&&(r=o.musicInfo.duration_ms)},[o,l]}class zs extends F{constructor(e){super(),j(this,e,Bs,Os,x,{ms:1,currentInfo:0})}}function Hs(n){let e,t;return{c(){e=v("div"),t=v("div"),_(t,"class","scorebar-progress svelte-1ez44so"),re(t,"width",n[0]+"%"),_(e,"class","scorebar svelte-1ez44so")},m(r,s){P(r,e,s),h(e,t)},p(r,[s]){s&1&&re(t,"width",r[0]+"%")},i:R,o:R,d(r){r&&T(e)}}}function Vs(n,e,t){let r,{points:s}=e;const l=Ze(0,{duration:1e3,easing:gt});return L(n,l,o=>t(0,r=o)),n.$$set=o=>{"points"in o&&t(2,s=o.points)},n.$$.update=()=>{n.$$.dirty&4&&l.set(s/Fe*100)},[r,l,s]}class Ws extends F{constructor(e){super(),j(this,e,Vs,Hs,x,{points:2})}}function Lt(n){let e,t,r=n[3].toFixed(0)+"",s,l,o,a;return{c(){e=v("span"),t=G("+"),s=G(r),_(e,"class","points-new svelte-tuq8ey")},m(i,m){P(i,e,m),h(e,t),h(e,s),a=!0},p(i,m){(!a||m&8)&&r!==(r=i[3].toFixed(0)+"")&&H(s,r)},i(i){a||(J(()=>{a&&(o&&o.end(1),l=ne(e,_e,{x:-100,duration:500}),l.start())}),a=!0)},o(i){l&&l.invalidate(),o=he(e,X,{}),a=!1},d(i){i&&T(e),i&&o&&o.end()}}}function Ks(n){let e,t,r,s=n[5].toFixed(0)+"",l,o,a,i,m,f,d,u,c,p,g,y,k,b,A;i=new N({props:{key:"game-points"}});let q=n[4]&&Lt(n);return d=new Ws({props:{points:n[0]}}),b=new N({props:{key:"game-rounds"}}),{c(){e=v("div"),t=v("div"),r=v("span"),l=G(s),o=E(),a=v("span"),M(i.$$.fragment),m=E(),q&&q.c(),f=E(),M(d.$$.fragment),u=E(),c=v("span"),p=G(n[1]),g=G(" / "),y=G(n[2]),k=E(),M(b.$$.fragment),_(r,"class","points-number svelte-tuq8ey"),_(a,"class","points-text svelte-tuq8ey"),_(t,"class","points svelte-tuq8ey"),_(c,"class","rounds svelte-tuq8ey"),_(e,"class","scoreboard svelte-tuq8ey")},m(D,I){P(D,e,I),h(e,t),h(t,r),h(r,l),h(t,o),h(t,a),C(i,a,null),h(t,m),q&&q.m(t,null),h(e,f),C(d,e,null),h(e,u),h(e,c),h(c,p),h(c,g),h(c,y),h(c,k),C(b,c,null),A=!0},p(D,[I]){(!A||I&32)&&s!==(s=D[5].toFixed(0)+"")&&H(l,s),D[4]?q?(q.p(D,I),I&16&&w(q,1)):(q=Lt(D),q.c(),w(q,1),q.m(t,null)):q&&(V(),S(q,1,1,()=>{q=null}),W());const U={};I&1&&(U.points=D[0]),d.$set(U),(!A||I&2)&&H(p,D[1]),(!A||I&4)&&H(y,D[2])},i(D){A||(w(i.$$.fragment,D),w(q),w(d.$$.fragment,D),w(b.$$.fragment,D),A=!0)},o(D){S(i.$$.fragment,D),S(q),S(d.$$.fragment,D),S(b.$$.fragment,D),A=!1},d(D){D&&T(e),$(i),q&&q.d(),$(d),$(b)}}}function Js(n,e,t){let r,{points:s=0}=e,{rounds:l=0}=e,{maxRounds:o=0}=e,a=0,i=Ze(0,{duration:1e3,easing:Qn});L(n,i,u=>t(5,r=u));let m=0,f=!1;we.subscribe(u=>{t(3,m=u-a),a=u,m>0&&d(),setTimeout(()=>{K(i,r=u,r)},500)});function d(){t(4,f=!0),setTimeout(()=>{t(4,f=!1)},2e3)}return ae(()=>{i.set(0),a=0}),n.$$set=u=>{"points"in u&&t(0,s=u.points),"rounds"in u&&t(1,l=u.rounds),"maxRounds"in u&&t(2,o=u.maxRounds)},[s,l,o,m,f,r,i]}class Ys extends F{constructor(e){super(),j(this,e,Js,Ks,x,{points:0,rounds:1,maxRounds:2})}}function Xs(n){let e;return{c(){e=v("div"),_(e,"class","no-error")},m(t,r){P(t,e,r)},p:R,i:R,o:R,d(t){t&&T(e)}}}function Qs(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p,g,y,k,b,A,q,D,I,U,Z;return{c(){e=v("div"),s=E(),l=v("div"),o=v("div"),a=v("span"),a.textContent="Oops...",i=E(),m=v("span"),f=G(n[1]),d=E(),u=v("p"),c=G(n[2]),p=E(),g=v("div"),y=v("span"),y.textContent="Full error description:",k=E(),b=v("p"),A=G(n[3]),_(e,"class","black-fade svelte-1a6fh2u"),_(a,"class","error-big svelte-1a6fh2u"),_(m,"class","title svelte-1a6fh2u"),_(o,"class","header svelte-1a6fh2u"),_(u,"class","quick-description svelte-1a6fh2u"),_(y,"class","quick-description svelte-1a6fh2u"),_(b,"class","full-description svelte-1a6fh2u"),_(g,"class","footer svelte-1a6fh2u"),_(l,"class","error-message svelte-1a6fh2u")},m(z,Q){P(z,e,Q),P(z,s,Q),P(z,l,Q),h(l,o),h(o,a),h(o,i),h(o,m),h(m,f),h(l,d),h(l,u),h(u,c),h(l,p),h(l,g),h(g,y),h(g,k),h(g,b),h(b,A),I=!0,U||(Z=[B(e,"click",n[4]),B(l,"click",n[4])],U=!0)},p(z,Q){(!I||Q&2)&&H(f,z[1]),(!I||Q&4)&&H(c,z[2]),(!I||Q&8)&&H(A,z[3])},i(z){I||(J(()=>{I&&(r&&r.end(1),t=ne(e,X,{}),t.start())}),J(()=>{I&&(D&&D.end(1),q=ne(l,_e,{y:-100,duration:300}),q.start())}),I=!0)},o(z){t&&t.invalidate(),r=he(e,X,{}),q&&q.invalidate(),D=he(l,X,{}),I=!1},d(z){z&&T(e),z&&r&&r.end(),z&&T(s),z&&T(l),z&&D&&D.end(),U=!1,ie(Z)}}}function Zs(n){let e,t,r,s;const l=[Qs,Xs],o=[];function a(i,m){return i[0]?0:1}return e=a(n),t=o[e]=l[e](n),{c(){t.c(),r=ue()},m(i,m){o[e].m(i,m),P(i,r,m),s=!0},p(i,[m]){let f=e;e=a(i),e===f?o[e].p(i,m):(V(),S(o[f],1,1,()=>{o[f]=null}),W(),t=o[e],t?t.p(i,m):(t=o[e]=l[e](i),t.c()),w(t,1),t.m(r.parentNode,r))},i(i){s||(w(t),s=!0)},o(i){S(t),s=!1},d(i){o[e].d(i),i&&T(r)}}}function el(n,e,t){let{show:r}=e,{title:s}=e,{quickDescription:l}=e,{fullDescription:o}=e,a=se();function i(){a("close")}return n.$$set=m=>{"show"in m&&t(0,r=m.show),"title"in m&&t(1,s=m.title),"quickDescription"in m&&t(2,l=m.quickDescription),"fullDescription"in m&&t(3,o=m.fullDescription)},[r,s,l,o,i]}let yt=class extends F{constructor(e){super(),j(this,e,el,Zs,x,{show:0,title:1,quickDescription:2,fullDescription:3})}};function xt(n){let e,t;return e=new Ys({props:{points:n[9],rounds:n[1].round,maxRounds:n[0].maxRounds}}),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p(r,s){const l={};s[0]&512&&(l.points=r[9]),s[0]&2&&(l.rounds=r[1].round),s[0]&1&&(l.maxRounds=r[0].maxRounds),e.$set(l)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function tl(n){let e,t;return e=new Ns({props:{gameInfo:n[0],endGameInfo:n[5]}}),e.$on("newGame",n[27]),e.$on("playAgain",n[28]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p(r,s){const l={};s[0]&1&&(l.gameInfo=r[0]),s[0]&32&&(l.endGameInfo=r[5]),e.$set(l)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function nl(n){let e,t;return e=new Xr({props:{gameInfo:n[0],currentInfo:n[1],endInfo:n[4]}}),e.$on("click",n[14]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p(r,s){const l={};s[0]&1&&(l.gameInfo=r[0]),s[0]&2&&(l.currentInfo=r[1]),s[0]&16&&(l.endInfo=r[4]),e.$set(l)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function rl(n){let e,t,r,s,l=n[2]&&jt(n);function o(i){n[24](i)}let a={gameInfo:n[0]};return n[1]!==void 0&&(a.currentInfo=n[1]),t=new Rr({props:a}),fe.push(()=>De(t,"currentInfo",o)),t.$on("submit",n[25]),t.$on("skip",n[26]),t.$on("toggle",n[10]),{c(){l&&l.c(),e=E(),M(t.$$.fragment)},m(i,m){l&&l.m(i,m),P(i,e,m),C(t,i,m),s=!0},p(i,m){i[2]?l?(l.p(i,m),m[0]&4&&w(l,1)):(l=jt(i),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(V(),S(l,1,1,()=>{l=null}),W());const f={};m[0]&1&&(f.gameInfo=i[0]),!r&&m[0]&2&&(r=!0,f.currentInfo=i[1],Te(()=>r=!1)),t.$set(f)},i(i){s||(w(l),w(t.$$.fragment,i),s=!0)},o(i){S(l),S(t.$$.fragment,i),s=!1},d(i){l&&l.d(i),i&&T(e),$(t,i)}}}function sl(n){let e,t;return e=new fs({props:{loading:n[3],content:n[0].content}}),e.$on("start",n[14]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p(r,s){const l={};s[0]&8&&(l.loading=r[3]),s[0]&1&&(l.content=r[0].content),e.$set(l)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function jt(n){let e,t,r;function s(o){n[23](o)}let l={ms:ol};return n[1]!==void 0&&(l.currentInfo=n[1]),e=new zs({props:l}),fe.push(()=>De(e,"currentInfo",s)),{c(){M(e.$$.fragment)},m(o,a){C(e,o,a),r=!0},p(o,a){const i={};!t&&a[0]&2&&(t=!0,i.currentInfo=o[1],Te(()=>t=!1)),e.$set(i)},i(o){r||(w(e.$$.fragment,o),r=!0)},o(o){S(e.$$.fragment,o),r=!1},d(o){$(e,o)}}}function ll(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p;function g(I){n[21](I)}function y(I){n[22](I)}let k={};n[6]!==void 0&&(k.spotifyPlayer=n[6]),n[7]!==void 0&&(k.deviceId=n[7]),e=new nr({props:k}),fe.push(()=>De(e,"spotifyPlayer",g)),fe.push(()=>De(e,"deviceId",y)),e.$on("error",n[11]),e.$on("loaded",n[17]),e.$on("ready",n[16]),e.$on("notReady",n[18]),e.$on("state",n[13]);let b=n[1].state!=="end"&&xt(n);const A=[sl,rl,nl,tl],q=[];function D(I,U){return I[1].state==="start"?0:I[1].state==="game"?1:I[1].state==="ready"?2:I[1].state==="end"?3:-1}return~(a=D(n))&&(i=q[a]=A[a](n)),d=new yt({props:{title:n[8].title,quickDescription:n[8].quickDescription,fullDescription:n[8].fullDescription,show:n[1].state==="error"}}),d.$on("close",n[12]),{c(){M(e.$$.fragment),s=E(),l=v("div"),b&&b.c(),o=E(),i&&i.c(),f=E(),M(d.$$.fragment),_(l,"class","gameplay svelte-ogby1")},m(I,U){C(e,I,U),P(I,s,U),P(I,l,U),b&&b.m(l,null),h(l,o),~a&&q[a].m(l,null),P(I,f,U),C(d,I,U),u=!0,c||(p=B(l,"outroend",n[20]),c=!0)},p(I,U){const Z={};!t&&U[0]&64&&(t=!0,Z.spotifyPlayer=I[6],Te(()=>t=!1)),!r&&U[0]&128&&(r=!0,Z.deviceId=I[7],Te(()=>r=!1)),e.$set(Z),I[1].state!=="end"?b?(b.p(I,U),U[0]&2&&w(b,1)):(b=xt(I),b.c(),w(b,1),b.m(l,o)):b&&(V(),S(b,1,1,()=>{b=null}),W());let z=a;a=D(I),a===z?~a&&q[a].p(I,U):(i&&(V(),S(q[z],1,1,()=>{q[z]=null}),W()),~a?(i=q[a],i?i.p(I,U):(i=q[a]=A[a](I),i.c()),w(i,1),i.m(l,null)):i=null);const Q={};U[0]&256&&(Q.title=I[8].title),U[0]&256&&(Q.quickDescription=I[8].quickDescription),U[0]&256&&(Q.fullDescription=I[8].fullDescription),U[0]&2&&(Q.show=I[1].state==="error"),d.$set(Q)},i(I){u||(w(e.$$.fragment,I),w(b),w(i),m&&m.end(1),w(d.$$.fragment,I),u=!0)},o(I){S(e.$$.fragment,I),S(b),S(i),m=he(l,X,{}),S(d.$$.fragment,I),u=!1},d(I){$(e,I),I&&T(s),I&&T(l),b&&b.d(),~a&&q[a].d(),I&&m&&m.end(),I&&T(f),$(d,I),c=!1,p()}}}const ol=100;function il(n,e,t){let r,s,l;L(n,Xe,O=>t(19,r=O)),L(n,Re,O=>t(30,s=O)),L(n,we,O=>t(9,l=O));let{gameInfo:o={maxRounds:5,content:{},played:[]}}=e,a={state:"start",round:0,musicIndex:-1,musicInfo:{},roundScore:-1,playedMs:-1,roundMs:-1},i={done:!1,text:"",progress:0},m={success:!1,scoreEarned:0,correctTrack:{}},f={totalCorrect:0,percentScore:0,totalMs:0,history:[]},d={hasToPause:!1,hasToStart:!1,isTryingToStart:!1};function u(){t(1,a={state:"start",round:0,musicIndex:-1,musicInfo:{},roundScore:-1,playedMs:-1,roundMs:-1}),t(4,m={success:!1,scoreEarned:0,correctTrack:{}}),t(5,f={totalCorrect:0,percentScore:0,totalMs:0,history:[]}),t(0,o.played=[],o),we.set(0)}let c,p;function g(){c.togglePlay()}let y={title:"Error while communicating with Spotify",quickDescription:"Spotify responded with an unexpected error. Unfortunately, there's nothing I can do. Please refresh the page or try again later",fullDescription:"Today is not a good day :("};function k(O){t(8,y.title="Error communicating with Spotify",y),t(8,y.quickDescription="Spotify responded with an unexpected error. Unfortunately, there's nothing I can do. Check your internet connection, refresh this page or try again later",y);let le;try{le=JSON.parse(O.responseText).error.message}catch{try{le=O.detail.text}catch{le="No description provided"}}t(8,y.fullDescription=le,y),t(1,a.state="error",a),console.log("error: ",O)}function b(){u()}function A(O){const le=O.detail;console.log(le),K(Xe,r=!le.paused,r),!le.paused&&d.hasToPause&&(c.pause().then(()=>console.log("Done pausing SDK")).catch(k),console.log("Forcing pause")),t(1,a.playedMs=le.position,a),a.state==="game"&&le.position===0&&le.track_window.previous_tracks.length>0&&(console.log(le.track_window.previous_tracks[0].uri),console.log(a.musicInfo.uri),le.track_window.previous_tracks[0].uri===a.musicInfo.uri&&D(-1))}function q(){if(a.state=="loading",a.round>=o.maxRounds){t(1,a.state="end",a);return}let O=[];for(let Oe=0;Oe<o.content.tracks.length;Oe++)o.played.includes(Oe)||O.push(Oe);const le=O[Math.floor(Math.random()*O.length)];t(1,a.musicIndex=le,a),t(1,a.musicInfo=o.content.tracks[le],a),t(1,a.playedMs=0,a),t(1,a.roundMs=0,a),t(2,U=!1),d.hasToPause=!1,s.play({device_id:p,uris:[a.musicInfo.uri]}).then(()=>{t(1,a.state="game",a)}).catch(k)}function D(O){c.pause(),t(1,a.round+=1,a),o.played.push(a.musicIndex),O!==-1&&a.musicIndex===O?(K(we,l+=a.roundScore,l),t(4,m.scoreEarned=a.roundScore,m),t(4,m.success=!0,m)):(t(4,m.scoreEarned=0,m),t(4,m.success=!1,m),t(4,m.correctTrack=a.musicInfo,m)),t(5,f.totalCorrect+=m.success?1:0,f),t(5,f.totalMs+=a.playedMs,f),t(5,f.percentScore+=m.scoreEarned,f),f.history.push({track:a.musicInfo,score:m.scoreEarned,playedMs:a.playedMs}),t(1,a.state="ready",a)}async function I(){t(3,i.text="Preparing playback ... (1st attempt)",i),t(3,i.progress=.7,i);try{try{await s.play()}catch{console.log("Attempting to play before transfer failed. That's ok")}try{await s.transferMyPlayback([p])}catch{t(3,i.text="Preparing playback ... (2nd attempt)",i),console.log("Plan B (1): Muting sdk player"),await c.setVolume(0),console.log("Plan B (2): using /play directly"),await s.play({device_id:p,context_uri:o.content.uri}),console.log("Plan B (3): pausing playback"),await c.pause(),console.log("Plan B (4): restoring volume"),await c.setVolume(.6)}try{await c.pause(),d.hasToPause=!0}catch{console.log("Attempting to pause after transfer failed. That's ok")}Qe.subscribe(O=>c.setVolume(O)),console.log("finished"),t(3,i.text="Done!",i),t(3,i.progress=1,i),t(3,i.done=!0,i)}catch(O){k(O)}}let U=!1;ae(()=>{t(3,i.text="Connecting to Spotify SDK...",i),t(3,i.progress=.2,i)});function Z(){t(3,i.text="Spotify SDK has loaded",i),t(3,i.progress=.5,i)}function z(){t(3,i.text="Spotify SDK disconnected",i),t(3,i.progress=.5,i),t(3,i.done=!1,i)}function Q(O){te.call(this,n,O)}function an(O){c=O,t(6,c)}function un(O){p=O,t(7,p)}function cn(O){a=O,t(1,a)}function fn(O){a=O,t(1,a)}const mn=O=>{D(O.detail.index)},pn=()=>{D(-1)};function dn(O){te.call(this,n,O)}function gn(O){te.call(this,n,O)}return n.$$set=O=>{"gameInfo"in O&&t(0,o=O.gameInfo)},n.$$.update=()=>{n.$$.dirty[0]&524294&&a.state==="game"&&r&&!U&&t(2,U=!0)},[o,a,U,i,m,f,c,p,y,l,g,k,b,A,q,D,I,Z,z,r,Q,an,un,cn,fn,mn,pn,dn,gn]}class al extends F{constructor(e){super(),j(this,e,il,ll,x,{gameInfo:0},null,[-1,-1])}}function ul(n){let e;return{c(){e=v("div"),_(e,"class","spotify-auth")},m(t,r){P(t,e,r)},p:R,i:R,o:R,d(t){t&&T(e)}}}function cl(n,e,t){let r,s,l,o,a,i;L(n,ce,c=>t(2,r=c)),L(n,Pe,c=>t(3,s=c)),L(n,ge,c=>t(4,l=c)),L(n,Re,c=>t(5,o=c)),L(n,ke,c=>t(6,a=c)),L(n,pe,c=>t(7,i=c));let m,f,d=se();function u(){K(ce,r=!0,r),m=window.open(Rn,"popup","popup=true"),f=setInterval(()=>{try{if(m.window.location.href.includes(Un)){const c=new URLSearchParams(m.window.location.search),p=c.get("error");if(p)m.close(),d("error",{description:p});else{const g=c.get("code");fetch(Ln+`/${g}`).then(y=>y.json()).then(y=>{y.refresh_token?(K(pe,i=y.refresh_token,i),K(ke,a=y.access_token,a),o.setAccessToken(a),o.getMe().then(k=>{K(ge,l=k.display_name||k.id,l),K(Pe,s=!0,s),K(ce,r=!1,r)}).catch(()=>{K(ce,r=!1,r),d("error",{description:"Error fetching username"})})):(K(ce,r=!1,r),d("error",{description:y.error_description}))}).catch(()=>{K(ce,r=!1,r),d("error",{description:"Error fetching credentials via API"})}).finally(()=>{m.close()})}}if(!m||!m.closed)return;clearInterval(f)}catch(c){console.log(c),K(ce,r=!1,r),d("error",{description:"Error trying to access Spotify"})}},1e3)}return ae(u),Ne(()=>{f!==void 0&&clearInterval(f)}),[]}class fl extends F{constructor(e){super(),j(this,e,cl,ul,x,{})}}function ml(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p,g,y,k;return t=new N({props:{key:"landing-not"}}),o=new N({props:{key:"landing-logout"}}),f=new N({props:{key:"landing-continue"}}),{c(){e=v("a"),M(t.$$.fragment),r=E(),s=G(n[1]),l=G("? "),M(o.$$.fragment),a=E(),i=v("button"),m=v("span"),M(f.$$.fragment),d=E(),u=v("span"),c=G(n[1]),_(e,"href","#"),_(e,"class","requires logout svelte-1hmqjrn"),_(m,"class","continue svelte-1hmqjrn"),_(u,"class","continue-username svelte-1hmqjrn"),_(i,"class","btn-landing btn-continue svelte-1hmqjrn")},m(b,A){P(b,e,A),C(t,e,null),h(e,r),h(e,s),h(e,l),C(o,e,null),P(b,a,A),P(b,i,A),h(i,m),C(f,m,null),h(i,d),h(i,u),h(u,c),g=!0,y||(k=[B(e,"click",$e(n[4])),B(i,"click",n[5])],y=!0)},p(b,A){(!g||A&2)&&H(s,b[1]),(!g||A&2)&&H(c,b[1])},i(b){g||(w(t.$$.fragment,b),w(o.$$.fragment,b),w(f.$$.fragment,b),p||J(()=>{p=ne(i,X,{}),p.start()}),g=!0)},o(b){S(t.$$.fragment,b),S(o.$$.fragment,b),S(f.$$.fragment,b),g=!1},d(b){b&&T(e),$(t),$(o),b&&T(a),b&&T(i),$(f),y=!1,ie(k)}}}function pl(n){let e,t,r,s,l,o,a,i,m,f,d,u,c;return t=new N({props:{key:"landing-requires"}}),o=new N({props:{key:"landing-login"}}),{c(){e=v("span"),M(t.$$.fragment),r=E(),s=v("button"),l=v("span"),M(o.$$.fragment),a=E(),i=v("img"),_(e,"class","requires svelte-1hmqjrn"),_(i,"class","spotify-logo-button svelte-1hmqjrn"),ee(i.src,m="/assets/spotify-logo-white.png")||_(i,"src",m),_(i,"alt","Spotify"),_(l,"class","login svelte-1hmqjrn"),_(s,"class","btn-landing btn-login svelte-1hmqjrn")},m(p,g){P(p,e,g),C(t,e,null),P(p,r,g),P(p,s,g),h(s,l),C(o,l,null),h(l,a),h(l,i),d=!0,u||(c=B(s,"click",n[3]),u=!0)},p:R,i(p){d||(w(t.$$.fragment,p),w(o.$$.fragment,p),f||J(()=>{f=ne(s,X,{}),f.start()}),d=!0)},o(p){S(t.$$.fragment,p),S(o.$$.fragment,p),d=!1},d(p){p&&T(e),$(t),p&&T(r),p&&T(s),$(o),u=!1,c()}}}function dl(n){let e,t;return{c(){e=v("img"),_(e,"class","loading-icon svelte-1hmqjrn"),ee(e.src,t="/assets/spin.svg")||_(e,"src",t),_(e,"alt","")},m(r,s){P(r,e,s)},p:R,i:R,o:R,d(r){r&&T(e)}}}function gl(n){let e,t,r,s;const l=[dl,pl,ml],o=[];function a(i,m){return i[0]==="loading"?0:i[0]==="invalid"?1:2}return t=a(n),r=o[t]=l[t](n),{c(){e=v("div"),r.c(),_(e,"class","div-login svelte-1hmqjrn")},m(i,m){P(i,e,m),o[t].m(e,null),s=!0},p(i,[m]){let f=t;t=a(i),t===f?o[t].p(i,m):(V(),S(o[f],1,1,()=>{o[f]=null}),W(),r=o[t],r?r.p(i,m):(r=o[t]=l[t](i),r.c()),w(r,1),r.m(e,null))},i(i){s||(w(r),s=!0)},o(i){S(r),s=!1},d(i){i&&T(e),o[t].d()}}}function _l(n,e,t){let{type:r="loading"}=e,{username:s=""}=e,l=se();function o(){console.log("triggered auth"),l("auth")}function a(){l("reset")}const i=()=>{l("ready")};return n.$$set=m=>{"type"in m&&t(0,r=m.type),"username"in m&&t(1,s=m.username)},[r,s,l,o,a,i]}class yl extends F{constructor(e){super(),j(this,e,_l,gl,x,{type:0,username:1})}}function hl(n){let e,t,r,s,l;return{c(){e=v("p"),e.innerHTML=`kkkk
                <br class="svelte-7a8dy9"/>
                kkkk
                <br class="svelte-7a8dy9"/>
                kkkk
                <br class="svelte-7a8dy9"/>
                kkkk
                <br class="svelte-7a8dy9"/>
                kkkk`,_(e,"class","svelte-7a8dy9")},m(o,a){P(o,e,a),r=!0,s||(l=B(e,"outroend",n[2]),s=!0)},p:R,i(o){r||(J(()=>{r&&(t||(t=ve(e,_e,{x:200,duration:500},!0)),t.run(1))}),r=!0)},o(o){t||(t=ve(e,_e,{x:200,duration:500},!1)),t.run(0),r=!1},d(o){o&&T(e),o&&t&&t.end(),s=!1,l()}}}function vl(n){let e,t,r,s,l;return{c(){e=v("p"),e.innerHTML=`<br class="svelte-7a8dy9"/>
                Guessify é um jogo para você testar seus conhecimentos nas músicas que você costuma ouvir.
                Diferentemente dos outros jogos semelhantes, Guessify permite utilizar seu Spotify para escolher
                suas playlists e albums que costuma ouvir.
                <br class="svelte-7a8dy9"/>
                O jogo atualmente ainda está em desenvolvimento. Podem ocorrer vários problemas com a conexão com o Spotify,
                assim como inesperados bugs.
                <br class="svelte-7a8dy9"/>
                É seguro? Sim, Guessify não armazena nenhuma informação sua além do seu token de acesso fornecido pelo Spotify,
                pode ser removido a qualquer momento ao clicar no botão de sair na tela inicial.
                <br class="svelte-7a8dy9"/>
                Deseja contribuir? O código fonte está disponível no <a href="https://github.com/Leinadium/guessify">Github</a>.`,_(e,"class","small-text svelte-7a8dy9")},m(o,a){P(o,e,a),r=!0,s||(l=B(e,"outroend",n[2]),s=!0)},p:R,i(o){r||(J(()=>{r&&(t||(t=ve(e,_e,{x:-200,duration:500},!0)),t.run(1))}),r=!0)},o(o){t||(t=ve(e,_e,{x:-200,duration:500},!1)),t.run(0),r=!1},d(o){o&&T(e),o&&t&&t.end(),s=!1,l()}}}function bl(n){let e,t,r,s,l,o,a,i,m,f,d,u;return t=new N({props:{key:"landing-title"}}),a=new N({props:{key:"landing-description"}}),{c(){e=v("div"),M(t.$$.fragment),l=E(),o=v("div"),M(a.$$.fragment),_(e,"class","short-description svelte-7a8dy9"),_(o,"class","long-description svelte-7a8dy9")},m(c,p){P(c,e,p),C(t,e,null),P(c,l,p),P(c,o,p),C(a,o,null),f=!0,d||(u=B(e,"outroend",n[2]),d=!0)},p:R,i(c){f||(w(t.$$.fragment,c),J(()=>{f&&(s&&s.end(1),r=ne(e,_e,{y:30,duration:1e3}),r.start())}),w(a.$$.fragment,c),J(()=>{f&&(m&&m.end(1),i=ne(o,_e,{y:30,duration:1e3}),i.start())}),f=!0)},o(c){S(t.$$.fragment,c),r&&r.invalidate(),s=he(e,X,{}),S(a.$$.fragment,c),i&&i.invalidate(),m=he(o,X,{}),f=!1},d(c){c&&T(e),$(t),c&&s&&s.end(),c&&T(l),c&&T(o),$(a),c&&m&&m.end(),d=!1,u()}}}function kl(n){let e,t,r,s,l;return t=new N({props:{key:"landing-goback"}}),{c(){e=v("a"),M(t.$$.fragment),_(e,"href","#"),re(e,"text-align","center"),_(e,"class","goto goto-text svelte-7a8dy9")},m(o,a){P(o,e,a),C(t,e,null),r=!0,s||(l=B(e,"click",$e(n[5])),s=!0)},p:R,i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){S(t.$$.fragment,o),r=!1},d(o){o&&T(e),$(t),s=!1,l()}}}function wl(n){let e,t,r,s,l,o,a,i,m,f;return t=new N({props:{key:"landing-about"}}),a=new N({props:{key:"landing-tutorial"}}),{c(){e=v("a"),M(t.$$.fragment),r=E(),s=v("span"),s.textContent="|",l=E(),o=v("a"),M(a.$$.fragment),_(e,"href","#"),re(e,"text-align","right"),_(e,"class","goto goto-text svelte-7a8dy9"),_(s,"class","goto svelte-7a8dy9"),_(o,"href","#"),re(o,"text-align","left"),_(o,"class","goto goto-text svelte-7a8dy9")},m(d,u){P(d,e,u),C(t,e,null),P(d,r,u),P(d,s,u),P(d,l,u),P(d,o,u),C(a,o,null),i=!0,m||(f=[B(e,"click",$e(n[3])),B(o,"click",$e(n[4]))],m=!0)},p:R,i(d){i||(w(t.$$.fragment,d),w(a.$$.fragment,d),i=!0)},o(d){S(t.$$.fragment,d),S(a.$$.fragment,d),i=!1},d(d){d&&T(e),$(t),d&&T(r),d&&T(s),d&&T(l),d&&T(o),$(a),m=!1,ie(f)}}}function Sl(n){let e,t,r,s,l,o,a,i,m;const f=[bl,vl,hl],d=[];function u(y,k){return y[0]==="main"?0:y[0]==="about"?1:y[0]==="tutorial"?2:-1}~(r=u(n))&&(s=d[r]=f[r](n));const c=[wl,kl],p=[];function g(y,k){return y[0]==="main"?0:1}return a=g(n),i=p[a]=c[a](n),{c(){e=v("div"),t=v("div"),s&&s.c(),l=E(),o=v("div"),i.c(),_(t,"class","texts svelte-7a8dy9"),_(o,"class","pagination svelte-7a8dy9"),_(e,"class","landing-description svelte-7a8dy9")},m(y,k){P(y,e,k),h(e,t),~r&&d[r].m(t,null),h(e,l),h(e,o),p[a].m(o,null),m=!0},p(y,[k]){let b=r;r=u(y),r===b?~r&&d[r].p(y,k):(s&&(V(),S(d[b],1,1,()=>{d[b]=null}),W()),~r?(s=d[r],s?s.p(y,k):(s=d[r]=f[r](y),s.c()),w(s,1),s.m(t,null)):s=null);let A=a;a=g(y),a===A?p[a].p(y,k):(V(),S(p[A],1,1,()=>{p[A]=null}),W(),i=p[a],i?i.p(y,k):(i=p[a]=c[a](y),i.c()),w(i,1),i.m(o,null))},i(y){m||(w(s),w(i),m=!0)},o(y){S(s),S(i),m=!1},d(y){y&&T(e),~r&&d[r].d(),p[a].d()}}}function Tl(n,e,t){let r=se(),s="main",l="none";function o(d){t(0,s="none"),l=d}function a(){t(0,s=l),r("outroend")}return[s,o,a,()=>o("about"),()=>o("tutorial"),()=>o("main")]}class Dl extends F{constructor(e){super(),j(this,e,Tl,Sl,x,{})}}function Ft(n){let e,t,r,s;return e=new Dl({}),e.$on("outroend",n[12]),r=new yl({props:{type:n[0],username:n[5]}}),r.$on("auth",n[6]),r.$on("reset",n[9]),r.$on("ready",n[13]),{c(){M(e.$$.fragment),t=E(),M(r.$$.fragment)},m(l,o){C(e,l,o),P(l,t,o),C(r,l,o),s=!0},p(l,o){const a={};o&1&&(a.type=l[0]),o&32&&(a.username=l[5]),r.$set(a)},i(l){s||(w(e.$$.fragment,l),w(r.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),S(r.$$.fragment,l),s=!1},d(l){$(e,l),l&&T(t),$(r,l)}}}function Gt(n){let e,t;return e=new fl({}),e.$on("error",n[7]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p:R,i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function Pl(n){let e,t,r,s,l,o,a=n[1]&&Ft(n);const i=[n[3],{show:n[2]}];let m={};for(let d=0;d<i.length;d+=1)m=xe(m,i[d]);r=new yt({props:m}),r.$on("close",n[8]);let f=n[4]&&Gt(n);return{c(){e=v("div"),a&&a.c(),t=E(),M(r.$$.fragment),s=E(),l=v("div"),f&&f.c(),_(e,"class","landing svelte-uy15tb")},m(d,u){P(d,e,u),a&&a.m(e,null),P(d,t,u),C(r,d,u),P(d,s,u),P(d,l,u),f&&f.m(l,null),o=!0},p(d,[u]){d[1]?a?(a.p(d,u),u&2&&w(a,1)):(a=Ft(d),a.c(),w(a,1),a.m(e,null)):a&&(V(),S(a,1,1,()=>{a=null}),W());const c=u&12?mt(i,[u&8&&pt(d[3]),u&4&&{show:d[2]}]):{};r.$set(c),d[4]?f?(f.p(d,u),u&16&&w(f,1)):(f=Gt(d),f.c(),w(f,1),f.m(l,null)):f&&(V(),S(f,1,1,()=>{f=null}),W())},i(d){o||(w(a),w(r.$$.fragment,d),w(f),o=!0)},o(d){S(a),S(r.$$.fragment,d),S(f),o=!1},d(d){d&&T(e),a&&a.d(),d&&T(t),$(r,d),d&&T(s),d&&T(l),f&&f.d()}}}function Il(n,e,t){let r,s,l;L(n,Pe,A=>t(10,r=A)),L(n,ce,A=>t(11,s=A)),L(n,ge,A=>t(5,l=A));let o=se(),a=!1,i=!1,m=setTimeout(()=>{t(1,a=!0)},100),f={title:"Error retrieving your playlists",quickDescription:"Please ensure your internet connection is working, and your Spotify account has a valid Premium subscription",fullDescription:'Error retrieving from Spotify API: Spotify API returned 502 with message " "'},d=!1;function u(){t(4,d=!0)}function c(A){t(2,i=!0),t(4,d=!1),t(3,f.title="Error while authenticating with Spotify",f),t(3,f.quickDescription="Something went wrong during authentication. Try again later.",f),t(3,f.fullDescription=A.detail.description,f)}function p(){t(2,i=!1),t(4,d=!1)}function g(){t(4,d=!1),t(2,i=!1),o("reset")}let y="loading";Ne(()=>{clearTimeout(m)});function k(A){te.call(this,n,A)}function b(A){te.call(this,n,A)}return n.$$.update=()=>{n.$$.dirty&3073&&(s?t(0,y="loading"):r?t(0,y="valid"):t(0,y="invalid"),console.log(y))},[y,a,i,f,d,l,u,c,p,g,r,s,k,b]}class ql extends F{constructor(e){super(),j(this,e,Il,Pl,x,{})}}const ze=50,El=10,ln="total,items.track(uri,id,name,artists.name,duration_ms,album(images,name),external_urls.spotify)",Al=`uri,name,images,tracks(${ln}),external_urls.spotify`;function Cl(n){let e=new Set,t=[];return n.forEach(r=>{let s=r.track;s&&(e.has(s.uri)||(e.add(s.uri),t.push(s)))}),t}async function $l(n,e,t){console.log("Getting all tracks from",e);let r,s;if(t==="playlist")r=i=>n.getPlaylist(i,{fields:Al,limit:ze}),s=(i,m)=>n.getPlaylistTracks(i,{offset:m,limit:ze,fields:ln});else if(t==="album")r=i=>n.getAlbum(i,{limit:ze}),s=(i,m)=>n.getAlbumTracks(i,{offset:m,limit:ze});else throw new Error("Invalid type (not playlist or album)");let l=await r(e),o=l.tracks.items,a=l.tracks.total;for(;o.length<a;){console.log(`Getting more tracks from ${t}: ${o.length} / ${a}`);let i=await s(e,o.length);o=o.concat(i.items)}return{uri:l.uri,name:l.name,images:l.images,tracks:o,link:l.external_urls.spotify}}async function on(n){console.log("Getting all playlists");let e=await n({limit:El}),t=e.total;for(;e.items.length<t;){console.log(`Getting more playlists: ${e.items.length} / ${t}`);let r=await n({offset:e.items.length});e.items=e.items.concat(r.items)}return e.items}async function Ml(n){try{return on(n.getMySavedAlbums)}catch{throw new Error("Error getting user albums")}}async function Rl(n){try{return on(n.getUserPlaylists)}catch{throw new Error("Error getting user playlists")}}async function Ul(n,e){const t=e.split(":"),r=t[1],s=t[2];console.log("Validating ",e," of type ",r);let l=await $l(n,s,r);return console.log(l),l.tracks=Cl(l.tracks),l.tracks.length<5?{responseText:JSON.stringify({error:{message:`${r} must have at least ${nn} unique tracks`}})}:l}function Nt(n,e,t){const r=n.slice();return r[10]=e[t],r[12]=t,r}function Ll(n){let e,t;return{c(){e=v("img"),_(e,"class","loading svelte-u92h62"),ee(e.src,t="/assets/spin.svg")||_(e,"src",t),_(e,"alt","Loading")},m(r,s){P(r,e,s)},p:R,i:R,o:R,d(r){r&&T(e)}}}function xl(n){let e,t,r,s;const l=[Fl,jl],o=[];function a(i,m){return i[0].length>0?0:1}return e=a(n),t=o[e]=l[e](n),{c(){t.c(),r=ue()},m(i,m){o[e].m(i,m),P(i,r,m),s=!0},p(i,m){let f=e;e=a(i),e===f?o[e].p(i,m):(V(),S(o[f],1,1,()=>{o[f]=null}),W(),t=o[e],t?t.p(i,m):(t=o[e]=l[e](i),t.c()),w(t,1),t.m(r.parentNode,r))},i(i){s||(w(t),s=!0)},o(i){S(t),s=!1},d(i){o[e].d(i),i&&T(r)}}}function jl(n){let e,t,r;return t=new N({props:{key:"pregame-not-found"}}),{c(){e=v("p"),M(t.$$.fragment),_(e,"class","svelte-u92h62")},m(s,l){P(s,e,l),C(t,e,null),r=!0},p:R,i(s){r||(w(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&T(e),$(t)}}}function Fl(n){let e=[],t=new Map,r,s,l=n[0];const o=a=>a[10].id;for(let a=0;a<l.length;a+=1){let i=Nt(n,l,a),m=o(i);t.set(m,e[a]=Ot(m,i))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=ue()},m(a,i){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(a,i);P(a,r,i),s=!0},p(a,i){i&29&&(l=a[0],V(),e=Xt(e,i,o,1,a,l,t,r.parentNode,Yt,Ot,r,Nt),W())},i(a){if(!s){for(let i=0;i<l.length;i+=1)w(e[i]);s=!0}},o(a){for(let i=0;i<e.length;i+=1)S(e[i]);s=!1},d(a){for(let i=0;i<e.length;i+=1)e[i].d(a);a&&T(r)}}}function Ot(n,e){let t,r,s;function l(){return e[5](e[10],e[12])}return r=new _t({props:{name:e[10].name,image:Ye(e[10].images),total:e[10].tracks.total,externUrl:e[10].external_urls.spotify,isSelected:e[2]&&e[3]===e[10].uri}}),r.$on("click",l),{key:n,first:null,c(){t=ue(),M(r.$$.fragment),this.first=t},m(o,a){P(o,t,a),C(r,o,a),s=!0},p(o,a){e=o;const i={};a&1&&(i.name=e[10].name),a&1&&(i.image=Ye(e[10].images)),a&1&&(i.total=e[10].tracks.total),a&1&&(i.externUrl=e[10].external_urls.spotify),a&13&&(i.isSelected=e[2]&&e[3]===e[10].uri),r.$set(i)},i(o){s||(w(r.$$.fragment,o),s=!0)},o(o){S(r.$$.fragment,o),s=!1},d(o){o&&T(t),$(r,o)}}}function Gl(n){let e,t,r,s,l;const o=[xl,Ll],a=[];function i(m,f){return m[1]?0:1}return r=i(n),s=a[r]=o[r](n),{c(){e=v("div"),t=v("div"),s.c(),_(t,"class","container svelte-u92h62"),_(e,"class","container-background svelte-u92h62")},m(m,f){P(m,e,f),h(e,t),a[r].m(t,null),l=!0},p(m,[f]){let d=r;r=i(m),r===d?a[r].p(m,f):(V(),S(a[d],1,1,()=>{a[d]=null}),W(),s=a[r],s?s.p(m,f):(s=a[r]=o[r](m),s.c()),w(s,1),s.m(t,null))},i(m){l||(w(s),l=!0)},o(m){S(s),l=!1},d(m){m&&T(e),a[r].d()}}}function Nl(n,e,t){let{content:r}=e,{loaded:s=!1}=e,{isSelected:l=!0}=e,o="",a=-1,i=se();function m(){i("select",{uri:o,type:"select",name:r[a].name})}function f(u,c){t(3,o=u),a=c,m()}const d=(u,c)=>f(u.uri,c);return n.$$set=u=>{"content"in u&&t(0,r=u.content),"loaded"in u&&t(1,s=u.loaded),"isSelected"in u&&t(2,l=u.isSelected)},[r,s,l,o,f,d]}class Ol extends F{constructor(e){super(),j(this,e,Nl,Gl,x,{content:0,loaded:1,isSelected:2})}}function Bl(n){let e;return{c(){e=v("div"),_(e,"class","new-error svelte-1pl3vva")},m(t,r){P(t,e,r)},p:R,i:R,o:R,d(t){t&&T(e)}}}function zl(n){let e,t,r;return t=new N({props:{key:"pregame-urlnotfound"}}),{c(){e=v("span"),M(t.$$.fragment),_(e,"class","new-error svelte-1pl3vva")},m(s,l){P(s,e,l),C(t,e,null),r=!0},p:R,i(s){r||(w(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&T(e),$(t)}}}function Hl(n){let e,t,r;return t=new N({props:{key:"pregame-invalidurl"}}),{c(){e=v("span"),M(t.$$.fragment),_(e,"class","new-error svelte-1pl3vva")},m(s,l){P(s,e,l),C(t,e,null),r=!0},p:R,i(s){r||(w(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&T(e),$(t)}}}function Vl(n){let e,t,r,s,l;const o=[n[3].content,{isSelected:n[0]},{expand:!0}];let a={};for(let i=0;i<o.length;i+=1)a=xe(a,o[i]);return t=new _t({props:a}),{c(){e=v("div"),M(t.$$.fragment),_(e,"class","container-background svelte-1pl3vva")},m(i,m){P(i,e,m),C(t,e,null),r=!0,s||(l=B(e,"click",n[5]),s=!0)},p(i,m){const f=m&9?mt(o,[m&8&&pt(i[3].content),m&1&&{isSelected:i[0]},o[2]]):{};t.$set(f)},i(i){r||(w(t.$$.fragment,i),r=!0)},o(i){S(t.$$.fragment,i),r=!1},d(i){i&&T(e),$(t),s=!1,l()}}}function Wl(n){let e,t,r,s,l,o,a,i,m;const f=[Vl,Hl,zl,Bl],d=[];function u(c,p){return c[2]==="valid"?0:c[2]==="invalid"?1:c[2]==="notfound"?2:c[2]==="empty"?3:-1}return~(l=u(n))&&(o=d[l]=f[l](n)),{c(){e=v("div"),t=v("input"),s=E(),o&&o.c(),_(t,"type","text"),_(t,"placeholder",r=Y(n[4],"pregame-placeholder")),_(t,"class","svelte-1pl3vva"),_(e,"class","other-container svelte-1pl3vva")},m(c,p){P(c,e,p),h(e,t),Me(t,n[1]),h(e,s),~l&&d[l].m(e,null),a=!0,i||(m=B(t,"input",n[6]),i=!0)},p(c,[p]){(!a||p&16&&r!==(r=Y(c[4],"pregame-placeholder")))&&_(t,"placeholder",r),p&2&&t.value!==c[1]&&Me(t,c[1]);let g=l;l=u(c),l===g?~l&&d[l].p(c,p):(o&&(V(),S(d[g],1,1,()=>{d[g]=null}),W()),~l?(o=d[l],o?o.p(c,p):(o=d[l]=f[l](c),o.c()),w(o,1),o.m(e,null)):o=null)},i(c){a||(w(o),a=!0)},o(c){S(o),a=!1},d(c){c&&T(e),~l&&d[l].d(),i=!1,m()}}}function Kl(n,e,t){let r,s;L(n,Re,c=>t(7,r=c)),L(n,oe,c=>t(4,s=c));let l="",{isSelected:o=!1}=e,a="invalid",i={id:null,category:null,content:{uri:"",name:"",image:"",total:0,externUrl:""}},m=se();function f(){t(0,o=!0),m("select",{uri:i.content.uri,type:"new",name:i.content.name})}function d(){if(l===""){t(0,o=!1),t(2,a="empty");return}let c=l.match(/spotify\.com\/(album|playlist)\/(\w{22})/m);c?(console.log(c),t(3,i.category=c[1],i),t(3,i.id=c[2],i),i.category==="album"?r.getAlbum(i.id).then(p=>{t(3,i.content={uri:p.uri,name:p.name,image:p.images[0].url,total:p.tracks.total,externUrl:p.external_urls.spotify},i),t(2,a="valid")}).then(f).catch(()=>{t(0,o=!1),t(2,a="notfound")}):i.category==="playlist"&&r.getPlaylist(i.id,{fields:"uri,name,images,tracks.total,external_urls"}).then(p=>{t(3,i.content={uri:p.uri,name:p.name,image:p.images[0].url,total:p.tracks.total,externUrl:p.external_urls.spotify},i),t(2,a="valid")}).then(f).catch(()=>{t(0,o=!1),t(2,a="notfound")})):(t(0,o=!1),t(2,a="invalid"))}ae(()=>{const p=new URLSearchParams(window.location.search).get("play");if(p){const g=p.match(/(a|p)(\w{22})/m);g&&(t(1,l=Nn(g[1],g[2])),window.history.pushState({},document.title,"/"))}});function u(){l=this.value,t(1,l)}return n.$$set=c=>{"isSelected"in c&&t(0,o=c.isSelected)},n.$$.update=()=>{n.$$.dirty&2&&d()},[o,l,a,i,s,f,u]}class Jl extends F{constructor(e){super(),j(this,e,Kl,Wl,x,{isSelected:0})}}function Yl(n){let e,t,r,s;return r=new N({props:{key:"pregame-play"}}),{c(){e=v("button"),t=v("span"),M(r.$$.fragment),_(t,"class","play svelte-1vnja3i"),_(e,"class","btn-play disabled svelte-1vnja3i")},m(l,o){P(l,e,o),h(e,t),C(r,t,null),s=!0},p:R,i(l){s||(w(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&T(e),$(r)}}}function Xl(n){let e,t,r,s,l,o,a,i,m;return r=new N({props:{key:"pregame-play"}}),{c(){e=v("button"),t=v("span"),M(r.$$.fragment),s=E(),l=v("span"),o=G(n[2]),_(t,"class","play svelte-1vnja3i"),_(l,"class","name svelte-1vnja3i"),_(e,"class","btn-play svelte-1vnja3i"),ye(e,"valid",n[1])},m(f,d){P(f,e,d),h(e,t),C(r,t,null),h(e,s),h(e,l),h(l,o),a=!0,i||(m=B(e,"click",n[3]),i=!0)},p(f,d){(!a||d&4)&&H(o,f[2]),(!a||d&2)&&ye(e,"valid",f[1])},i(f){a||(w(r.$$.fragment,f),a=!0)},o(f){S(r.$$.fragment,f),a=!1},d(f){f&&T(e),$(r),i=!1,m()}}}function Ql(n){let e;return{c(){e=v("button"),e.innerHTML='<img class="loading-icon svelte-1vnja3i" src="/assets/spin.svg" alt="Loading"/>',_(e,"class","btn-play loading svelte-1vnja3i")},m(t,r){P(t,e,r)},p:R,i:R,o:R,d(t){t&&T(e)}}}function Zl(n){let e,t,r,s;const l=[Ql,Xl,Yl],o=[];function a(i,m){return i[0]?0:i[1]?1:2}return e=a(n),t=o[e]=l[e](n),{c(){t.c(),r=ue()},m(i,m){o[e].m(i,m),P(i,r,m),s=!0},p(i,[m]){let f=e;e=a(i),e===f?o[e].p(i,m):(V(),S(o[f],1,1,()=>{o[f]=null}),W(),t=o[e],t?t.p(i,m):(t=o[e]=l[e](i),t.c()),w(t,1),t.m(r.parentNode,r))},i(i){s||(w(t),s=!0)},o(i){S(t),s=!1},d(i){o[e].d(i),i&&T(r)}}}function eo(n,e,t){let{loading:r=!1}=e,{valid:s=!0}=e,{name:l=""}=e;function o(a){te.call(this,n,a)}return n.$$set=a=>{"loading"in a&&t(0,r=a.loading),"valid"in a&&t(1,s=a.valid),"name"in a&&t(2,l=a.name)},[r,s,l,o]}class to extends F{constructor(e){super(),j(this,e,eo,Zl,x,{loading:0,valid:1,name:2})}}function no(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p,g,y,k,b,A,q;return e=new yt({props:{title:n[5].title,quickDescription:n[5].quickDescription,fullDescription:n[5].fullDescription,show:n[5].show}}),e.$on("close",n[8]),o=new N({props:{key:"pregame-choose"}}),i=new Ol({props:{content:n[0],loaded:n[1],isSelected:n[4]==="select"}}),i.$on("select",n[6]),u=new N({props:{key:"pregame-load"}}),p=new Jl({props:{isSelected:n[4]==="new"}}),p.$on("select",n[6]),y=new to({props:{valid:n[2].uri!=="",name:n[2].name,loading:n[3]}}),y.$on("click",n[7]),{c(){M(e.$$.fragment),t=E(),r=v("div"),s=v("div"),l=v("span"),M(o.$$.fragment),a=E(),M(i.$$.fragment),m=E(),f=v("div"),d=v("span"),M(u.$$.fragment),c=E(),M(p.$$.fragment),g=E(),M(y.$$.fragment),_(l,"class","title svelte-1gubw9k"),_(s,"class","pregame-select svelte-1gubw9k"),_(d,"class","title svelte-1gubw9k"),_(f,"class","pregame-new svelte-1gubw9k"),_(r,"class","pregame-screen svelte-1gubw9k")},m(D,I){C(e,D,I),P(D,t,I),P(D,r,I),h(r,s),h(s,l),C(o,l,null),h(s,a),C(i,s,null),h(r,m),h(r,f),h(f,d),C(u,d,null),h(f,c),C(p,f,null),h(r,g),C(y,r,null),b=!0,A||(q=B(r,"outroend",n[11]),A=!0)},p(D,[I]){const U={};I&32&&(U.title=D[5].title),I&32&&(U.quickDescription=D[5].quickDescription),I&32&&(U.fullDescription=D[5].fullDescription),I&32&&(U.show=D[5].show),e.$set(U);const Z={};I&1&&(Z.content=D[0]),I&2&&(Z.loaded=D[1]),I&16&&(Z.isSelected=D[4]==="select"),i.$set(Z);const z={};I&16&&(z.isSelected=D[4]==="new"),p.$set(z);const Q={};I&4&&(Q.valid=D[2].uri!==""),I&4&&(Q.name=D[2].name),I&8&&(Q.loading=D[3]),y.$set(Q)},i(D){b||(w(e.$$.fragment,D),w(o.$$.fragment,D),w(i.$$.fragment,D),w(u.$$.fragment,D),w(p.$$.fragment,D),w(y.$$.fragment,D),J(()=>{b&&(k||(k=ve(r,X,{},!0)),k.run(1))}),b=!0)},o(D){S(e.$$.fragment,D),S(o.$$.fragment,D),S(i.$$.fragment,D),S(u.$$.fragment,D),S(p.$$.fragment,D),S(y.$$.fragment,D),k||(k=ve(r,X,{},!1)),k.run(0),b=!1},d(D){$(e,D),D&&T(t),D&&T(r),$(o),$(i),$(u),$(p),$(y),D&&k&&k.end(),A=!1,q()}}}function ro(n,e,t){let r;L(n,Re,b=>t(12,r=b));let s=[],l=[],o=!1,a={uri:"",name:""},i=!1,m="select",f={title:"",quickDescription:"",fullDescription:"",show:!1,then:""},d=se(),u=[];async function c(){try{let b=await Rl(r);t(9,s=b.filter(A=>A.tracks.total>0)),console.log("Playlists collected: ",s.length)}catch(b){console.log("Error collecting liked playlists: ",b),t(5,f={title:"Error collecting liked playlists",quickDescription:"Spotify couldn't load your liked playlists. Please refresh the page or try again later.",fullDescription:JSON.parse(b.responseText).error.message,show:!0,then:"goBack"})}try{let b=await Ml(r);t(10,l=b.map(A=>({uri:A.album.uri,id:A.album.id,name:A.album.name,images:A.album.images,tracks:{total:A.album.tracks.total},external_urls:{spotify:A.album.external_urls}}))),console.log("Albums collected: ",l.length)}catch(b){console.log("Error collecting liked albums: ",b),t(5,f={title:"Error collecting liked albums",quickDescription:"Spotify couldn't load your liked albums. Please refresh the page or try again later.",fullDescription:JSON.parse(b.responseText).error.message,show:!0,then:"goBack"})}t(1,o=!0)}function p(b){t(2,a={uri:b.detail.uri,name:b.detail.name}),t(4,m=b.detail.type),console.log(a),console.log(m)}function g(){t(3,i=!0),Ul(r,a.uri).then(b=>d("submit",{content:b})).catch(b=>{console.error(b),t(5,f={title:"Invalid Playlist/Album",quickDescription:"The selected playlist/album is invalid. Please select another one.",fullDescription:JSON.parse(b.responseText).error.message,show:!0,then:"goBack"})})}function y(){f.then==="goBack"?(t(5,f.show=!1,f),t(2,a.uri="",a),t(3,i=!1)):f.then==="reset"&&d("reset")}ae(()=>{o||c(),t(5,f.show=!1,f)});function k(b){te.call(this,n,b)}return n.$$.update=()=>{n.$$.dirty&1537&&(t(0,u=[]),u.push(...s),u.push(...l))},[u,o,a,i,m,f,p,g,y,s,l,k]}class so extends F{constructor(e){super(),j(this,e,ro,no,x,{})}}function lo(n){let e,t;return e=new al({props:{gameInfo:n[1]}}),e.$on("newGame",n[2]),e.$on("playAgain",n[3]),e.$on("outroend",n[6]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p(r,s){const l={};s&2&&(l.gameInfo=r[1]),e.$set(l)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function oo(n){let e,t;return e=new so({}),e.$on("reset",n[5]),e.$on("submit",n[3]),e.$on("outroend",n[6]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p:R,i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function io(n){let e,t;return e=new ql({}),e.$on("ready",n[2]),e.$on("reset",n[4]),e.$on("outroend",n[6]),{c(){M(e.$$.fragment)},m(r,s){C(e,r,s),t=!0},p:R,i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function ao(n){let e,t,r,s,l,o;e=new Yn({});const a=[io,oo,lo],i=[];function m(f,d){return f[0]==="landing"?0:f[0]==="pregame"?1:f[0]==="game"?2:-1}return~(r=m(n))&&(s=i[r]=a[r](n)),{c(){M(e.$$.fragment),t=E(),s&&s.c(),l=ue()},m(f,d){C(e,f,d),P(f,t,d),~r&&i[r].m(f,d),P(f,l,d),o=!0},p(f,[d]){let u=r;r=m(f),r===u?~r&&i[r].p(f,d):(s&&(V(),S(i[u],1,1,()=>{i[u]=null}),W()),~r?(s=i[r],s?s.p(f,d):(s=i[r]=a[r](f),s.c()),w(s,1),s.m(l.parentNode,l)):s=null)},i(f){o||(w(e.$$.fragment,f),w(s),o=!0)},o(f){S(e.$$.fragment,f),S(s),o=!1},d(f){$(e,f),f&&T(t),~r&&i[r].d(f),f&&T(l)}}}function uo(n,e,t){let r,s,l,o,a,i;L(n,Pe,b=>t(9,r=b)),L(n,ge,b=>t(10,s=b)),L(n,pe,b=>t(11,l=b)),L(n,we,b=>t(12,o=b)),L(n,ke,b=>t(13,a=b)),L(n,Re,b=>t(14,i=b));let{showFullCopyright:m=!1}=e,f="landing",d=f,u={maxRounds:5,content:{},played:[]};function c(){l&&a&&(i.setAccessToken(a),d="pregame",t(0,f=""))}function p(b){K(we,o=0,o),t(1,u={maxRounds:nn,content:b.detail.content,played:[]}),console.log(u.content),d="game",t(0,f="")}function g(){K(pe,l=null,l),K(ge,s=null,s),K(Pe,r=null,r),y()}function y(){d="landing",t(0,f=d)}function k(){console.log("update"),t(0,f=d)}return n.$$set=b=>{"showFullCopyright"in b&&t(7,m=b.showFullCopyright)},n.$$.update=()=>{n.$$.dirty&1&&t(7,m=f==="landing"),n.$$.dirty&1&&f!=="game"&&jn()},[f,u,c,p,g,y,k,m]}class co extends F{constructor(e){super(),j(this,e,uo,ao,x,{showFullCopyright:7})}}function fo(n){let e,t,r;return{c(){e=v("img"),ee(e.src,t="/assets/language.svg")||_(e,"src",t),_(e,"alt",n[2]),_(e,"class","svelte-ha0tpg")},m(s,l){P(s,e,l)},p(s,l){l&4&&_(e,"alt",s[2])},i(s){r||J(()=>{r=ne(e,X,{duration:200}),r.start()})},o:R,d(s){s&&T(e)}}}function mo(n){let e,t=n[0].toUpperCase()+"",r,s;return{c(){e=v("span"),r=G(t)},m(l,o){P(l,e,o),h(e,r)},p(l,o){o&1&&t!==(t=l[0].toUpperCase()+"")&&H(r,t)},i(l){s||J(()=>{s=ne(e,X,{duration:200}),s.start()})},o:R,d(l){l&&T(e)}}}function po(n){let e,t,r;function s(a,i){return a[1]?mo:fo}let l=s(n),o=l(n);return{c(){e=v("button"),o.c(),_(e,"class","swap-language svelte-ha0tpg")},m(a,i){P(a,e,i),o.m(e,null),t||(r=[B(e,"click",$e(n[3])),B(e,"mouseover",n[4]),B(e,"mouseleave",n[5]),B(e,"focus",n[4]),B(e,"focusout",n[5])],t=!0)},p(a,[i]){l===(l=s(a))&&o?o.p(a,i):(o.d(1),o=l(a),o&&(o.c(),w(o,1),o.m(e,null)))},i(a){w(o)},o:R,d(a){a&&T(e),o.d(),t=!1,ie(r)}}}function go(n,e,t){let r;L(n,oe,f=>t(2,r=f));let s,l=!1;oe.subscribe(f=>{t(0,s=f==="br"?"en":"br")});function o(){K(oe,r=s,r)}const a=()=>{t(1,l=!0)},i=()=>{t(1,l=!1)};function m(){/br\b/.test(navigator.language.toLowerCase())?oe.set("br"):oe.set("en")}return ae(()=>{r===""&&m()}),[s,l,r,o,a,i]}class _o extends F{constructor(e){super(),j(this,e,go,po,x,{})}}function yo(n){let e,t,r,s;return t=new N({props:{key:"authenticated"}}),{c(){e=v("p"),M(t.$$.fragment),r=v("p")},m(l,o){P(l,e,o),C(t,e,null),P(l,r,o),s=!0},p:R,i(l){s||(w(t.$$.fragment,l),s=!0)},o(l){S(t.$$.fragment,l),s=!1},d(l){l&&T(e),$(t),l&&T(r)}}}function ho(n){let e,t,r,s,l,o,a,i,m,f,d,u,c,p,g,y,k;i=new _o({});function b(D){n[3](D)}let A={};n[0]!==void 0&&(A.showFullCopyright=n[0]),d=new co({props:A}),fe.push(()=>De(d,"showFullCopyright",b));let q=n[0]&&Bt();return{c(){e=v("div"),t=v("div"),r=v("img"),l=E(),o=v("a"),o.innerHTML='<img src="/guessify-beta.svg" alt="Guessify Beta" class="svelte-hvrxzr"/>',a=E(),M(i.$$.fragment),m=E(),f=v("div"),M(d.$$.fragment),c=E(),p=v("div"),g=v("div"),g.innerHTML=`Copyright © 2023 Daniel Guimarães
                <a class="icon svelte-hvrxzr" href="https://github.com/Leinadium/guessify"><img class="icon svelte-hvrxzr" src="/assets/github-mark.svg" alt="Github"/></a>`,y=E(),q&&q.c(),_(r,"class","header-logo svelte-hvrxzr"),ee(r.src,s="/guessify-logo-white.svg")||_(r,"src",s),_(r,"alt",""),_(o,"class","header-title svelte-hvrxzr"),_(o,"href","/"),_(t,"class","header svelte-hvrxzr"),_(f,"class","content svelte-hvrxzr"),_(g,"class","footer-copyright svelte-hvrxzr"),_(p,"class","footer svelte-hvrxzr"),re(p,"height",n[1]),_(e,"class","main svelte-hvrxzr")},m(D,I){P(D,e,I),h(e,t),h(t,r),h(t,l),h(t,o),h(t,a),C(i,t,null),h(e,m),h(e,f),C(d,f,null),h(e,c),h(e,p),h(p,g),h(p,y),q&&q.m(p,null),k=!0},p(D,I){const U={};!u&&I&1&&(u=!0,U.showFullCopyright=D[0],Te(()=>u=!1)),d.$set(U),D[0]?q?I&1&&w(q,1):(q=Bt(),q.c(),w(q,1),q.m(p,null)):q&&(V(),S(q,1,1,()=>{q=null}),W()),(!k||I&2)&&re(p,"height",D[1])},i(D){k||(w(i.$$.fragment,D),w(d.$$.fragment,D),w(q),k=!0)},o(D){S(i.$$.fragment,D),S(d.$$.fragment,D),S(q),k=!1},d(D){D&&T(e),$(i),$(d),q&&q.d()}}}function Bt(n){let e,t,r,s,l,o,a,i;return r=new N({props:{key:"copyright-text1"}}),o=new N({props:{key:"copyright-text2"}}),{c(){e=v("div"),t=v("span"),M(r.$$.fragment),s=E(),l=v("span"),M(o.$$.fragment),_(e,"class","footer-description svelte-hvrxzr")},m(m,f){P(m,e,f),h(e,t),C(r,t,null),h(e,s),h(e,l),C(o,l,null),i=!0},i(m){i||(w(r.$$.fragment,m),w(o.$$.fragment,m),a&&a.end(1),i=!0)},o(m){S(r.$$.fragment,m),S(o.$$.fragment,m),a=he(e,X,{}),i=!1},d(m){m&&T(e),$(r),$(o),m&&a&&a.end()}}}function vo(n){let e,t,r,s,l,o;const a=[ho,yo],i=[];function m(f,d){return f[2]?0:1}return r=m(n),s=i[r]=a[r](n),{c(){e=v("link"),t=E(),s.c(),l=ue(),_(e,"href","https://fonts.cdnfonts.com/css/circular-std"),_(e,"rel","stylesheet")},m(f,d){h(document.head,e),P(f,t,d),i[r].m(f,d),P(f,l,d),o=!0},p(f,[d]){s.p(f,d)},i(f){o||(w(s),o=!0)},o(f){S(s),o=!1},d(f){T(e),f&&T(t),i[r].d(f),f&&T(l)}}}function bo(n,e,t){let r;const l=!new URLSearchParams(window.location.search).has("code");let o=!0;function a(i){o=i,t(0,o)}return n.$$.update=()=>{n.$$.dirty&1&&t(1,r=o?"4vh":"2vh")},[o,r,l,a]}class ko extends F{constructor(e){super(),j(this,e,bo,vo,x,{})}}new ko({target:document.getElementById("app")});
