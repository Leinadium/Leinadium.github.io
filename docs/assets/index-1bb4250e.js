(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function P(){}const Me=n=>n;function Ne(n,e){for(const t in e)n[t]=e[t];return n}function Tt(n){return n()}function at(){return Object.create(null)}function ee(n){n.forEach(Tt)}function ge(n){return typeof n=="function"}function F(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Re;function pe(n,e){return Re||(Re=document.createElement("a")),Re.href=e,n===Re.href}function Gt(n){return Object.keys(n).length===0}function Bt(n,...e){if(n==null)return P;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function z(n,e,t){n.$$.on_destroy.push(Bt(e,t))}function W(n,e,t){return n.set(t),e}const Pt=typeof window<"u";let Ke=Pt?()=>window.performance.now():()=>Date.now(),tt=Pt?n=>requestAnimationFrame(n):P;const we=new Set;function Dt(n){we.forEach(e=>{e.c(n)||(we.delete(e),e.f())}),we.size!==0&&tt(Dt)}function We(n){let e;return we.size===0&&tt(Dt),{promise:new Promise(t=>{we.add(e={c:n,f:t})}),abort(){we.delete(e)}}}function h(n,e){n.appendChild(e)}function It(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function Ht(n){const e=b("style");return Vt(It(n),e),e.sheet}function Vt(n,e){return h(n.head||n,e),e.sheet}function T(n,e,t){n.insertBefore(e,t||null)}function S(n){n.parentNode&&n.parentNode.removeChild(n)}function b(n){return document.createElement(n)}function U(n){return document.createTextNode(n)}function E(){return U(" ")}function ue(){return U("")}function x(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function v(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function xt(n){return n===""?null:+n}function Kt(n){return Array.from(n.childNodes)}function K(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function Se(n,e){n.value=e??""}function Q(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function de(n,e,t){n.classList[t?"add":"remove"](e)}function Et(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(n,t,r,e),s}const Fe=new Map;let ze=0;function Wt(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function Jt(n,e){const t={stylesheet:Ht(e),rules:{}};return Fe.set(n,t),t}function Ge(n,e,t,r,s,l,o,i=0){const a=16.666/r;let u=`{
`;for(let g=0;g<=1;g+=a){const y=e+(t-e)*l(g);u+=g*100+`%{${o(y,1-y)}}
`}const f=u+`100% {${o(t,1-t)}}
}`,m=`__svelte_${Wt(f)}_${i}`,c=It(n),{stylesheet:d,rules:p}=Fe.get(c)||Jt(c,n);p[m]||(p[m]=!0,d.insertRule(`@keyframes ${m} ${f}`,d.cssRules.length));const _=n.style.animation||"";return n.style.animation=`${_?`${_}, `:""}${m} ${r}ms linear ${s}ms 1 both`,ze+=1,m}function Be(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),s=t.length-r.length;s&&(n.style.animation=r.join(", "),ze-=s,ze||Yt())}function Yt(){tt(()=>{ze||(Fe.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&S(e)}),Fe.clear())})}let Ce;function Ae(n){Ce=n}function nt(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function ie(n){nt().$$.on_mount.push(n)}function Je(n){nt().$$.on_destroy.push(n)}function Y(){const n=nt();return(e,t,{cancelable:r=!1}={})=>{const s=n.$$.callbacks[e];if(s){const l=Et(e,t,{cancelable:r});return s.slice().forEach(o=>{o.call(n,l)}),!l.defaultPrevented}return!0}}function ne(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const ke=[],le=[],Le=[],Xe=[],Xt=Promise.resolve();let Qe=!1;function Qt(){Qe||(Qe=!0,Xt.then(qt))}function J(n){Le.push(n)}function Te(n){Xe.push(n)}const Ye=new Set;let ve=0;function qt(){if(ve!==0)return;const n=Ce;do{try{for(;ve<ke.length;){const e=ke[ve];ve++,Ae(e),Zt(e.$$)}}catch(e){throw ke.length=0,ve=0,e}for(Ae(null),ke.length=0,ve=0;le.length;)le.pop()();for(let e=0;e<Le.length;e+=1){const t=Le[e];Ye.has(t)||(Ye.add(t),t())}Le.length=0}while(ke.length);for(;Xe.length;)Xe.pop()();Qe=!1,Ye.clear(),Ae(n)}function Zt(n){if(n.fragment!==null){n.update(),ee(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(J)}}let qe;function rt(){return qe||(qe=Promise.resolve(),qe.then(()=>{qe=null})),qe}function me(n,e,t){n.dispatchEvent(Et(`${e?"intro":"outro"}${t}`))}const je=new Set;let se;function Z(){se={r:0,c:[],p:se}}function $(){se.r||ee(se.c),se=se.p}function D(n,e){n&&n.i&&(je.delete(n),n.i(e))}function A(n,e,t,r){if(n&&n.o){if(je.has(n))return;je.add(n),se.c.push(()=>{je.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const st={duration:0};function oe(n,e,t){const r={direction:"in"};let s=e(n,t,r),l=!1,o,i,a=0;function u(){o&&Be(n,o)}function f(){const{delay:c=0,duration:d=300,easing:p=Me,tick:_=P,css:g}=s||st;g&&(o=Ge(n,0,1,d,c,p,g,a++)),_(0,1);const y=Ke()+c,k=y+d;i&&i.abort(),l=!0,J(()=>me(n,!0,"start")),i=We(w=>{if(l){if(w>=k)return _(1,0),me(n,!0,"end"),u(),l=!1;if(w>=y){const I=p((w-y)/d);_(I,1-I)}}return l})}let m=!1;return{start(){m||(m=!0,Be(n),ge(s)?(s=s(r),rt().then(f)):f())},invalidate(){m=!1},end(){l&&(u(),l=!1)}}}function Pe(n,e,t){const r={direction:"out"};let s=e(n,t,r),l=!0,o;const i=se;i.r+=1;function a(){const{delay:u=0,duration:f=300,easing:m=Me,tick:c=P,css:d}=s||st;d&&(o=Ge(n,1,0,f,u,m,d));const p=Ke()+u,_=p+f;J(()=>me(n,!1,"start")),We(g=>{if(l){if(g>=_)return c(0,1),me(n,!1,"end"),--i.r||ee(i.c),!1;if(g>=p){const y=m((g-p)/f);c(1-y,y)}}return l})}return ge(s)?rt().then(()=>{s=s(r),a()}):a(),{end(u){u&&s.tick&&s.tick(1,0),l&&(o&&Be(n,o),l=!1)}}}function De(n,e,t,r){const s={direction:"both"};let l=e(n,t,s),o=r?0:1,i=null,a=null,u=null;function f(){u&&Be(n,u)}function m(d,p){const _=d.b-o;return p*=Math.abs(_),{a:o,b:d.b,d:_,duration:p,start:d.start,end:d.start+p,group:d.group}}function c(d){const{delay:p=0,duration:_=300,easing:g=Me,tick:y=P,css:k}=l||st,w={start:Ke()+p,b:d};d||(w.group=se,se.r+=1),i||a?a=w:(k&&(f(),u=Ge(n,o,d,_,p,g,k)),d&&y(0,1),i=m(w,_),J(()=>me(n,d,"start")),We(I=>{if(a&&I>a.start&&(i=m(a,_),a=null,me(n,i.b,"start"),k&&(f(),u=Ge(n,o,i.b,i.duration,0,g,l.css))),i){if(I>=i.end)y(o=i.b,1-o),me(n,i.b,"end"),a||(i.b?f():--i.group.r||ee(i.group.c)),i=null;else if(I>=i.start){const C=I-i.start;o=i.a+i.d*g(C/i.duration),y(o,1-o)}}return!!(i||a)}))}return{run(d){ge(l)?rt().then(()=>{l=l(s),c(d)}):c(d)},end(){f(),i=a=null}}}function At(n,e){A(n,1,1,()=>{e.delete(n.key)})}function Ct(n,e,t,r,s,l,o,i,a,u,f,m){let c=n.length,d=l.length,p=c;const _={};for(;p--;)_[n[p].key]=p;const g=[],y=new Map,k=new Map;for(p=d;p--;){const q=m(s,l,p),L=t(q);let R=o.get(L);R?r&&R.p(q,e):(R=u(L,q),R.c()),y.set(L,g[p]=R),L in _&&k.set(L,Math.abs(p-_[L]))}const w=new Set,I=new Set;function C(q){D(q,1),q.m(i,f),o.set(q.key,q),f=q.first,d--}for(;c&&d;){const q=g[d-1],L=n[c-1],R=q.key,V=L.key;q===L?(f=q.first,c--,d--):y.has(V)?!o.has(R)||w.has(R)?C(q):I.has(V)?c--:k.get(R)>k.get(V)?(I.add(R),C(q)):(w.add(V),c--):(a(L,o),c--)}for(;c--;){const q=n[c];y.has(q.key)||a(q,o)}for(;d;)C(g[d-1]);return g}function Mt(n,e){const t={},r={},s={$$scope:1};let l=n.length;for(;l--;){const o=n[l],i=e[l];if(i){for(const a in o)a in i||(r[a]=1);for(const a in i)s[a]||(t[a]=i[a],s[a]=1);n[l]=i}else for(const a in o)s[a]=1}for(const o in r)o in t||(t[o]=void 0);return t}function Rt(n){return typeof n=="object"&&n!==null?n:{}}function Ie(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function N(n){n&&n.c()}function j(n,e,t,r){const{fragment:s,after_update:l}=n.$$;s&&s.m(e,t),r||J(()=>{const o=n.$$.on_mount.map(Tt).filter(ge);n.$$.on_destroy?n.$$.on_destroy.push(...o):ee(o),n.$$.on_mount=[]}),l.forEach(J)}function O(n,e){const t=n.$$;t.fragment!==null&&(ee(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function $t(n,e){n.$$.dirty[0]===-1&&(ke.push(n),Qt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function G(n,e,t,r,s,l,o,i=[-1]){const a=Ce;Ae(n);const u=n.$$={fragment:null,ctx:[],props:l,update:P,not_equal:s,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:at(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};o&&o(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(m,c,...d)=>{const p=d.length?d[0]:c;return u.ctx&&s(u.ctx[m],u.ctx[m]=p)&&(!u.skip_bound&&u.bound[m]&&u.bound[m](p),f&&$t(n,m)),c}):[],u.update(),f=!0,ee(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const m=Kt(e.target);u.fragment&&u.fragment.l(m),m.forEach(S)}else u.fragment&&u.fragment.c();e.intro&&D(n.$$.fragment),j(n,e.target,e.anchor,e.customElement),qt()}Ae(a)}class B{$destroy(){O(this,1),this.$destroy=P}$on(e,t){if(!ge(t))return P;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const be=[];function fe(n,e=P){let t;const r=new Set;function s(i){if(F(n,i)&&(n=i,t)){const a=!be.length;for(const u of r)u[1](),be.push(u,n);if(a){for(let u=0;u<be.length;u+=2)be[u][0](be[u+1]);be.length=0}}}function l(i){s(i(n))}function o(i,a=P){const u=[i,a];return r.add(u),r.size===1&&(t=e(s)||P),i(n),()=>{r.delete(u),r.size===0&&(t(),t=null)}}return{set:s,update:l,subscribe:o}}const lt="http://localhost:5000",en="http://localhost:5173",tn=`${lt}/auth`,nn=en,rn=`${lt}/get_refresh`,sn=`${lt}/get_access`,Ut="refresh",Lt="volume",jt=5;function He(n){const e=n.length;return e>0?n[e-1].url:null}var Ze={},ln={get exports(){return Ze},set exports(n){Ze=n}};(function(n){var e=function(){var t="https://api.spotify.com/v1",r=null,s=null,l=function(c,d){return c.abort=d,c},o=function(c,d){var p;if(s!==null){var _=s.defer();c(function(g){_.resolve(g)},function(g){_.reject(g)}),p=_.promise}else window.Promise&&(p=new window.Promise(c));return p?new l(p,d):null},i=function(){var c=Array.prototype.slice.call(arguments),d=c[0],p=c.slice(1);return d=d||{},p.forEach(function(_){for(var g in _)_.hasOwnProperty(g)&&(d[g]=_[g])}),d},a=function(c,d){var p="";for(var _ in d)if(d.hasOwnProperty(_)){var g=d[_];p+=encodeURIComponent(_)+"="+encodeURIComponent(g)+"&"}return p.length>0&&(p=p.substring(0,p.length-1),c=c+"?"+p),c},u=function(c,d){var p=new XMLHttpRequest,_=function(g,y){function k(q){g&&g(q),d&&d(null,q)}function w(){y&&y(p),d&&d(p,null)}var I=c.type||"GET";if(p.open(I,a(c.url,c.params)),r&&p.setRequestHeader("Authorization","Bearer "+r),p.onreadystatechange=function(){if(p.readyState===4){var q=null;try{q=p.responseText?JSON.parse(p.responseText):""}catch(L){console.error(L)}p.status>=200&&p.status<300?k(q):w()}},I==="GET")p.send(null);else{var C=null;c.postData&&(c.contentType==="image/jpeg"?(C=c.postData,p.setRequestHeader("Content-Type",c.contentType)):(C=JSON.stringify(c.postData),p.setRequestHeader("Content-Type","application/json"))),p.send(C)}};return d?(_(),null):o(_,function(){p.abort()})},f=function(c,d,p,_){var g={},y=null;typeof d=="object"?(g=d,y=p):typeof d=="function"&&(y=d);var k=c.type||"GET";return k!=="GET"&&c.postData&&!_?c.postData=i(c.postData,g):c.params=i(c.params,g),u(c,y)},m=function(){};return m.prototype={constructor:e},m.prototype.getGeneric=function(c,d){var p={url:c};return f(p,d)},m.prototype.getMe=function(c,d){var p={url:t+"/me"};return f(p,c,d)},m.prototype.getMySavedTracks=function(c,d){var p={url:t+"/me/tracks"};return f(p,c,d)},m.prototype.addToMySavedTracks=function(c,d,p){var _={url:t+"/me/tracks",type:"PUT",postData:c};return f(_,d,p)},m.prototype.removeFromMySavedTracks=function(c,d,p){var _={url:t+"/me/tracks",type:"DELETE",postData:c};return f(_,d,p)},m.prototype.containsMySavedTracks=function(c,d,p){var _={url:t+"/me/tracks/contains",params:{ids:c.join(",")}};return f(_,d,p)},m.prototype.getMySavedAlbums=function(c,d){var p={url:t+"/me/albums"};return f(p,c,d)},m.prototype.addToMySavedAlbums=function(c,d,p){var _={url:t+"/me/albums",type:"PUT",postData:c};return f(_,d,p)},m.prototype.removeFromMySavedAlbums=function(c,d,p){var _={url:t+"/me/albums",type:"DELETE",postData:c};return f(_,d,p)},m.prototype.containsMySavedAlbums=function(c,d,p){var _={url:t+"/me/albums/contains",params:{ids:c.join(",")}};return f(_,d,p)},m.prototype.getMyTopArtists=function(c,d){var p={url:t+"/me/top/artists"};return f(p,c,d)},m.prototype.getMyTopTracks=function(c,d){var p={url:t+"/me/top/tracks"};return f(p,c,d)},m.prototype.getMyRecentlyPlayedTracks=function(c,d){var p={url:t+"/me/player/recently-played"};return f(p,c,d)},m.prototype.followUsers=function(c,d){var p={url:t+"/me/following/",type:"PUT",params:{ids:c.join(","),type:"user"}};return f(p,d)},m.prototype.followArtists=function(c,d){var p={url:t+"/me/following/",type:"PUT",params:{ids:c.join(","),type:"artist"}};return f(p,d)},m.prototype.followPlaylist=function(c,d,p){var _={url:t+"/playlists/"+c+"/followers",type:"PUT",postData:{}};return f(_,d,p)},m.prototype.unfollowUsers=function(c,d){var p={url:t+"/me/following/",type:"DELETE",params:{ids:c.join(","),type:"user"}};return f(p,d)},m.prototype.unfollowArtists=function(c,d){var p={url:t+"/me/following/",type:"DELETE",params:{ids:c.join(","),type:"artist"}};return f(p,d)},m.prototype.unfollowPlaylist=function(c,d){var p={url:t+"/playlists/"+c+"/followers",type:"DELETE"};return f(p,d)},m.prototype.isFollowingUsers=function(c,d){var p={url:t+"/me/following/contains",type:"GET",params:{ids:c.join(","),type:"user"}};return f(p,d)},m.prototype.isFollowingArtists=function(c,d){var p={url:t+"/me/following/contains",type:"GET",params:{ids:c.join(","),type:"artist"}};return f(p,d)},m.prototype.areFollowingPlaylist=function(c,d,p){var _={url:t+"/playlists/"+c+"/followers/contains",type:"GET",params:{ids:d.join(",")}};return f(_,p)},m.prototype.getFollowedArtists=function(c,d){var p={url:t+"/me/following",type:"GET",params:{type:"artist"}};return f(p,c,d)},m.prototype.getUser=function(c,d,p){var _={url:t+"/users/"+encodeURIComponent(c)};return f(_,d,p)},m.prototype.getUserPlaylists=function(c,d,p){var _;return typeof c=="string"?_={url:t+"/users/"+encodeURIComponent(c)+"/playlists"}:(_={url:t+"/me/playlists"},p=d,d=c),f(_,d,p)},m.prototype.getPlaylist=function(c,d,p){var _={url:t+"/playlists/"+c};return f(_,d,p)},m.prototype.getPlaylistTracks=function(c,d,p){var _={url:t+"/playlists/"+c+"/tracks"};return f(_,d,p)},m.prototype.getPlaylistCoverImage=function(c,d){var p={url:t+"/playlists/"+c+"/images"};return f(p,d)},m.prototype.createPlaylist=function(c,d,p){var _={url:t+"/users/"+encodeURIComponent(c)+"/playlists",type:"POST",postData:d};return f(_,d,p)},m.prototype.changePlaylistDetails=function(c,d,p){var _={url:t+"/playlists/"+c,type:"PUT",postData:d};return f(_,d,p)},m.prototype.addTracksToPlaylist=function(c,d,p,_){var g={url:t+"/playlists/"+c+"/tracks",type:"POST",postData:{uris:d}};return f(g,p,_,!0)},m.prototype.replaceTracksInPlaylist=function(c,d,p){var _={url:t+"/playlists/"+c+"/tracks",type:"PUT",postData:{uris:d}};return f(_,{},p)},m.prototype.reorderTracksInPlaylist=function(c,d,p,_,g){var y={url:t+"/playlists/"+c+"/tracks",type:"PUT",postData:{range_start:d,insert_before:p}};return f(y,_,g)},m.prototype.removeTracksFromPlaylist=function(c,d,p){var _=d.map(function(y){return typeof y=="string"?{uri:y}:y}),g={url:t+"/playlists/"+c+"/tracks",type:"DELETE",postData:{tracks:_}};return f(g,{},p)},m.prototype.removeTracksFromPlaylistWithSnapshotId=function(c,d,p,_){var g=d.map(function(k){return typeof k=="string"?{uri:k}:k}),y={url:t+"/playlists/"+c+"/tracks",type:"DELETE",postData:{tracks:g,snapshot_id:p}};return f(y,{},_)},m.prototype.removeTracksFromPlaylistInPositions=function(c,d,p,_){var g={url:t+"/playlists/"+c+"/tracks",type:"DELETE",postData:{positions:d,snapshot_id:p}};return f(g,{},_)},m.prototype.uploadCustomPlaylistCoverImage=function(c,d,p){var _={url:t+"/playlists/"+c+"/images",type:"PUT",postData:d.replace(/^data:image\/jpeg;base64,/,""),contentType:"image/jpeg"};return f(_,{},p)},m.prototype.getAlbum=function(c,d,p){var _={url:t+"/albums/"+c};return f(_,d,p)},m.prototype.getAlbumTracks=function(c,d,p){var _={url:t+"/albums/"+c+"/tracks"};return f(_,d,p)},m.prototype.getAlbums=function(c,d,p){var _={url:t+"/albums/",params:{ids:c.join(",")}};return f(_,d,p)},m.prototype.getTrack=function(c,d,p){var _={};return _.url=t+"/tracks/"+c,f(_,d,p)},m.prototype.getTracks=function(c,d,p){var _={url:t+"/tracks/",params:{ids:c.join(",")}};return f(_,d,p)},m.prototype.getArtist=function(c,d,p){var _={url:t+"/artists/"+c};return f(_,d,p)},m.prototype.getArtists=function(c,d,p){var _={url:t+"/artists/",params:{ids:c.join(",")}};return f(_,d,p)},m.prototype.getArtistAlbums=function(c,d,p){var _={url:t+"/artists/"+c+"/albums"};return f(_,d,p)},m.prototype.getArtistTopTracks=function(c,d,p,_){var g={url:t+"/artists/"+c+"/top-tracks",params:{country:d}};return f(g,p,_)},m.prototype.getArtistRelatedArtists=function(c,d,p){var _={url:t+"/artists/"+c+"/related-artists"};return f(_,d,p)},m.prototype.getFeaturedPlaylists=function(c,d){var p={url:t+"/browse/featured-playlists"};return f(p,c,d)},m.prototype.getNewReleases=function(c,d){var p={url:t+"/browse/new-releases"};return f(p,c,d)},m.prototype.getCategories=function(c,d){var p={url:t+"/browse/categories"};return f(p,c,d)},m.prototype.getCategory=function(c,d,p){var _={url:t+"/browse/categories/"+c};return f(_,d,p)},m.prototype.getCategoryPlaylists=function(c,d,p){var _={url:t+"/browse/categories/"+c+"/playlists"};return f(_,d,p)},m.prototype.search=function(c,d,p,_){var g={url:t+"/search/",params:{q:c,type:d.join(",")}};return f(g,p,_)},m.prototype.searchAlbums=function(c,d,p){return this.search(c,["album"],d,p)},m.prototype.searchArtists=function(c,d,p){return this.search(c,["artist"],d,p)},m.prototype.searchTracks=function(c,d,p){return this.search(c,["track"],d,p)},m.prototype.searchPlaylists=function(c,d,p){return this.search(c,["playlist"],d,p)},m.prototype.searchShows=function(c,d,p){return this.search(c,["show"],d,p)},m.prototype.searchEpisodes=function(c,d,p){return this.search(c,["episode"],d,p)},m.prototype.getAudioFeaturesForTrack=function(c,d){var p={};return p.url=t+"/audio-features/"+c,f(p,{},d)},m.prototype.getAudioFeaturesForTracks=function(c,d){var p={url:t+"/audio-features",params:{ids:c}};return f(p,{},d)},m.prototype.getAudioAnalysisForTrack=function(c,d){var p={};return p.url=t+"/audio-analysis/"+c,f(p,{},d)},m.prototype.getRecommendations=function(c,d){var p={url:t+"/recommendations"};return f(p,c,d)},m.prototype.getAvailableGenreSeeds=function(c){var d={url:t+"/recommendations/available-genre-seeds"};return f(d,{},c)},m.prototype.getMyDevices=function(c){var d={url:t+"/me/player/devices"};return f(d,{},c)},m.prototype.getMyCurrentPlaybackState=function(c,d){var p={url:t+"/me/player"};return f(p,c,d)},m.prototype.getMyCurrentPlayingTrack=function(c,d){var p={url:t+"/me/player/currently-playing"};return f(p,c,d)},m.prototype.transferMyPlayback=function(c,d,p){var _=d||{};_.device_ids=c;var g={type:"PUT",url:t+"/me/player",postData:_};return f(g,d,p)},m.prototype.play=function(c,d){c=c||{};var p="device_id"in c?{device_id:c.device_id}:null,_={};["context_uri","uris","offset","position_ms"].forEach(function(k){k in c&&(_[k]=c[k])});var g={type:"PUT",url:t+"/me/player/play",params:p,postData:_},y=typeof c=="function"?c:{};return f(g,y,d)},m.prototype.queue=function(c,d,p){d=d||{};var _="device_id"in d?{uri:c,device_id:d.device_id}:{uri:c},g={type:"POST",url:t+"/me/player/queue",params:_};return f(g,d,p)},m.prototype.pause=function(c,d){c=c||{};var p="device_id"in c?{device_id:c.device_id}:null,_={type:"PUT",url:t+"/me/player/pause",params:p};return f(_,c,d)},m.prototype.skipToNext=function(c,d){c=c||{};var p="device_id"in c?{device_id:c.device_id}:null,_={type:"POST",url:t+"/me/player/next",params:p};return f(_,c,d)},m.prototype.skipToPrevious=function(c,d){c=c||{};var p="device_id"in c?{device_id:c.device_id}:null,_={type:"POST",url:t+"/me/player/previous",params:p};return f(_,c,d)},m.prototype.seek=function(c,d,p){d=d||{};var _={position_ms:c};"device_id"in d&&(_.device_id=d.device_id);var g={type:"PUT",url:t+"/me/player/seek",params:_};return f(g,d,p)},m.prototype.setRepeat=function(c,d,p){d=d||{};var _={state:c};"device_id"in d&&(_.device_id=d.device_id);var g={type:"PUT",url:t+"/me/player/repeat",params:_};return f(g,d,p)},m.prototype.setVolume=function(c,d,p){d=d||{};var _={volume_percent:c};"device_id"in d&&(_.device_id=d.device_id);var g={type:"PUT",url:t+"/me/player/volume",params:_};return f(g,d,p)},m.prototype.setShuffle=function(c,d,p){d=d||{};var _={state:c};"device_id"in d&&(_.device_id=d.device_id);var g={type:"PUT",url:t+"/me/player/shuffle",params:_};return f(g,d,p)},m.prototype.getShow=function(c,d,p){var _={};return _.url=t+"/shows/"+c,f(_,d,p)},m.prototype.getShows=function(c,d,p){var _={url:t+"/shows/",params:{ids:c.join(",")}};return f(_,d,p)},m.prototype.getMySavedShows=function(c,d){var p={url:t+"/me/shows"};return f(p,c,d)},m.prototype.addToMySavedShows=function(c,d,p){var _={url:t+"/me/shows",type:"PUT",postData:c};return f(_,d,p)},m.prototype.removeFromMySavedShows=function(c,d,p){var _={url:t+"/me/shows",type:"DELETE",postData:c};return f(_,d,p)},m.prototype.containsMySavedShows=function(c,d,p){var _={url:t+"/me/shows/contains",params:{ids:c.join(",")}};return f(_,d,p)},m.prototype.getShowEpisodes=function(c,d,p){var _={url:t+"/shows/"+c+"/episodes"};return f(_,d,p)},m.prototype.getEpisode=function(c,d,p){var _={};return _.url=t+"/episodes/"+c,f(_,d,p)},m.prototype.getEpisodes=function(c,d,p){var _={url:t+"/episodes/",params:{ids:c.join(",")}};return f(_,d,p)},m.prototype.getAccessToken=function(){return r},m.prototype.setAccessToken=function(c){r=c},m.prototype.setPromiseImplementation=function(c){var d=!1;try{var p=new c(function(_){_()});typeof p.then=="function"&&typeof p.catch=="function"&&(d=!0)}catch(_){console.error(_)}if(d)s=c;else throw new Error("Unsupported implementation of Promises/A+")},m}();n.exports=e})(ln);const on=Ze,ye=fe(!1),Ee=fe(new on),an=localStorage.getItem(Ut),re=fe(an);re.subscribe(n=>localStorage.setItem(Ut,n));const _e=fe(null),he=fe(!1),ae=fe(null),$e=fe(0),un=parseFloat(localStorage.getItem(Lt))||.7,Ve=fe(un);Ve.subscribe(n=>localStorage.setItem(Lt,n.toString()));function cn(n){let e;return{c(){e=b("div"),v(e,"class","load-auth")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function fn(n,e,t){let r,s,l,o,i;z(n,ae,f=>t(0,r=f)),z(n,he,f=>t(1,s=f)),z(n,re,f=>t(2,l=f)),z(n,_e,f=>t(3,o=f)),z(n,Ee,f=>t(4,i=f));async function a(f){return i.setAccessToken(f),await i.getMe().then(c=>(W(ae,r=c.display_name||c.id,r),!0)).catch(()=>!1)}async function u(){o&&l&&(await a(o)||(W(_e,o=null,o),W(ae,r=null,r))),!o&&l&&await fetch(sn+`/${l}`).then(f=>f.json()).then(f=>{f.access_token?(W(_e,o=f.access_token,o),W(re,l=f.refresh_token||l,l)):W(re,l=null,l)}).catch(()=>{W(re,l=null,l)}),o&&!r&&(await a(o)||(W(re,l=null,l),W(ae,r=null,r))),W(he,s=!!r,s)}return ie(u),[]}class dn extends B{constructor(e){super(),G(this,e,fn,cn,F,{})}}function pn(n){let e,t;return{c(){e=b("script"),pe(e.src,t=mn)||v(e,"src",t)},m(r,s){h(document.head,e),n[3](e)},p:P,i:P,o:P,d(r){S(e),n[3](null)}}}const mn="https://sdk.scdn.co/spotify-player.js";function _n(n,e,t){let r;z(n,_e,u=>t(4,r=u));let{spotifyPlayer:s=void 0}=e,{deviceId:l=void 0}=e;const o=Y();let i;window.onSpotifyWebPlaybackSDKReady=()=>{s===void 0&&(t(1,s=new window.Spotify.Player({name:"Guessify Player #"+Math.floor(Math.random()*1e6),getOAuthToken:u=>{u(r)},volume:.7})),s.addListener("ready",u=>{t(2,l=u.device_id),console.log("Ready with device id: ",l),o("ready",{})}),s.addListener("not_ready",u=>{console.log("Device id is not ready: ",u.device_id),o("notReady",{})}),s.addListener("player_state_changed",u=>{console.log("Player state has changed"),o("state",u)}),s.on("initialization_error",({message:u})=>{console.error("Initialization error"),o("error",{text:`Error at Spotify Player SDK. Does your browser support EME protection?
: `+u})}),s.on("authentication_error",({message:u})=>{console.error("Authentication error"),o("error",{text:"Failed to authenticate with Spotify: "+u})}),s.on("account_error",({message:u})=>{console.error("Account error"),o("error",{text:`Failed to validate Spotify account. Guessify only supports Spotify Premium accounts
`+u})}),s.on("playback_error",({message:u})=>{console.error("playback error"),o("error",{text:"Failed to perform playback: "+u})}),s.connect())},ie(()=>{if(window&&typeof window.onSpotifyWebPlaybackSDKReady<"u")return o("loaded",{});i.addEventListener("load",()=>{console.log("load event from script"),o("loaded",{})}),i.addEventListener("error",u=>{console.error("something went wrong",u),o("error",{text:"Error loading Spotify Player SDK"})})}),Je(()=>{s!=null&&(console.log("Disconnecting"),s.disconnect())});function a(u){le[u?"unshift":"push"](()=>{i=u,t(0,i)})}return n.$$set=u=>{"spotifyPlayer"in u&&t(1,s=u.spotifyPlayer),"deviceId"in u&&t(2,l=u.deviceId)},[i,s,l,a]}class gn extends B{constructor(e){super(),G(this,e,_n,pn,F,{spotifyPlayer:1,deviceId:2})}}function yn(n){let e,t,r,s,l,o,i;return{c(){e=b("div"),t=b("img"),s=E(),l=b("input"),pe(t.src,r="/assets/volume.svg")||v(t,"src",r),v(t,"alt","Volume"),v(t,"class","svelte-1n2yx4a"),v(l,"id","volume-slider"),v(l,"type","range"),v(l,"min","0"),v(l,"max","100"),Q(l,"background-size",n[0]+"% 100%"),v(l,"class","svelte-1n2yx4a"),v(e,"class","volume svelte-1n2yx4a")},m(a,u){T(a,e,u),h(e,t),h(e,s),h(e,l),Se(l,n[0]),o||(i=[x(l,"change",n[1]),x(l,"input",n[1])],o=!0)},p(a,[u]){u&1&&Q(l,"background-size",a[0]+"% 100%"),u&1&&Se(l,a[0])},i:P,o:P,d(a){a&&S(e),o=!1,ee(i)}}}function hn(n,e,t){let r;z(n,Ve,o=>t(2,r=o));let s=r*100;function l(){s=xt(this.value),t(0,s)}return n.$$.update=()=>{n.$$.dirty&1&&W(Ve,r=s/100,r)},[s,l]}class vn extends B{constructor(e){super(),G(this,e,hn,yn,F,{})}}function bn(n){let e,t,r,s,l,o;return{c(){e=b("a"),t=b("spam"),r=U(n[1]),s=E(),l=b("img"),v(t,"class","svelte-4pkvbh"),v(l,"class","open-in-logo svelte-4pkvbh"),pe(l.src,o="/assets/spotify-logo-green.png")||v(l,"src",o),v(l,"alt","Spotify logo"),v(e,"href",n[0]),v(e,"class","extern svelte-4pkvbh")},m(i,a){T(i,e,a),h(e,t),h(t,r),h(e,s),h(e,l)},p(i,[a]){a&2&&K(r,i[1]),a&1&&v(e,"href",i[0])},i:P,o:P,d(i){i&&S(e)}}}function kn(n,e,t){let{externUrl:r="https://open.spotify.com"}=e,{text:s="Open in"}=e;return n.$$set=l=>{"externUrl"in l&&t(0,r=l.externUrl),"text"in l&&t(1,s=l.text)},[r,s]}class Ot extends B{constructor(e){super(),G(this,e,kn,bn,F,{externUrl:0,text:1})}}function wn(n){let e,t,r,s,l,o,i,a,u,f,m,c,d,p,_;return p=new Ot({props:{externUrl:"https://open.spotify.com/",text:"Powered by"}}),{c(){e=b("spam"),t=U("Now playing from: "),r=b("spam"),s=U(n[0]),l=E(),o=b("div"),i=b("spam"),a=U(n[2]),u=E(),f=b("div"),m=b("div"),c=E(),d=b("div"),N(p.$$.fragment),v(r,"class","content-name svelte-1hd7vbs"),v(e,"class","now-playing svelte-1hd7vbs"),v(i,"class","current-time svelte-1hd7vbs"),v(m,"class","progress-bar svelte-1hd7vbs"),Q(m,"width",n[1]/n[3]*100+"%"),v(f,"class","progress-player svelte-1hd7vbs"),v(o,"class","progress svelte-1hd7vbs"),v(d,"class","powered-by svelte-1hd7vbs")},m(g,y){T(g,e,y),h(e,t),h(e,r),h(r,s),T(g,l,y),T(g,o,y),h(o,i),h(i,a),h(o,u),h(o,f),h(f,m),T(g,c,y),T(g,d,y),j(p,d,null),_=!0},p(g,[y]){(!_||y&1)&&K(s,g[0]),(!_||y&4)&&K(a,g[2]),(!_||y&10)&&Q(m,"width",g[1]/g[3]*100+"%")},i(g){_||(D(p.$$.fragment,g),_=!0)},o(g){A(p.$$.fragment,g),_=!1},d(g){g&&S(e),g&&S(l),g&&S(o),g&&S(c),g&&S(d),O(p)}}}function Sn(n,e,t){let r,s,l,{currentMillis:o=0}=e,{maxMillis:i=1e3}=e,{contentName:a="Daily Mix #1"}=e;return n.$$set=u=>{"currentMillis"in u&&t(4,o=u.currentMillis),"maxMillis"in u&&t(5,i=u.maxMillis),"contentName"in u&&t(0,a=u.contentName)},n.$$.update=()=>{n.$$.dirty&16&&t(1,r=o>0?o:0),n.$$.dirty&32&&t(3,s=i>0?i:1e3),n.$$.dirty&2&&t(2,l=new Date(r).toISOString().substring(14,19))},[a,r,l,s,o,i]}class Tn extends B{constructor(e){super(),G(this,e,Sn,wn,F,{currentMillis:4,maxMillis:5,contentName:0})}}function Pn(n){let e,t;return{c(){e=b("img"),pe(e.src,t="/assets/play.svg")||v(e,"src",t),v(e,"alt","Play"),v(e,"class","svelte-fib944")},m(r,s){T(r,e,s)},d(r){r&&S(e)}}}function Dn(n){let e,t;return{c(){e=b("img"),pe(e.src,t="/assets/pause.svg")||v(e,"src",t),v(e,"alt","Pause"),v(e,"class","svelte-fib944")},m(r,s){T(r,e,s)},d(r){r&&S(e)}}}function In(n){let e,t,r,s,l,o;function i(f,m){return f[0]?Dn:Pn}let a=i(n),u=a(n);return{c(){e=b("div"),t=b("button"),t.innerHTML='<img src="/assets/skip.svg" alt="Skip" class="svelte-fib944"/>',r=E(),s=b("button"),u.c(),v(t,"class","svelte-fib944"),v(s,"class","svelte-fib944"),v(e,"class","buttons svelte-fib944")},m(f,m){T(f,e,m),h(e,t),h(e,r),h(e,s),u.m(s,null),l||(o=[x(t,"click",n[2]),x(s,"click",n[1])],l=!0)},p(f,[m]){a!==(a=i(f))&&(u.d(1),u=a(f),u&&(u.c(),u.m(s,null)))},i:P,o:P,d(f){f&&S(e),u.d(),l=!1,ee(o)}}}function En(n,e,t){let r;z(n,ye,i=>t(0,r=i));let s=Y();function l(){s("toggle")}function o(){s("skip")}return[r,l,o]}class qn extends B{constructor(e){super(),G(this,e,En,In,F,{})}}function An(n){let e,t,r,s,l,o,i;return t=new qn({}),t.$on("toggle",n[2]),t.$on("skip",n[3]),s=new Tn({props:{currentMillis:n[1],maxMillis:n[0]}}),o=new vn({}),{c(){e=b("div"),N(t.$$.fragment),r=E(),N(s.$$.fragment),l=E(),N(o.$$.fragment),v(e,"class","audio-interface svelte-7gcugb")},m(a,u){T(a,e,u),j(t,e,null),h(e,r),j(s,e,null),h(e,l),j(o,e,null),i=!0},p(a,[u]){const f={};u&2&&(f.currentMillis=a[1]),u&1&&(f.maxMillis=a[0]),s.$set(f)},i(a){i||(D(t.$$.fragment,a),D(s.$$.fragment,a),D(o.$$.fragment,a),i=!0)},o(a){A(t.$$.fragment,a),A(s.$$.fragment,a),A(o.$$.fragment,a),i=!1},d(a){a&&S(e),O(t),O(s),O(o)}}}function Cn(n,e,t){let{maxMillis:r}=e,{currentMillis:s}=e;function l(i){ne.call(this,n,i)}function o(i){ne.call(this,n,i)}return n.$$set=i=>{"maxMillis"in i&&t(0,r=i.maxMillis),"currentMillis"in i&&t(1,s=i.currentMillis)},[r,s,l,o]}class Mn extends B{constructor(e){super(),G(this,e,Cn,An,F,{maxMillis:0,currentMillis:1})}}function Rn(n){let e,t,r,s,l,o,i,a;return{c(){e=b("div"),t=b("input"),r=E(),s=b("button"),l=U("Submit"),v(t,"type","text"),v(t,"class","svelte-1to6jal"),s.disabled=o=!n[1],v(s,"class","svelte-1to6jal"),v(e,"class","svelte-1to6jal")},m(u,f){T(u,e,f),h(e,t),Se(t,n[0]),n[5](t),h(e,r),h(e,s),h(s,l),i||(a=[x(t,"input",n[4]),x(s,"click",n[3])],i=!0)},p(u,[f]){f&1&&t.value!==u[0]&&Se(t,u[0]),f&2&&o!==(o=!u[1])&&(s.disabled=o)},i:P,o:P,d(u){u&&S(e),n[5](null),i=!1,ee(a)}}}function Un(n,e,t){let{searchedText:r=""}=e,{enableSubmit:s=!1}=e,l;ie(()=>{l.focus(),l.addEventListener("keydown",u=>{(u.key=="ArrowDown"||u.key=="ArrowUp")&&u.preventDefault()})});function o(u){ne.call(this,n,u)}function i(){r=this.value,t(0,r)}function a(u){le[u?"unshift":"push"](()=>{l=u,t(2,l)})}return n.$$set=u=>{"searchedText"in u&&t(0,r=u.searchedText),"enableSubmit"in u&&t(1,s=u.enableSubmit)},[r,s,l,o,i,a]}class Ln extends B{constructor(e){super(),G(this,e,Un,Rn,F,{searchedText:0,enableSubmit:1})}}function jn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function ot(n){const e=n-1;return e*e*e+1}function On(n){return-n*(n-2)}function X(n,{delay:e=0,duration:t=400,easing:r=Me}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:l=>`opacity: ${l*s}`}}function ce(n,{delay:e=0,duration:t=400,easing:r=ot,x:s=0,y:l=0,opacity:o=0}={}){const i=getComputedStyle(n),a=+i.opacity,u=i.transform==="none"?"":i.transform,f=a*(1-o);return{delay:e,duration:t,easing:r,css:(m,c)=>`
			transform: ${u} translate(${(1-m)*s}px, ${(1-m)*l}px);
			opacity: ${a-f*c}`}}function Nn(n){let e,t,r,s,l,o,i,a,u,f,m,c,d,p,_,g,y;return{c(){e=b("div"),t=b("div"),r=b("img"),l=E(),o=b("div"),i=b("div"),a=b("div"),a.textContent=`${n[1]}`,u=E(),f=b("div"),f.textContent=`${n[2]}`,m=E(),c=b("div"),c.textContent=`${n[3]}`,pe(r.src,s=n[4])||v(r,"src",s),v(r,"alt",n[3]),v(r,"class","svelte-ljjtt0"),v(t,"class","track-image svelte-ljjtt0"),v(a,"class","track-name svelte-ljjtt0"),v(f,"class","track-artist"),v(i,"class","track-name-artist svelte-ljjtt0"),v(c,"class","track-album-name svelte-ljjtt0"),v(o,"class","track-text svelte-ljjtt0"),v(e,"class","result svelte-ljjtt0"),de(e,"selected",n[0])},m(k,w){T(k,e,w),h(e,t),h(t,r),h(e,l),h(e,o),h(o,i),h(i,a),h(i,u),h(i,f),h(o,m),h(o,c),_=!0,g||(y=x(e,"click",n[6]),g=!0)},p(k,[w]){(!_||w&1)&&de(e,"selected",k[0])},i(k){_||(k&&J(()=>{p&&p.end(1),d=oe(e,ce,{y:30,duration:300}),d.start()}),_=!0)},o(k){d&&d.invalidate(),k&&(p=Pe(e,X,{duration:100})),_=!1},d(k){k&&S(e),k&&p&&p.end(),g=!1,y()}}}function Fn(n,e,t){let{content:r}=e,{selected:s}=e;const l=r.name,o=r.artists.map(f=>f.name).join(", "),i=r.album.name,a=r.album.images[0].url;function u(f){ne.call(this,n,f)}return n.$$set=f=>{"content"in f&&t(5,r=f.content),"selected"in f&&t(0,s=f.selected)},[s,l,o,i,a,r,u]}class zn extends B{constructor(e){super(),G(this,e,Fn,Nn,F,{content:5,selected:0})}}function ut(n,e,t){const r=n.slice();return r[14]=e[t],r[16]=t,r}function ct(n){let e,t;function r(){return n[6](n[16])}return e=new zn({props:{content:n[14],selected:n[16]===n[0]}}),e.$on("click",r),{c(){N(e.$$.fragment)},m(s,l){j(e,s,l),t=!0},p(s,l){n=s;const o={};l&2&&(o.content=n[14]),l&3&&(o.selected=n[16]===n[0]),e.$set(o)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){O(e,s)}}}function ft(n,e){let t,r,s,l=e[2][e[16]]&&ct(e);return{key:n,first:null,c(){t=ue(),l&&l.c(),r=ue(),this.first=t},m(o,i){T(o,t,i),l&&l.m(o,i),T(o,r,i),s=!0},p(o,i){e=o,e[2][e[16]]?l?(l.p(e,i),i&6&&D(l,1)):(l=ct(e),l.c(),D(l,1),l.m(r.parentNode,r)):l&&(Z(),A(l,1,1,()=>{l=null}),$())},i(o){s||(D(l),s=!0)},o(o){A(l),s=!1},d(o){o&&S(t),l&&l.d(o),o&&S(r)}}}function Gn(n){let e,t=[],r=new Map,s,l,o,i=n[1];const a=u=>u[14].uri;for(let u=0;u<i.length;u+=1){let f=ut(n,i,u),m=a(f);r.set(m,t[u]=ft(m,f))}return{c(){e=b("div");for(let u=0;u<t.length;u+=1)t[u].c();v(e,"class","results svelte-y0rieb")},m(u,f){T(u,e,f);for(let m=0;m<t.length;m+=1)t[m].m(e,null);s=!0,l||(o=x(window,"keypress",n[4]),l=!0)},p(u,[f]){f&15&&(i=u[1],Z(),t=Ct(t,f,a,1,u,i,r,e,At,ft,null,ut),$())},i(u){if(!s){for(let f=0;f<i.length;f+=1)D(t[f]);s=!0}},o(u){for(let f=0;f<t.length;f+=1)A(t[f]);s=!1},d(u){u&&S(e);for(let f=0;f<t.length;f+=1)t[f].d();l=!1,o()}}}function Bn(n,e,t){let{searchedText:r}=e,{fullContent:s=[]}=e,{selectedIndex:l=0}=e,o=0,i=Y();const a=s.map(y=>y.name.toLowerCase()+" "+y.artists.map(k=>k.name.toLowerCase()).join(" ")+" "+y.album.name.toLowerCase());let u=[],f=[];function m(){t(2,u=a.map(y=>y.includes(r.toLowerCase()))),f=u.reduce((y,k,w)=>k?[...y,w]:y,[]),f.length===0?(t(0,l=-1),o=-1):(o=0,t(0,l=f[0])),console.log("indexA: ",o," selectedI: ",l)}function c(){console.log("incrementa. sI: ",l," iA: ",o),l===-1&&f.length>0?(o=0,t(0,l=0)):o<f.length-1&&(o=o+1,t(0,l=f[o]))}function d(){console.log("decrementa"),o>0&&(o=o-1,t(0,l=f[o]))}function p(y){l===y&&i("submit",{}),t(0,l=y),o=f.indexOf(y)}function _(y){y.key==="ArrowDown"?(y.preventDefault(),c()):y.key==="ArrowUp"&&(y.preventDefault(),d()),y.key==="Enter"&&l!=-1&&i("submit",{})}const g=y=>{p(y)};return n.$$set=y=>{"searchedText"in y&&t(5,r=y.searchedText),"fullContent"in y&&t(1,s=y.fullContent),"selectedIndex"in y&&t(0,l=y.selectedIndex)},n.$$.update=()=>{n.$$.dirty&32&&m()},[l,s,u,p,_,r,g]}class Hn extends B{constructor(e){super(),G(this,e,Bn,Gn,F,{searchedText:5,fullContent:1,selectedIndex:0})}}function Vn(n){let e,t,r,s,l,o,i,a,u;t=new Mn({props:{currentMillis:n[0].playedMs,maxMillis:n[0].musicInfo.duration_ms}}),t.$on("toggle",n[7]),t.$on("skip",n[8]);function f(p){n[9](p)}let m={enableSubmit:n[5]};n[2]!==void 0&&(m.searchedText=n[2]),s=new Ln({props:m}),le.push(()=>Ie(s,"searchedText",f)),s.$on("click",function(){ge(n[4])&&n[4].apply(this,arguments)});function c(p){n[10](p)}let d={fullContent:n[1].content.tracks,searchedText:n[2]};return n[3]!==void 0&&(d.selectedIndex=n[3]),i=new Hn({props:d}),le.push(()=>Ie(i,"selectedIndex",c)),i.$on("submit",function(){ge(n[4])&&n[4].apply(this,arguments)}),i.$on("giveUp",n[6]),{c(){e=b("div"),N(t.$$.fragment),r=E(),N(s.$$.fragment),o=E(),N(i.$$.fragment),v(e,"class","play-screen svelte-yu63ob")},m(p,_){T(p,e,_),j(t,e,null),h(e,r),j(s,e,null),h(e,o),j(i,e,null),u=!0},p(p,[_]){n=p;const g={};_&1&&(g.currentMillis=n[0].playedMs),_&1&&(g.maxMillis=n[0].musicInfo.duration_ms),t.$set(g);const y={};_&32&&(y.enableSubmit=n[5]),!l&&_&4&&(l=!0,y.searchedText=n[2],Te(()=>l=!1)),s.$set(y);const k={};_&2&&(k.fullContent=n[1].content.tracks),_&4&&(k.searchedText=n[2]),!a&&_&8&&(a=!0,k.selectedIndex=n[3],Te(()=>a=!1)),i.$set(k)},i(p){u||(D(t.$$.fragment,p),D(s.$$.fragment,p),D(i.$$.fragment,p),u=!0)},o(p){A(t.$$.fragment,p),A(s.$$.fragment,p),A(i.$$.fragment,p),u=!1},d(p){p&&S(e),O(t),O(s),O(i)}}}function xn(n,e,t){let r,s,l=Y(),{currentInfo:o}=e,{gameInfo:i}=e,a="",u=-1;ie(()=>{t(2,a=""),t(3,u=-1)});const f=()=>{l("giveup",{})};function m(_){ne.call(this,n,_)}function c(_){ne.call(this,n,_)}function d(_){a=_,t(2,a)}function p(_){u=_,t(3,u)}return n.$$set=_=>{"currentInfo"in _&&t(0,o=_.currentInfo),"gameInfo"in _&&t(1,i=_.gameInfo)},n.$$.update=()=>{n.$$.dirty&1&&o.playedMs>0&&o.musicInfo.duration_ms>0&&t(0,o.roundScore=1e3*(1-o.playedMs/o.musicInfo.duration_ms),o),n.$$.dirty&8&&t(5,r=u!=-1),n.$$.dirty&12&&t(4,s=()=>{l("submit",{text:a,index:u})})},[o,i,a,u,s,r,f,m,c,d,p]}class Kn extends B{constructor(e){super(),G(this,e,xn,Vn,F,{currentInfo:0,gameInfo:1})}}function dt(n){let e,t,r=n[2].correctTrack.name+"",s;return{c(){e=b("span"),t=U("Correct track: "),s=U(r)},m(l,o){T(l,e,o),h(e,t),h(e,s)},p(l,o){o&4&&r!==(r=l[2].correctTrack.name+"")&&K(s,r)},d(l){l&&S(e)}}}function Wn(n){let e,t,r,s=n[2].success+"",l,o,i,a,u,f=n[0].round+"",m,c,d=n[1].maxRounds+"",p,_,g,y,k=n[2].scoreEarned+"",w,I,C,q,L,R=n[3]&&dt(n);return{c(){e=b("div"),t=b("span"),r=U("Success: "),l=U(s),o=E(),R&&R.c(),i=E(),a=b("span"),u=U("Current round: "),m=U(f),c=U("/"),p=U(d),_=E(),g=b("span"),y=U("Score earned: "),w=U(k),I=E(),C=b("button"),C.textContent="Ready",v(e,"class","svelte-go3hkc")},m(V,M){T(V,e,M),h(e,t),h(t,r),h(t,l),h(e,o),R&&R.m(e,null),h(e,i),h(e,a),h(a,u),h(a,m),h(a,c),h(a,p),h(e,_),h(e,g),h(g,y),h(g,w),T(V,I,M),T(V,C,M),q||(L=x(C,"click",n[4]),q=!0)},p(V,[M]){M&4&&s!==(s=V[2].success+"")&&K(l,s),V[3]?R?R.p(V,M):(R=dt(V),R.c(),R.m(e,i)):R&&(R.d(1),R=null),M&1&&f!==(f=V[0].round+"")&&K(m,f),M&2&&d!==(d=V[1].maxRounds+"")&&K(p,d),M&4&&k!==(k=V[2].scoreEarned+"")&&K(w,k)},i:P,o:P,d(V){V&&S(e),R&&R.d(),V&&S(I),V&&S(C),q=!1,L()}}}function Jn(n,e,t){let{currentInfo:r}=e,{gameInfo:s}=e,{endInfo:l}=e,o=Y(),i=!l.success;function a(){t(3,i=!1),o("click",{})}return n.$$set=u=>{"currentInfo"in u&&t(0,r=u.currentInfo),"gameInfo"in u&&t(1,s=u.gameInfo),"endInfo"in u&&t(2,l=u.endInfo)},[r,s,l,i,a]}class Yn extends B{constructor(e){super(),G(this,e,Jn,Wn,F,{currentInfo:0,gameInfo:1,endInfo:2})}}function Xn(n){let e;return{c(){e=b("div"),v(e,"class","image image-not-found svelte-589u8u")},m(t,r){T(t,e,r)},p:P,d(t){t&&S(e)}}}function Qn(n){let e,t;return{c(){e=b("img"),v(e,"class","image svelte-589u8u"),pe(e.src,t=n[0])||v(e,"src",t),v(e,"alt",n[1])},m(r,s){T(r,e,s)},p(r,s){s&1&&!pe(e.src,t=r[0])&&v(e,"src",t),s&2&&v(e,"alt",r[1])},d(r){r&&S(e)}}}function pt(n){let e;return{c(){e=U("unique")},m(t,r){T(t,e,r)},d(t){t&&S(e)}}}function mt(n){let e;return{c(){e=U("s")},m(t,r){T(t,e,r)},d(t){t&&S(e)}}}function Zn(n){let e,t,r,s,l,o,i,a,u,f,m,c,d,p,_,g;function y(q,L){return q[0]!==null?Qn:Xn}let k=y(n),w=k(n),I=n[5]&&pt(),C=n[2]!=1&&mt();return d=new Ot({props:{externUrl:n[3]}}),{c(){e=b("div"),w.c(),t=E(),r=b("div"),s=b("spam"),l=U(n[1]),o=E(),i=b("spam"),a=U(n[2]),u=E(),I&&I.c(),f=U(` 
            track`),C&&C.c(),m=E(),c=b("div"),N(d.$$.fragment),v(s,"class","name svelte-589u8u"),v(i,"class","total svelte-589u8u"),v(r,"class","texts svelte-589u8u"),v(c,"class","powered-by svelte-589u8u"),v(e,"class","content-box svelte-589u8u"),de(e,"selected",n[4]),de(e,"expand",n[6])},m(q,L){T(q,e,L),w.m(e,null),h(e,t),h(e,r),h(r,s),h(s,l),h(r,o),h(r,i),h(i,a),h(i,u),I&&I.m(i,null),h(i,f),C&&C.m(i,null),h(e,m),h(e,c),j(d,c,null),p=!0,_||(g=x(e,"click",n[7]),_=!0)},p(q,[L]){k===(k=y(q))&&w?w.p(q,L):(w.d(1),w=k(q),w&&(w.c(),w.m(e,t))),(!p||L&2)&&K(l,q[1]),(!p||L&4)&&K(a,q[2]),q[5]?I||(I=pt(),I.c(),I.m(i,f)):I&&(I.d(1),I=null),q[2]!=1?C||(C=mt(),C.c(),C.m(i,null)):C&&(C.d(1),C=null);const R={};L&8&&(R.externUrl=q[3]),d.$set(R),(!p||L&16)&&de(e,"selected",q[4]),(!p||L&64)&&de(e,"expand",q[6])},i(q){p||(D(d.$$.fragment,q),p=!0)},o(q){A(d.$$.fragment,q),p=!1},d(q){q&&S(e),w.d(),I&&I.d(),C&&C.d(),O(d),_=!1,g()}}}function $n(n,e,t){let{image:r}=e,{name:s}=e,{total:l}=e,{externUrl:o}=e,{isSelected:i=!1}=e,{isUnique:a=!1}=e,{expand:u=!1}=e;function f(m){ne.call(this,n,m)}return n.$$set=m=>{"image"in m&&t(0,r=m.image),"name"in m&&t(1,s=m.name),"total"in m&&t(2,l=m.total),"externUrl"in m&&t(3,o=m.externUrl),"isSelected"in m&&t(4,i=m.isSelected),"isUnique"in m&&t(5,a=m.isUnique),"expand"in m&&t(6,u=m.expand)},[r,s,l,o,i,a,u,f]}class it extends B{constructor(e){super(),G(this,e,$n,Zn,F,{image:0,name:1,total:2,externUrl:3,isSelected:4,isUnique:5,expand:6})}}function _t(n){return Object.prototype.toString.call(n)==="[object Date]"}function et(n,e){if(n===e||n!==n)return()=>n;const t=typeof n;if(t!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const r=e.map((s,l)=>et(n[l],s));return s=>r.map(l=>l(s))}if(t==="object"){if(!n||!e)throw new Error("Object cannot be null");if(_t(n)&&_t(e)){n=n.getTime(),e=e.getTime();const l=e-n;return o=>new Date(n+o*l)}const r=Object.keys(e),s={};return r.forEach(l=>{s[l]=et(n[l],e[l])}),l=>{const o={};return r.forEach(i=>{o[i]=s[i](l)}),o}}if(t==="number"){const r=e-n;return s=>n+s*r}throw new Error(`Cannot interpolate ${t} values`)}function xe(n,e={}){const t=fe(n);let r,s=n;function l(o,i){if(n==null)return t.set(n=o),Promise.resolve();s=o;let a=r,u=!1,{delay:f=0,duration:m=400,easing:c=Me,interpolate:d=et}=Ne(Ne({},e),i);if(m===0)return a&&(a.abort(),a=null),t.set(n=s),Promise.resolve();const p=Ke()+f;let _;return r=We(g=>{if(g<p)return!0;u||(_=d(n,o),typeof m=="function"&&(m=m(n,o)),u=!0),a&&(a.abort(),a=null);const y=g-p;return y>m?(t.set(n=o),!1):(t.set(n=_(c(y/m))),!0)}),r.promise}return{set:l,update:(o,i)=>l(o(s,n),i),subscribe:t.subscribe}}function er(n){let e,t=n[1]&&gt();return{c(){e=b("div"),t&&t.c(),v(e,"class","ready svelte-9iu8c0"),Q(e,"height","calc("+n[3]+" * var(--max-height))")},m(r,s){T(r,e,s),t&&t.m(e,null)},p(r,s){r[1]?t?s&2&&D(t,1):(t=gt(),t.c(),D(t,1),t.m(e,null)):t&&(t.d(1),t=null),s&8&&Q(e,"height","calc("+r[3]+" * var(--max-height))")},i(r){D(t)},o:P,d(r){r&&S(e),t&&t.d()}}}function tr(n){let e,t,r;return{c(){e=b("div"),t=b("div"),v(t,"class","loading-progress svelte-9iu8c0"),Q(t,"width",n[2]*100+"%"),v(e,"class","loading-wrapper svelte-9iu8c0")},m(s,l){T(s,e,l),h(e,t)},p(s,l){l&4&&Q(t,"width",s[2]*100+"%")},i(s){r||J(()=>{r=oe(t,X,{}),r.start()})},o:P,d(s){s&&S(e)}}}function gt(n){let e,t;return{c(){e=b("div"),e.textContent="Start",v(e,"class","text")},m(r,s){T(r,e,s)},i(r){t||J(()=>{t=oe(e,X,{}),t.start()})},o:P,d(r){r&&S(e)}}}function yt(n){let e,t,r=n[0].text+"",s,l,o,i=Math.floor(n[0].progress*100)+"",a,u;return{c(){e=b("div"),t=b("spam"),s=U(r),l=E(),o=b("spam"),a=U(i),u=U("%"),v(t,"class","loading-text"),v(o,"class","loading-text"),v(e,"class","loading-texts svelte-9iu8c0")},m(f,m){T(f,e,m),h(e,t),h(t,s),h(e,l),h(e,o),h(o,a),h(o,u)},p(f,m){m&1&&r!==(r=f[0].text+"")&&K(s,r),m&1&&i!==(i=Math.floor(f[0].progress*100)+"")&&K(a,i)},d(f){f&&S(e)}}}function nr(n){let e,t,r,s,l;function o(f,m){return f[0].done?er:tr}let i=o(n),a=i(n),u=!n[0].done&&yt(n);return{c(){e=b("div"),t=b("button"),a.c(),r=E(),u&&u.c(),v(t,"class","btn-start svelte-9iu8c0"),v(e,"class","wrapper-btn svelte-9iu8c0")},m(f,m){T(f,e,m),h(e,t),a.m(t,null),h(e,r),u&&u.m(e,null),s||(l=x(t,"click",n[6]),s=!0)},p(f,[m]){i===(i=o(f))&&a?a.p(f,m):(a.d(1),a=i(f),a&&(a.c(),D(a,1),a.m(t,null))),f[0].done?u&&(u.d(1),u=null):u?u.p(f,m):(u=yt(f),u.c(),u.m(e,null))},i(f){D(a)},o:P,d(f){f&&S(e),a.d(),u&&u.d(),s=!1,l()}}}function rr(n,e,t){let r,s,l=Y(),{loading:o={text:"",progress:0,done:!1}}=e;const i=xe(0,{duration:500,easing:ot});z(n,i,m=>t(2,r=m));const a=xe(.125,{duration:1e3,easing:jn});z(n,a,m=>t(3,s=m));let u=!1;function f(){o.done&&l("start")}return ie(()=>{i.set(o.progress)}),n.$$set=m=>{"loading"in m&&t(0,o=m.loading)},n.$$.update=()=>{n.$$.dirty&1&&i.set(o.progress),n.$$.dirty&1&&o.done&&(a.set(1),setTimeout(()=>{t(1,u=!0)},1e3))},[o,u,r,s,i,a,f]}class sr extends B{constructor(e){super(),G(this,e,rr,nr,F,{loading:0})}}function ht(n){let e,t,r,s,l;return{c(){e=b("div"),t=b("spam"),t.textContent="Tip:",r=E(),s=b("spam"),l=U(n[2]),v(t,"class","tip-title svelte-1rzgn16"),v(s,"class","tip-text"),v(e,"class","tip svelte-1rzgn16")},m(o,i){T(o,e,i),h(e,t),h(e,r),h(e,s),h(s,l)},p(o,i){i&4&&K(l,o[2])},d(o){o&&S(e)}}}function lr(n){let e,t,r,s,l,o,i,a,u;l=new it({props:{name:n[1].name,image:He(n[1].images),total:n[1].tracks.length,externUrl:n[1].link,isSelected:!1,isUnique:!0}});let f=n[2]&&ht(n);return a=new sr({props:{loading:n[0]}}),a.$on("start",n[3]),{c(){e=b("div"),t=b("div"),r=b("spam"),r.textContent="Playlist/Album selected:",s=E(),N(l.$$.fragment),o=E(),f&&f.c(),i=E(),N(a.$$.fragment),v(r,"class","content-header svelte-1rzgn16"),v(t,"class","wrapper-box svelte-1rzgn16"),v(e,"class","start-screen svelte-1rzgn16")},m(m,c){T(m,e,c),h(e,t),h(t,r),h(t,s),j(l,t,null),h(e,o),f&&f.m(e,null),h(e,i),j(a,e,null),u=!0},p(m,[c]){const d={};c&2&&(d.name=m[1].name),c&2&&(d.image=He(m[1].images)),c&2&&(d.total=m[1].tracks.length),c&2&&(d.externUrl=m[1].link),l.$set(d),m[2]?f?f.p(m,c):(f=ht(m),f.c(),f.m(e,i)):f&&(f.d(1),f=null);const p={};c&1&&(p.loading=m[0]),a.$set(p)},i(m){u||(D(l.$$.fragment,m),D(a.$$.fragment,m),u=!0)},o(m){A(l.$$.fragment,m),A(a.$$.fragment,m),u=!1},d(m){m&&S(e),O(l),f&&f.d(),O(a)}}}function or(n,e,t){let{loading:r={text:"",progress:.3,done:!1}}=e,{content:s={}}=e;const l=["Press ENTER to submit the selected track","Click on a track to select, click again to submit","You can search using the name of the track, album or artist(s)","Use the arrow keys to navigate between tracks","You gain more points by guessing the track faster","A track can be played only once per game"];let o="";ie(()=>{t(2,o=l[Math.floor(Math.random()*l.length)])});function i(a){ne.call(this,n,a)}return n.$$set=a=>{"loading"in a&&t(0,r=a.loading),"content"in a&&t(1,s=a.content)},[r,s,o,i]}class ir extends B{constructor(e){super(),G(this,e,or,lr,F,{loading:0,content:1})}}function ar(n){let e;return{c(){e=b("div"),v(e,"class","game-tick")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function ur(n,e,t){let r,s;z(n,ye,u=>t(3,s=u));let{ms:l=100}=e,{currentInfo:o}=e;function i(){s&&(t(0,o.playedMs+=l,o),o.playedMs>=r&&(t(0,o.playedMs=r,o),W(ye,s=!1,s)),t(0,o))}const a=setInterval(i,l);return Je(()=>{clearInterval(a)}),n.$$set=u=>{"ms"in u&&t(1,l=u.ms),"currentInfo"in u&&t(0,o=u.currentInfo)},n.$$.update=()=>{n.$$.dirty&1&&(r=o.musicInfo.duration_ms)},[o,l]}class cr extends B{constructor(e){super(),G(this,e,ur,ar,F,{ms:1,currentInfo:0})}}function fr(n){let e,t;return{c(){e=b("div"),t=b("div"),v(t,"class","scorebar-progress svelte-m26gsw"),Q(t,"width",n[0]+"%"),v(e,"class","scorebar svelte-m26gsw")},m(r,s){T(r,e,s),h(e,t)},p(r,[s]){s&1&&Q(t,"width",r[0]+"%")},i:P,o:P,d(r){r&&S(e)}}}function dr(n,e,t){let r,{rounds:s}=e,{maxRounds:l}=e;const o=xe(0,{duration:500,easing:ot});return z(n,o,i=>t(0,r=i)),n.$$set=i=>{"rounds"in i&&t(2,s=i.rounds),"maxRounds"in i&&t(3,l=i.maxRounds)},n.$$.update=()=>{n.$$.dirty&12&&o.set(s/l*100)},[r,o,s,l]}class pr extends B{constructor(e){super(),G(this,e,dr,fr,F,{rounds:2,maxRounds:3})}}function vt(n){let e,t,r=n[2].toFixed(0)+"",s,l,o,i;return{c(){e=b("spam"),t=U("+"),s=U(r),v(e,"class","points-new svelte-1xvw88b")},m(a,u){T(a,e,u),h(e,t),h(e,s),i=!0},p(a,u){(!i||u&4)&&r!==(r=a[2].toFixed(0)+"")&&K(s,r)},i(a){i||(J(()=>{o&&o.end(1),l=oe(e,ce,{x:-100,duration:500}),l.start()}),i=!0)},o(a){l&&l.invalidate(),o=Pe(e,X,{}),i=!1},d(a){a&&S(e),a&&o&&o.end()}}}function mr(n){let e,t,r,s=n[4].toFixed(0)+"",l,o,i,a,u,f,m,c,d,p,_,g,y,k=n[3]&&vt(n);return f=new pr({props:{rounds:n[0],maxRounds:n[1]}}),{c(){e=b("div"),t=b("div"),r=b("spam"),l=U(s),o=E(),i=b("spam"),i.textContent="points",a=E(),k&&k.c(),u=E(),N(f.$$.fragment),m=E(),c=b("spam"),d=U(n[0]),p=U(" / "),_=U(n[1]),g=U(" rounds"),v(r,"class","points-number svelte-1xvw88b"),v(i,"class","points-text svelte-1xvw88b"),v(t,"class","points svelte-1xvw88b"),v(c,"class","rounds svelte-1xvw88b"),v(e,"class","scoreboard svelte-1xvw88b")},m(w,I){T(w,e,I),h(e,t),h(t,r),h(r,l),h(t,o),h(t,i),h(t,a),k&&k.m(t,null),h(e,u),j(f,e,null),h(e,m),h(e,c),h(c,d),h(c,p),h(c,_),h(c,g),y=!0},p(w,[I]){(!y||I&16)&&s!==(s=w[4].toFixed(0)+"")&&K(l,s),w[3]?k?(k.p(w,I),I&8&&D(k,1)):(k=vt(w),k.c(),D(k,1),k.m(t,null)):k&&(Z(),A(k,1,1,()=>{k=null}),$());const C={};I&1&&(C.rounds=w[0]),I&2&&(C.maxRounds=w[1]),f.$set(C),(!y||I&1)&&K(d,w[0]),(!y||I&2)&&K(_,w[1])},i(w){y||(D(k),D(f.$$.fragment,w),y=!0)},o(w){A(k),A(f.$$.fragment,w),y=!1},d(w){w&&S(e),k&&k.d(),O(f)}}}function _r(n,e,t){let r,{rounds:s=4}=e,{maxRounds:l=5}=e,o=0,i=xe(0,{duration:1e3,easing:On});z(n,i,m=>t(4,r=m));let a=0,u=!1;$e.subscribe(m=>{t(2,a=m-o),o=m,a>0&&f(),setTimeout(()=>{W(i,r=m,r)},500)});function f(){t(3,u=!0),setTimeout(()=>{t(3,u=!1)},2e3)}return ie(()=>{i.set(0),o=0}),n.$$set=m=>{"rounds"in m&&t(0,s=m.rounds),"maxRounds"in m&&t(1,l=m.maxRounds)},[s,l,a,u,r,i]}class gr extends B{constructor(e){super(),G(this,e,_r,mr,F,{rounds:0,maxRounds:1})}}function yr(n){return{c:P,m:P,p:P,i:P,o:P,d:P}}function hr(n){let e,t,r;return{c(){e=b("span"),t=U("End score: "),r=U(n[6])},m(s,l){T(s,e,l),h(e,t),h(e,r)},p(s,l){l&64&&K(r,s[6])},i:P,o:P,d(s){s&&S(e)}}}function vr(n){let e,t;return e=new Yn({props:{gameInfo:n[0],currentInfo:n[1],endInfo:n[3]}}),e.$on("click",n[9]),{c(){N(e.$$.fragment)},m(r,s){j(e,r,s),t=!0},p(r,s){const l={};s&1&&(l.gameInfo=r[0]),s&2&&(l.currentInfo=r[1]),s&8&&(l.endInfo=r[3]),e.$set(l)},i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function br(n){let e,t,r,s,l=ye&&wr(n);function o(a){n[17](a)}let i={gameInfo:n[0]};return n[1]!==void 0&&(i.currentInfo=n[1]),t=new Kn({props:i}),le.push(()=>Ie(t,"currentInfo",o)),t.$on("submit",n[18]),t.$on("skip",n[19]),t.$on("toggle",n[7]),{c(){l&&l.c(),e=E(),N(t.$$.fragment)},m(a,u){l&&l.m(a,u),T(a,e,u),j(t,a,u),s=!0},p(a,u){ye&&l.p(a,u);const f={};u&1&&(f.gameInfo=a[0]),!r&&u&2&&(r=!0,f.currentInfo=a[1],Te(()=>r=!1)),t.$set(f)},i(a){s||(D(l),D(t.$$.fragment,a),s=!0)},o(a){A(l),A(t.$$.fragment,a),s=!1},d(a){l&&l.d(a),a&&S(e),O(t,a)}}}function kr(n){let e,t;return e=new ir({props:{loading:n[2],content:n[0].content}}),e.$on("start",n[9]),{c(){N(e.$$.fragment)},m(r,s){j(e,r,s),t=!0},p(r,s){const l={};s&4&&(l.loading=r[2]),s&1&&(l.content=r[0].content),e.$set(l)},i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function wr(n){let e,t,r;function s(o){n[16](o)}let l={ms:Tr};return n[1]!==void 0&&(l.currentInfo=n[1]),e=new cr({props:l}),le.push(()=>Ie(e,"currentInfo",s)),{c(){N(e.$$.fragment)},m(o,i){j(e,o,i),r=!0},p(o,i){const a={};!t&&i&2&&(t=!0,a.currentInfo=o[1],Te(()=>t=!1)),e.$set(a)},i(o){r||(D(e.$$.fragment,o),r=!0)},o(o){A(e.$$.fragment,o),r=!1},d(o){O(e,o)}}}function Sr(n){let e,t,r,s,l,o,i,a,u,f;function m(y){n[14](y)}function c(y){n[15](y)}let d={};n[4]!==void 0&&(d.spotifyPlayer=n[4]),n[5]!==void 0&&(d.deviceId=n[5]),e=new gn({props:d}),le.push(()=>Ie(e,"spotifyPlayer",m)),le.push(()=>Ie(e,"deviceId",c)),e.$on("error",Oe),e.$on("loaded",n[12]),e.$on("ready",n[11]),e.$on("notReady",n[13]),e.$on("state",n[8]),o=new gr({props:{rounds:n[1].round,maxRounds:n[0].maxRounds}});const p=[kr,br,vr,hr,yr],_=[];function g(y,k){return y[1].state==="start"?0:y[1].state==="game"?1:y[1].state==="ready"?2:y[1].state==="end"?3:4}return a=g(n),u=_[a]=p[a](n),{c(){N(e.$$.fragment),s=E(),l=b("div"),N(o.$$.fragment),i=E(),u.c(),v(l,"class","gameplay svelte-1gv2u1")},m(y,k){j(e,y,k),T(y,s,k),T(y,l,k),j(o,l,null),h(l,i),_[a].m(l,null),f=!0},p(y,[k]){const w={};!t&&k&16&&(t=!0,w.spotifyPlayer=y[4],Te(()=>t=!1)),!r&&k&32&&(r=!0,w.deviceId=y[5],Te(()=>r=!1)),e.$set(w);const I={};k&2&&(I.rounds=y[1].round),k&1&&(I.maxRounds=y[0].maxRounds),o.$set(I);let C=a;a=g(y),a===C?_[a].p(y,k):(Z(),A(_[C],1,1,()=>{_[C]=null}),$(),u=_[a],u?u.p(y,k):(u=_[a]=p[a](y),u.c()),D(u,1),u.m(l,null))},i(y){f||(D(e.$$.fragment,y),D(o.$$.fragment,y),D(u),f=!0)},o(y){A(e.$$.fragment,y),A(o.$$.fragment,y),A(u),f=!1},d(y){O(e,y),y&&S(s),y&&S(l),O(o),_[a].d()}}}const Tr=100;function Oe(n){console.log("error: ",n)}function Pr(n,e,t){let r,s,l;z(n,Ee,M=>t(21,r=M)),z(n,$e,M=>t(6,s=M)),z(n,ye,M=>t(22,l=M));let{gameInfo:o={maxRounds:5,content:{},played:[]}}=e,i={state:"start",round:0,musicIndex:-1,musicInfo:{},roundScore:-1,playedMs:-1},a={done:!1,text:"",progress:0},u={success:!1,scoreEarned:0,correctTrack:{}},f={hasToPause:!1,hasToStart:!1,isTryingToStart:!1},m,c;function d(){m.togglePlay()}function p(M){const H=M.detail;console.log(H),W(ye,l=!H.paused,l),!H.paused&&f.hasToPause&&(m.pause().then(()=>console.log("Done pausing SDK")).catch(Oe),console.log("Forcing pause")),t(1,i.playedMs=H.position,i),i.state==="game"&&H.position===0&&H.track_window.previous_tracks.length>0&&(console.log(H.track_window.previous_tracks[0].uri),console.log(i.musicInfo.uri),H.track_window.previous_tracks[0].uri===i.musicInfo.uri&&g(-1))}function _(){let M=[];for(let te=0;te<o.content.tracks.length;te++)o.played.includes(te)||M.push(te);console.log("Possible tracks: ",M.length);const H=M[Math.floor(Math.random()*M.length)];t(1,i.musicIndex=H,i),t(1,i.musicInfo=o.content.tracks[H],i),t(1,i.playedMs=0,i),f.hasToPause=!1,r.play({device_id:c,uris:[i.musicInfo.uri]}).then(()=>{t(1,i.state="game",i)}).catch(Oe)}function g(M){m.pause(),t(1,i.round+=1,i),o.played.push(i.musicIndex),M!==-1&&i.musicIndex===M?(W($e,s+=i.roundScore,s),t(3,u.scoreEarned=i.roundScore,u),t(3,u.success=!0,u)):(t(3,u.scoreEarned=0,u),t(3,u.success=!1,u),t(3,u.correctTrack=i.musicInfo,u)),t(1,i.state=i.round===o.maxRounds?"end":"ready",i)}async function y(){t(2,a.text="Preparing playback ... (1st attempt)",a),t(2,a.progress=.7,a);try{try{await r.play()}catch{console.log("Attempting to play before transfer failed. That's ok")}try{await r.transferMyPlayback([c])}catch{t(2,a.text="Preparing playback ... (2nd attempt)",a),console.log("Plan B (1): Muting sdk player"),await m.setVolume(0),console.log("Plan B (2): using /play directly"),await r.play({device_id:c,context_uri:o.content.uri}),console.log("Plan B (3): pausing playback"),await m.pause(),console.log("Plan B (4): restoring volume"),await m.setVolume(.6)}try{await m.pause(),f.hasToPause=!0}catch{console.log("Attempting to pause after transfer failed. That's ok")}Ve.subscribe(M=>m.setVolume(M)),console.log("finished"),t(2,a.text="Done!",a),t(2,a.progress=1,a),t(2,a.done=!0,a)}catch(M){Oe(M)}}ie(()=>{t(2,a.text="Connecting to Spotify SDK...",a),t(2,a.progress=.2,a)});function k(){t(2,a.text="Spotify SDK has loaded",a),t(2,a.progress=.5,a)}function w(){t(2,a.text="Spotify SDK disconnected",a),t(2,a.progress=.5,a),t(2,a.done=!1,a)}function I(M){m=M,t(4,m)}function C(M){c=M,t(5,c)}function q(M){i=M,t(1,i)}function L(M){i=M,t(1,i)}const R=M=>{g(M.detail.index)},V=()=>{g(-1)};return n.$$set=M=>{"gameInfo"in M&&t(0,o=M.gameInfo)},[o,i,a,u,m,c,s,d,p,_,g,y,k,w,I,C,q,L,R,V]}class Dr extends B{constructor(e){super(),G(this,e,Pr,Sr,F,{gameInfo:0})}}function Ir(n){let e;return{c(){e=b("div"),v(e,"class","spotify-auth")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function Er(n,e,t){let r,s,l,o,i;z(n,he,c=>t(2,r=c)),z(n,ae,c=>t(3,s=c)),z(n,Ee,c=>t(4,l=c)),z(n,_e,c=>t(5,o=c)),z(n,re,c=>t(6,i=c));let a,u,f=Y();l.getUserPlaylists;function m(){a=window.open(tn,"popup","popup=true"),u=setInterval(()=>{if(a.window.location.href.includes(nn)){const c=new URLSearchParams(a.window.location.search),d=c.get("error");if(d)a.close(),f("error",{description:d});else{const p=c.get("code");fetch(rn+`/${p}`).then(_=>_.json()).then(_=>{_.refresh_token?(W(re,i=_.refresh_token,i),W(_e,o=_.access_token,o),l.setAccessToken(o),l.getMe().then(g=>{W(ae,s=g.display_name||g.id,s),W(he,r=!0,r)}).catch(()=>{f("error",{description:"Error fetching username"})})):f("error",{description:_.error_description})}).catch(()=>f("error",{description:"Error fetching credentials via API"})).finally(()=>{a.close()})}}!a||!a.closed||clearInterval(u)},1e3)}return ie(m),Je(()=>{u!==void 0&&clearInterval(u)}),[]}class qr extends B{constructor(e){super(),G(this,e,Er,Ir,F,{})}}function Ar(n){let e,t,r,s,l,o,i,a,u,f,m,c,d;return{c(){e=b("a"),t=U("Not "),r=U(n[1]),s=U("? Logout"),l=E(),o=b("button"),i=b("span"),i.textContent="Play as",a=E(),u=b("span"),f=U(n[1]),v(e,"href","#"),v(e,"class","requires logout svelte-8rr2uc"),v(i,"class","continue svelte-8rr2uc"),v(u,"class","continue-username svelte-8rr2uc"),v(o,"class","btn-landing btn-continue svelte-8rr2uc")},m(p,_){T(p,e,_),h(e,t),h(e,r),h(e,s),T(p,l,_),T(p,o,_),h(o,i),h(o,a),h(o,u),h(u,f),c||(d=[x(e,"click",n[4]),x(o,"click",n[5])],c=!0)},p(p,_){_&2&&K(r,p[1]),_&2&&K(f,p[1])},i(p){m||J(()=>{m=oe(o,X,{}),m.start()})},o:P,d(p){p&&S(e),p&&S(l),p&&S(o),c=!1,ee(d)}}}function Cr(n){let e,t,r,s,l,o;return{c(){e=b("span"),e.textContent="Requires Spotify Premium",t=E(),r=b("button"),r.innerHTML='<span class="login svelte-8rr2uc">Login with <img class="spotify-logo-button svelte-8rr2uc" src="/assets/spotify-logo-white.png" alt="Spotify"/></span>',v(e,"class","requires svelte-8rr2uc"),v(r,"class","btn-landing btn-login svelte-8rr2uc")},m(i,a){T(i,e,a),T(i,t,a),T(i,r,a),l||(o=x(r,"click",n[3]),l=!0)},p:P,i(i){s||J(()=>{s=oe(r,X,{}),s.start()})},o:P,d(i){i&&S(e),i&&S(t),i&&S(r),l=!1,o()}}}function Mr(n){let e;function t(l,o){return l[0]?Ar:Cr}let r=t(n),s=r(n);return{c(){e=b("div"),s.c(),v(e,"class","div-login svelte-8rr2uc")},m(l,o){T(l,e,o),s.m(e,null)},p(l,[o]){r===(r=t(l))&&s?s.p(l,o):(s.d(1),s=r(l),s&&(s.c(),D(s,1),s.m(e,null)))},i(l){D(s)},o:P,d(l){l&&S(e),s.d()}}}function Rr(n,e,t){let{valid:r=!1}=e,{username:s=""}=e,l=Y();function o(){l("auth")}function i(){l("reset")}const a=()=>{l("ready")};return n.$$set=u=>{"valid"in u&&t(0,r=u.valid),"username"in u&&t(1,s=u.username)},[r,s,l,o,i,a]}class Ur extends B{constructor(e){super(),G(this,e,Rr,Mr,F,{valid:0,username:1})}}function Lr(n){let e,t,r,s,l;return{c(){e=b("div"),e.textContent="kkkk2tutorial"},m(o,i){T(o,e,i),r=!0,s||(l=x(e,"outroend",n[2]),s=!0)},p:P,i(o){r||(J(()=>{t||(t=De(e,ce,{x:200,duration:500},!0)),t.run(1)}),r=!0)},o(o){t||(t=De(e,ce,{x:200,duration:500},!1)),t.run(0),r=!1},d(o){o&&S(e),o&&t&&t.end(),s=!1,l()}}}function jr(n){let e,t,r,s,l;return{c(){e=b("div"),e.textContent="kkkk1about"},m(o,i){T(o,e,i),r=!0,s||(l=x(e,"outroend",n[2]),s=!0)},p:P,i(o){r||(J(()=>{t||(t=De(e,ce,{x:-200,duration:500},!0)),t.run(1)}),r=!0)},o(o){t||(t=De(e,ce,{x:-200,duration:500},!1)),t.run(0),r=!1},d(o){o&&S(e),o&&t&&t.end(),s=!1,l()}}}function Or(n){let e,t,r,s,l,o,i,a,u,f;return{c(){e=b("div"),e.textContent="Do you know your music?",s=E(),l=b("div"),l.textContent="Some description, some description some description some description some description!",v(e,"class","short-description svelte-1atu51j"),v(l,"class","long-description svelte-1atu51j")},m(m,c){T(m,e,c),T(m,s,c),T(m,l,c),a=!0,u||(f=x(e,"outroend",n[2]),u=!0)},p:P,i(m){a||(J(()=>{r&&r.end(1),t=oe(e,ce,{y:30,duration:1e3}),t.start()}),J(()=>{i&&i.end(1),o=oe(l,ce,{y:30,duration:1e3}),o.start()}),a=!0)},o(m){t&&t.invalidate(),r=Pe(e,X,{}),o&&o.invalidate(),i=Pe(l,X,{}),a=!1},d(m){m&&S(e),m&&r&&r.end(),m&&S(s),m&&S(l),m&&i&&i.end(),u=!1,f()}}}function Nr(n){let e,t,r;return{c(){e=b("a"),e.textContent="Go back",v(e,"href","#"),Q(e,"text-align","center"),v(e,"class","goto goto-text svelte-1atu51j")},m(s,l){T(s,e,l),t||(r=x(e,"click",n[5]),t=!0)},p:P,d(s){s&&S(e),t=!1,r()}}}function Fr(n){let e,t,r,s,l,o,i;return{c(){e=b("a"),e.textContent="About",t=E(),r=b("spam"),r.textContent="|",s=E(),l=b("a"),l.textContent="Tutorial",v(e,"href","#"),Q(e,"text-align","right"),v(e,"class","goto goto-text svelte-1atu51j"),v(r,"class","goto svelte-1atu51j"),v(l,"href","#"),Q(l,"text-align","left"),v(l,"class","goto goto-text svelte-1atu51j")},m(a,u){T(a,e,u),T(a,t,u),T(a,r,u),T(a,s,u),T(a,l,u),o||(i=[x(e,"click",n[3]),x(l,"click",n[4])],o=!0)},p:P,d(a){a&&S(e),a&&S(t),a&&S(r),a&&S(s),a&&S(l),o=!1,ee(i)}}}function zr(n){let e,t,r,s,l,o,i;const a=[Or,jr,Lr],u=[];function f(p,_){return p[0]==="main"?0:p[0]==="about"?1:p[0]==="tutorial"?2:-1}~(r=f(n))&&(s=u[r]=a[r](n));function m(p,_){return p[0]==="main"?Fr:Nr}let c=m(n),d=c(n);return{c(){e=b("div"),t=b("div"),s&&s.c(),l=E(),o=b("div"),d.c(),v(t,"class","texts svelte-1atu51j"),v(o,"class","pagination svelte-1atu51j"),v(e,"class","landing-description svelte-1atu51j")},m(p,_){T(p,e,_),h(e,t),~r&&u[r].m(t,null),h(e,l),h(e,o),d.m(o,null),i=!0},p(p,[_]){let g=r;r=f(p),r===g?~r&&u[r].p(p,_):(s&&(Z(),A(u[g],1,1,()=>{u[g]=null}),$()),~r?(s=u[r],s?s.p(p,_):(s=u[r]=a[r](p),s.c()),D(s,1),s.m(t,null)):s=null),c===(c=m(p))&&d?d.p(p,_):(d.d(1),d=c(p),d&&(d.c(),d.m(o,null)))},i(p){i||(D(s),i=!0)},o(p){A(s),i=!1},d(p){p&&S(e),~r&&u[r].d(),d.d()}}}function Gr(n,e,t){let r=Y(),s="main",l="none";function o(m){t(0,s="none"),l=m}function i(){t(0,s=l),r("outroend")}return[s,o,i,()=>o("about"),()=>o("tutorial"),()=>o("main")]}class Br extends B{constructor(e){super(),G(this,e,Gr,zr,F,{})}}function Hr(n){let e;return{c(){e=b("div"),v(e,"class","no-error")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function Vr(n){let e,t,r,s,l,o,i,a,u,f,m,c,d,p,_,g,y,k,w,I,C,q,L,R,V,M;return{c(){e=b("div"),s=E(),l=b("div"),o=b("div"),i=b("spam"),i.textContent="Error :(",a=E(),u=b("spam"),f=U(n[1]),m=E(),c=b("p"),d=U(n[2]),p=E(),_=b("div"),g=b("spam"),g.textContent="Full error description:",y=E(),k=b("p"),w=U(n[3]),I=E(),C=b("button"),C.innerHTML='<img class="close svelte-ftx5vo" src="/assets/close.svg" alt="Close"/>',v(e,"class","black-fade svelte-ftx5vo"),v(i,"class","error-big svelte-ftx5vo"),v(u,"class","title svelte-ftx5vo"),v(o,"class","header svelte-ftx5vo"),v(c,"class","quick-description svelte-ftx5vo"),v(g,"class","quick-description svelte-ftx5vo"),v(k,"class","full-description svelte-ftx5vo"),v(_,"class","footer svelte-ftx5vo"),v(C,"class","svelte-ftx5vo"),v(l,"class","error-message svelte-ftx5vo")},m(H,te){T(H,e,te),T(H,s,te),T(H,l,te),h(l,o),h(o,i),h(o,a),h(o,u),h(u,f),h(l,m),h(l,c),h(c,d),h(l,p),h(l,_),h(_,g),h(_,y),h(_,k),h(k,w),h(l,I),h(l,C),R=!0,V||(M=[x(e,"click",n[4]),x(C,"click",n[4])],V=!0)},p(H,te){(!R||te&2)&&K(f,H[1]),(!R||te&4)&&K(d,H[2]),(!R||te&8)&&K(w,H[3])},i(H){R||(J(()=>{r&&r.end(1),t=oe(e,X,{}),t.start()}),J(()=>{L&&L.end(1),q=oe(l,ce,{y:-100,duration:300}),q.start()}),R=!0)},o(H){t&&t.invalidate(),r=Pe(e,X,{}),q&&q.invalidate(),L=Pe(l,X,{}),R=!1},d(H){H&&S(e),H&&r&&r.end(),H&&S(s),H&&S(l),H&&L&&L.end(),V=!1,ee(M)}}}function xr(n){let e,t,r,s;const l=[Vr,Hr],o=[];function i(a,u){return a[0]?0:1}return e=i(n),t=o[e]=l[e](n),{c(){t.c(),r=ue()},m(a,u){o[e].m(a,u),T(a,r,u),s=!0},p(a,[u]){let f=e;e=i(a),e===f?o[e].p(a,u):(Z(),A(o[f],1,1,()=>{o[f]=null}),$(),t=o[e],t?t.p(a,u):(t=o[e]=l[e](a),t.c()),D(t,1),t.m(r.parentNode,r))},i(a){s||(D(t),s=!0)},o(a){A(t),s=!1},d(a){o[e].d(a),a&&S(r)}}}function Kr(n,e,t){let{show:r}=e,{title:s}=e,{quickDescription:l}=e,{fullDescription:o}=e,i=Y();function a(){i("close")}return n.$$set=u=>{"show"in u&&t(0,r=u.show),"title"in u&&t(1,s=u.title),"quickDescription"in u&&t(2,l=u.quickDescription),"fullDescription"in u&&t(3,o=u.fullDescription)},[r,s,l,o,a]}let Nt=class extends B{constructor(e){super(),G(this,e,Kr,xr,F,{show:0,title:1,quickDescription:2,fullDescription:3})}};function bt(n){let e,t,r,s;return e=new Br({}),e.$on("outroend",n[10]),r=new Ur({props:{valid:n[4],username:n[5]}}),r.$on("auth",n[6]),r.$on("reset",n[9]),r.$on("ready",n[11]),{c(){N(e.$$.fragment),t=E(),N(r.$$.fragment)},m(l,o){j(e,l,o),T(l,t,o),j(r,l,o),s=!0},p(l,o){const i={};o&16&&(i.valid=l[4]),o&32&&(i.username=l[5]),r.$set(i)},i(l){s||(D(e.$$.fragment,l),D(r.$$.fragment,l),s=!0)},o(l){A(e.$$.fragment,l),A(r.$$.fragment,l),s=!1},d(l){O(e,l),l&&S(t),O(r,l)}}}function kt(n){let e,t;return e=new qr({}),e.$on("error",n[7]),{c(){N(e.$$.fragment)},m(r,s){j(e,r,s),t=!0},p:P,i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function Wr(n){let e,t,r,s,l,o,i=n[0]&&bt(n);const a=[n[2],{show:n[1]}];let u={};for(let m=0;m<a.length;m+=1)u=Ne(u,a[m]);r=new Nt({props:u}),r.$on("close",n[8]);let f=n[3]&&kt(n);return{c(){e=b("div"),i&&i.c(),t=E(),N(r.$$.fragment),s=E(),l=b("div"),f&&f.c(),v(e,"class","landing svelte-zfbu4v")},m(m,c){T(m,e,c),i&&i.m(e,null),T(m,t,c),j(r,m,c),T(m,s,c),T(m,l,c),f&&f.m(l,null),o=!0},p(m,[c]){m[0]?i?(i.p(m,c),c&1&&D(i,1)):(i=bt(m),i.c(),D(i,1),i.m(e,null)):i&&(Z(),A(i,1,1,()=>{i=null}),$());const d=c&6?Mt(a,[c&4&&Rt(m[2]),c&2&&{show:m[1]}]):{};r.$set(d),m[3]?f?(f.p(m,c),c&8&&D(f,1)):(f=kt(m),f.c(),D(f,1),f.m(l,null)):f&&(Z(),A(f,1,1,()=>{f=null}),$())},i(m){o||(D(i),D(r.$$.fragment,m),D(f),o=!0)},o(m){A(i),A(r.$$.fragment,m),A(f),o=!1},d(m){m&&S(e),i&&i.d(),m&&S(t),O(r,m),m&&S(s),m&&S(l),f&&f.d()}}}function Jr(n,e,t){let r,s;z(n,he,y=>t(4,r=y)),z(n,ae,y=>t(5,s=y));let l=Y(),o=!1,i=!1,a=setTimeout(()=>{t(0,o=!0)},100),u={title:"Error retrieving your playlists",quickDescription:"Please ensure your internet connection is working, and your Spotify account has a valid Premium subscription",fullDescription:'Error retrieving from Spotify API: Spotify API returned 502 with message " "'},f=!1;function m(){t(3,f=!0)}function c(y){t(1,i=!0),t(3,f=!1),t(2,u.title="Error while authenticating with Spotify",u),t(2,u.quickDescription="Something went wrong during authentication. Try again later.",u),t(2,u.fullDescription=y.detail.description,u)}function d(){t(1,i=!1),t(3,f=!1)}function p(){t(3,f=!1),t(1,i=!1),l("reset")}Je(()=>{clearTimeout(a)});function _(y){ne.call(this,n,y)}function g(y){ne.call(this,n,y)}return[o,i,u,f,r,s,m,c,d,p,_,g]}class Yr extends B{constructor(e){super(),G(this,e,Jr,Wr,F,{})}}const Ue=50,Xr=10,Ft="total,items.track(uri,id,name,artists.name,duration_ms,album(images,name),external_urls.spotify)",Qr=`uri,name,images,tracks(${Ft}),external_urls.spotify`;function Zr(n){let e=new Set,t=[];return n.forEach(r=>{let s=r.track;s&&(e.has(s.uri)||(e.add(s.uri),t.push(s)))}),t}async function $r(n,e,t){console.log("Getting all tracks from",e);let r,s;if(t==="playlist")r=a=>n.getPlaylist(a,{fields:Qr,limit:Ue}),s=(a,u)=>n.getPlaylistTracks(a,{offset:u,limit:Ue,fields:Ft});else if(t==="album")r=a=>n.getAlbum(a,{limit:Ue}),s=(a,u)=>n.getAlbumTracks(a,{offset:u,limit:Ue});else throw new Error("Invalid type (not playlist or album)");let l=await r(e),o=l.tracks.items,i=l.tracks.total;for(;o.length<i;){console.log(`Getting more tracks from ${t}: ${o.length} / ${i}`);let a=await s(e,o.length);o=o.concat(a.items)}return{uri:l.uri,name:l.name,images:l.images,tracks:o,link:l.external_urls.spotify}}async function zt(n){console.log("Getting all playlists");let e=await n({limit:Xr}),t=e.total;for(;e.items.length<t;){console.log(`Getting more playlists: ${e.items.length} / ${t}`);let r=await n({offset:e.items.length});e.items=e.items.concat(r.items)}return e.items}async function es(n){try{return zt(n.getMySavedAlbums)}catch{throw new Error("Error getting user albums")}}async function ts(n){try{return zt(n.getUserPlaylists)}catch{throw new Error("Error getting user playlists")}}async function ns(n,e){const t=e.split(":"),r=t[1],s=t[2];console.log("Validating ",e," of type ",r);let l=await $r(n,s,r);return console.log(l),l.tracks=Zr(l.tracks),l.tracks.length<5?{responseText:JSON.stringify({error:{message:`${r} must have at least ${jt} unique tracks`}})}:l}function wt(n,e,t){const r=n.slice();return r[10]=e[t],r[12]=t,r}function rs(n){let e;return{c(){e=b("p"),e.textContent="Loading...",v(e,"class","svelte-1jj7kj9")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function ss(n){let e,t,r,s;const l=[os,ls],o=[];function i(a,u){return a[0].length>0?0:1}return e=i(n),t=o[e]=l[e](n),{c(){t.c(),r=ue()},m(a,u){o[e].m(a,u),T(a,r,u),s=!0},p(a,u){let f=e;e=i(a),e===f?o[e].p(a,u):(Z(),A(o[f],1,1,()=>{o[f]=null}),$(),t=o[e],t?t.p(a,u):(t=o[e]=l[e](a),t.c()),D(t,1),t.m(r.parentNode,r))},i(a){s||(D(t),s=!0)},o(a){A(t),s=!1},d(a){o[e].d(a),a&&S(r)}}}function ls(n){let e;return{c(){e=b("p"),e.textContent="No albums or playlist found",v(e,"class","svelte-1jj7kj9")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function os(n){let e=[],t=new Map,r,s,l=n[0];const o=i=>i[10].id;for(let i=0;i<l.length;i+=1){let a=wt(n,l,i),u=o(a);t.set(u,e[i]=St(u,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();r=ue()},m(i,a){for(let u=0;u<e.length;u+=1)e[u].m(i,a);T(i,r,a),s=!0},p(i,a){a&29&&(l=i[0],Z(),e=Ct(e,a,o,1,i,l,t,r.parentNode,At,St,r,wt),$())},i(i){if(!s){for(let a=0;a<l.length;a+=1)D(e[a]);s=!0}},o(i){for(let a=0;a<e.length;a+=1)A(e[a]);s=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&S(r)}}}function St(n,e){let t,r,s;function l(){return e[5](e[10],e[12])}return r=new it({props:{name:e[10].name,image:He(e[10].images),total:e[10].tracks.total,externUrl:e[10].external_urls.spotify,isSelected:e[2]&&e[3]===e[10].uri}}),r.$on("click",l),{key:n,first:null,c(){t=ue(),N(r.$$.fragment),this.first=t},m(o,i){T(o,t,i),j(r,o,i),s=!0},p(o,i){e=o;const a={};i&1&&(a.name=e[10].name),i&1&&(a.image=He(e[10].images)),i&1&&(a.total=e[10].tracks.total),i&1&&(a.externUrl=e[10].external_urls.spotify),i&13&&(a.isSelected=e[2]&&e[3]===e[10].uri),r.$set(a)},i(o){s||(D(r.$$.fragment,o),s=!0)},o(o){A(r.$$.fragment,o),s=!1},d(o){o&&S(t),O(r,o)}}}function is(n){let e,t,r,s,l;const o=[ss,rs],i=[];function a(u,f){return u[1]?0:1}return r=a(n),s=i[r]=o[r](n),{c(){e=b("div"),t=b("div"),s.c(),v(t,"class","container svelte-1jj7kj9"),v(e,"class","container-background svelte-1jj7kj9")},m(u,f){T(u,e,f),h(e,t),i[r].m(t,null),l=!0},p(u,[f]){let m=r;r=a(u),r===m?i[r].p(u,f):(Z(),A(i[m],1,1,()=>{i[m]=null}),$(),s=i[r],s?s.p(u,f):(s=i[r]=o[r](u),s.c()),D(s,1),s.m(t,null))},i(u){l||(D(s),l=!0)},o(u){A(s),l=!1},d(u){u&&S(e),i[r].d()}}}function as(n,e,t){let{content:r}=e,{loaded:s=!1}=e,{isSelected:l=!0}=e,o="",i=-1,a=Y();function u(){a("select",{uri:o,type:"select",name:r[i].name})}function f(c,d){t(3,o=c),i=d,u()}const m=(c,d)=>f(c.uri,d);return n.$$set=c=>{"content"in c&&t(0,r=c.content),"loaded"in c&&t(1,s=c.loaded),"isSelected"in c&&t(2,l=c.isSelected)},[r,s,l,o,f,m]}class us extends B{constructor(e){super(),G(this,e,as,is,F,{content:0,loaded:1,isSelected:2})}}function cs(n){let e;return{c(){e=b("div"),v(e,"class","new-error svelte-v9pnmo")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function fs(n){let e;return{c(){e=b("spam"),e.textContent="Could not find Playlist or Album",v(e,"class","new-error svelte-v9pnmo")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function ds(n){let e;return{c(){e=b("spam"),e.textContent="Invalid URL",v(e,"class","new-error svelte-v9pnmo")},m(t,r){T(t,e,r)},p:P,i:P,o:P,d(t){t&&S(e)}}}function ps(n){let e,t,r,s,l;const o=[n[3].content,{isSelected:n[0]},{expand:!0}];let i={};for(let a=0;a<o.length;a+=1)i=Ne(i,o[a]);return t=new it({props:i}),{c(){e=b("div"),N(t.$$.fragment),v(e,"class","container-background svelte-v9pnmo")},m(a,u){T(a,e,u),j(t,e,null),r=!0,s||(l=x(e,"click",n[4]),s=!0)},p(a,u){const f=u&9?Mt(o,[u&8&&Rt(a[3].content),u&1&&{isSelected:a[0]},o[2]]):{};t.$set(f)},i(a){r||(D(t.$$.fragment,a),r=!0)},o(a){A(t.$$.fragment,a),r=!1},d(a){a&&S(e),O(t),s=!1,l()}}}function ms(n){let e,t,r,s,l,o,i,a;const u=[ps,ds,fs,cs],f=[];function m(c,d){return c[2]==="valid"?0:c[2]==="invalid"?1:c[2]==="notfound"?2:c[2]==="empty"?3:-1}return~(s=m(n))&&(l=f[s]=u[s](n)),{c(){e=b("div"),t=b("input"),r=E(),l&&l.c(),v(t,"type","text"),v(t,"placeholder",'Click on "Share - Copy Link" and paste here'),v(t,"class","svelte-v9pnmo"),v(e,"class","other-container svelte-v9pnmo")},m(c,d){T(c,e,d),h(e,t),Se(t,n[1]),h(e,r),~s&&f[s].m(e,null),o=!0,i||(a=x(t,"input",n[5]),i=!0)},p(c,[d]){d&2&&t.value!==c[1]&&Se(t,c[1]);let p=s;s=m(c),s===p?~s&&f[s].p(c,d):(l&&(Z(),A(f[p],1,1,()=>{f[p]=null}),$()),~s?(l=f[s],l?l.p(c,d):(l=f[s]=u[s](c),l.c()),D(l,1),l.m(e,null)):l=null)},i(c){o||(D(l),o=!0)},o(c){A(l),o=!1},d(c){c&&S(e),~s&&f[s].d(),i=!1,a()}}}function _s(n,e,t){let r;z(n,Ee,c=>t(6,r=c));let s="",{isSelected:l=!1}=e,o="invalid",i={id:null,category:null,content:{uri:"",name:"",image:"",total:0,externUrl:""}},a=Y();function u(){t(0,l=!0),a("select",{uri:i.content.uri,type:"new",name:i.content.name})}function f(){if(s===""){t(0,l=!1),t(2,o="empty");return}let c=s.match(/spotify\.com\/(album|playlist)\/(\w{22})/m);c?(console.log(c),t(3,i.category=c[1],i),t(3,i.id=c[2],i),i.category==="album"?r.getAlbum(i.id).then(d=>{t(3,i.content={uri:d.uri,name:d.name,image:d.images[0].url,total:d.tracks.total,externUrl:d.external_urls.spotify},i),t(2,o="valid")}).then(u).catch(()=>{t(0,l=!1),t(2,o="notfound")}):i.category==="playlist"&&r.getPlaylist(i.id,{fields:"uri,name,images,tracks.total,external_urls"}).then(d=>{t(3,i.content={uri:d.uri,name:d.name,image:d.images[0].url,total:d.tracks.total,externUrl:d.external_urls.spotify},i),t(2,o="valid")}).then(u).catch(()=>{t(0,l=!1),t(2,o="notfound")})):(t(0,l=!1),t(2,o="invalid"))}function m(){s=this.value,t(1,s)}return n.$$set=c=>{"isSelected"in c&&t(0,l=c.isSelected)},n.$$.update=()=>{n.$$.dirty&2&&f()},[l,s,o,i,u,m]}class gs extends B{constructor(e){super(),G(this,e,_s,ms,F,{isSelected:0})}}function ys(n){let e;return{c(){e=b("button"),e.innerHTML='<spam class="play svelte-zrq4oe">Play</spam>',v(e,"class","btn-play disabled svelte-zrq4oe")},m(t,r){T(t,e,r)},p:P,d(t){t&&S(e)}}}function hs(n){let e,t,r,s,l,o,i;return{c(){e=b("button"),t=b("spam"),t.textContent="Play",r=E(),s=b("spam"),l=U(n[2]),v(t,"class","play svelte-zrq4oe"),v(s,"class","name svelte-zrq4oe"),v(e,"class","btn-play svelte-zrq4oe"),de(e,"valid",n[1])},m(a,u){T(a,e,u),h(e,t),h(e,r),h(e,s),h(s,l),o||(i=x(e,"click",n[3]),o=!0)},p(a,u){u&4&&K(l,a[2]),u&2&&de(e,"valid",a[1])},d(a){a&&S(e),o=!1,i()}}}function vs(n){let e;return{c(){e=b("button"),e.innerHTML='<spam class="play svelte-zrq4oe">Loading...</spam>',v(e,"class","btn-play loading svelte-zrq4oe")},m(t,r){T(t,e,r)},p:P,d(t){t&&S(e)}}}function bs(n){let e;function t(l,o){return l[0]?vs:l[1]?hs:ys}let r=t(n),s=r(n);return{c(){s.c(),e=ue()},m(l,o){s.m(l,o),T(l,e,o)},p(l,[o]){r===(r=t(l))&&s?s.p(l,o):(s.d(1),s=r(l),s&&(s.c(),s.m(e.parentNode,e)))},i:P,o:P,d(l){s.d(l),l&&S(e)}}}function ks(n,e,t){let{loading:r=!1}=e,{valid:s=!0}=e,{name:l=""}=e;function o(i){ne.call(this,n,i)}return n.$$set=i=>{"loading"in i&&t(0,r=i.loading),"valid"in i&&t(1,s=i.valid),"name"in i&&t(2,l=i.name)},[r,s,l,o]}class ws extends B{constructor(e){super(),G(this,e,ks,bs,F,{loading:0,valid:1,name:2})}}function Ss(n){let e,t,r,s,l,o,i,a,u,f,m,c,d,p,_,g,y,k;return e=new Nt({props:{title:n[5].title,quickDescription:n[5].quickDescription,fullDescription:n[5].fullDescription,show:n[5].show}}),e.$on("close",n[8]),i=new us({props:{content:n[0],loaded:n[1],isSelected:n[4]==="select"}}),i.$on("select",n[6]),c=new gs({props:{isSelected:n[4]==="new"}}),c.$on("select",n[6]),p=new ws({props:{valid:n[2].uri!=="",name:n[2].name,loading:n[3]}}),p.$on("click",n[7]),{c(){N(e.$$.fragment),t=E(),r=b("div"),s=b("div"),l=b("spam"),l.textContent="Choose from your library",o=E(),N(i.$$.fragment),a=E(),u=b("div"),f=b("spam"),f.textContent="or load from an URL",m=E(),N(c.$$.fragment),d=E(),N(p.$$.fragment),v(l,"class","title svelte-1npl7m2"),v(s,"class","pregame-select svelte-1npl7m2"),v(f,"class","title svelte-1npl7m2"),v(u,"class","pregame-new svelte-1npl7m2"),v(r,"class","pregame-screen svelte-1npl7m2")},m(w,I){j(e,w,I),T(w,t,I),T(w,r,I),h(r,s),h(s,l),h(s,o),j(i,s,null),h(r,a),h(r,u),h(u,f),h(u,m),j(c,u,null),h(r,d),j(p,r,null),g=!0,y||(k=x(r,"outroend",n[11]),y=!0)},p(w,[I]){const C={};I&32&&(C.title=w[5].title),I&32&&(C.quickDescription=w[5].quickDescription),I&32&&(C.fullDescription=w[5].fullDescription),I&32&&(C.show=w[5].show),e.$set(C);const q={};I&1&&(q.content=w[0]),I&2&&(q.loaded=w[1]),I&16&&(q.isSelected=w[4]==="select"),i.$set(q);const L={};I&16&&(L.isSelected=w[4]==="new"),c.$set(L);const R={};I&4&&(R.valid=w[2].uri!==""),I&4&&(R.name=w[2].name),I&8&&(R.loading=w[3]),p.$set(R)},i(w){g||(D(e.$$.fragment,w),D(i.$$.fragment,w),D(c.$$.fragment,w),D(p.$$.fragment,w),J(()=>{_||(_=De(r,X,{},!0)),_.run(1)}),g=!0)},o(w){A(e.$$.fragment,w),A(i.$$.fragment,w),A(c.$$.fragment,w),A(p.$$.fragment,w),_||(_=De(r,X,{},!1)),_.run(0),g=!1},d(w){O(e,w),w&&S(t),w&&S(r),O(i),O(c),O(p),w&&_&&_.end(),y=!1,k()}}}function Ts(n,e,t){let r;z(n,Ee,k=>t(12,r=k));let s=[],l=[],o=!1,i={uri:"",name:""},a=!1,u="select",f={title:"",quickDescription:"",fullDescription:"",show:!1,then:""},m=Y(),c=[];async function d(){try{let k=await ts(r);t(9,s=k.filter(w=>w.tracks.total>0)),console.log("Playlists collected: ",s.length)}catch(k){console.log("Error collecting liked playlists: ",k),t(5,f={title:"Error collecting liked playlists",quickDescription:"Spotify couldn't load your liked playlists. Please refresh the page or try again later.",fullDescription:JSON.parse(k.responseText).error.message,show:!0,then:"goBack"})}try{let k=await es(r);t(10,l=k.map(w=>({uri:w.album.uri,id:w.album.id,name:w.album.name,images:w.album.images,tracks:{total:w.album.tracks.total},external_urls:{spotify:w.album.external_urls}}))),console.log("Albums collected: ",l.length)}catch(k){console.log("Error collecting liked albums: ",k),t(5,f={title:"Error collecting liked albums",quickDescription:"Spotify couldn't load your liked albums. Please refresh the page or try again later.",fullDescription:JSON.parse(k.responseText).error.message,show:!0,then:"goBack"})}t(1,o=!0)}function p(k){console.log(k),t(2,i={uri:k.detail.uri,name:k.detail.name}),t(4,u=k.detail.type),console.log(i),console.log(u)}function _(){t(3,a=!0),ns(r,i.uri).then(k=>m("submit",{content:k})).catch(k=>{console.error(k),t(5,f={title:"Invalid Playlist/Album",quickDescription:"The selected playlist/album is invalid. Please select another one.",fullDescription:JSON.parse(k.responseText).error.message,show:!0,then:"goBack"})})}function g(){f.then==="goBack"?(t(5,f.show=!1,f),t(2,i.uri="",i),t(3,a=!1)):f.then==="reset"&&m("reset")}ie(()=>{o||d(),t(5,f.show=!1,f)});function y(k){ne.call(this,n,k)}return n.$$.update=()=>{n.$$.dirty&1537&&(t(0,c=[]),c.push(...s),c.push(...l))},[c,o,i,a,u,f,p,_,g,s,l,y]}class Ps extends B{constructor(e){super(),G(this,e,Ts,Ss,F,{})}}function Ds(n){let e,t;return e=new Dr({props:{gameInfo:n[1]}}),{c(){N(e.$$.fragment)},m(r,s){j(e,r,s),t=!0},p(r,s){const l={};s&2&&(l.gameInfo=r[1]),e.$set(l)},i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function Is(n){let e,t;return e=new Ps({}),e.$on("reset",n[5]),e.$on("submit",n[3]),e.$on("outroend",n[6]),{c(){N(e.$$.fragment)},m(r,s){j(e,r,s),t=!0},p:P,i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function Es(n){let e,t;return e=new Yr({}),e.$on("ready",n[2]),e.$on("reset",n[4]),e.$on("outroend",n[6]),{c(){N(e.$$.fragment)},m(r,s){j(e,r,s),t=!0},p:P,i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function qs(n){let e,t,r,s,l,o;e=new dn({});const i=[Es,Is,Ds],a=[];function u(f,m){return f[0]==="landing"?0:f[0]==="pregame"?1:f[0]==="game"?2:-1}return~(r=u(n))&&(s=a[r]=i[r](n)),{c(){N(e.$$.fragment),t=E(),s&&s.c(),l=ue()},m(f,m){j(e,f,m),T(f,t,m),~r&&a[r].m(f,m),T(f,l,m),o=!0},p(f,[m]){let c=r;r=u(f),r===c?~r&&a[r].p(f,m):(s&&(Z(),A(a[c],1,1,()=>{a[c]=null}),$()),~r?(s=a[r],s?s.p(f,m):(s=a[r]=i[r](f),s.c()),D(s,1),s.m(l.parentNode,l)):s=null)},i(f){o||(D(e.$$.fragment,f),D(s),o=!0)},o(f){A(e.$$.fragment,f),A(s),o=!1},d(f){O(e,f),f&&S(t),~r&&a[r].d(f),f&&S(l)}}}function As(n,e,t){let r,s,l,o,i;z(n,he,g=>t(8,r=g)),z(n,ae,g=>t(9,s=g)),z(n,re,g=>t(10,l=g)),z(n,_e,g=>t(11,o=g)),z(n,Ee,g=>t(12,i=g));let a="landing",u=a,f={maxRounds:5,content:{},played:[]};function m(){l&&o&&(i.setAccessToken(o),u="pregame",t(0,a=""))}function c(g){t(1,f={maxRounds:jt,content:g.detail.content,played:[]}),console.log(f.content),u="game",t(0,a="")}function d(){W(re,l=null,l),W(ae,s=null,s),W(he,r=null,r),p()}function p(){u="landing",t(0,a=u)}function _(){t(0,a=u)}return[a,f,m,c,d,p,_]}class Cs extends B{constructor(e){super(),G(this,e,As,qs,F,{})}}function Ms(n){let e,t;return{c(){e=b("p"),e.textContent="Authenticated. You can close this window",t=b("p")},m(r,s){T(r,e,s),T(r,t,s)},i:P,o:P,d(r){r&&S(e),r&&S(t)}}}function Rs(n){let e,t,r,s,l,o,i,a;return l=new Cs({}),{c(){e=b("div"),t=b("div"),t.innerHTML='<a class="header-title svelte-109s8zc" href="/">Guessify</a>',r=E(),s=b("div"),N(l.$$.fragment),o=E(),i=b("div"),i.innerHTML=`<div class="footer-copyright svelte-109s8zc">Copyright  2023 Daniel Guimares
                <a href="https://github.com/Leinadium/guessify"><img class="icon svelte-109s8zc" src="/assets/github-mark.svg" alt="Github"/></a></div> 
            <div class="footer-description svelte-109s8zc">Guessify has no association with Spotify.
                Guessify doesn&#39;t use cookies and doesn&#39;t track your data</div>`,v(t,"class","header svelte-109s8zc"),v(s,"class","content svelte-109s8zc"),v(i,"class","footer svelte-109s8zc"),v(e,"class","main svelte-109s8zc")},m(u,f){T(u,e,f),h(e,t),h(e,r),h(e,s),j(l,s,null),h(e,o),h(e,i),a=!0},i(u){a||(D(l.$$.fragment,u),a=!0)},o(u){A(l.$$.fragment,u),a=!1},d(u){u&&S(e),O(l)}}}function Us(n){let e,t,r,s,l,o;const i=[Rs,Ms],a=[];function u(f,m){return f[0]?0:1}return r=u(n),s=a[r]=i[r](n),{c(){e=b("link"),t=E(),s.c(),l=ue(),v(e,"href","https://fonts.cdnfonts.com/css/circular-std"),v(e,"rel","stylesheet")},m(f,m){h(document.head,e),T(f,t,m),a[r].m(f,m),T(f,l,m),o=!0},p:P,i(f){o||(D(s),o=!0)},o(f){A(s),o=!1},d(f){S(e),f&&S(t),a[r].d(f),f&&S(l)}}}function Ls(n){return[!new URLSearchParams(window.location.search).has("code")]}class js extends B{constructor(e){super(),G(this,e,Ls,Us,F,{})}}new js({target:document.getElementById("app")});
